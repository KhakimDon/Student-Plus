var Uy=Object.defineProperty;var qy=(n,t,e)=>t in n?Uy(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var $=(n,t,e)=>qy(n,typeof t!="symbol"?t+"":t,e);import{o as Zt,c as re,a as W,g as $m,r as he,b as jy,w as qt,i as va,d as Ar,e as zy,f as ie,u as P,h as id,p as ad,j as Yy,k as Hy,n as vn,l as vt,F as He,m as pt,q as Se,s as de,t as Fe,v as $t,_ as Fm,x as Wy,y as kt,z as Ee,A as Fn,B as Ky,C as $e,D as od,E as Gy,G as Br,H as Qy,I as kn,J as De,K as Rs,L as ya,M as Pi,N as et,O as gn,P as Gt,Q as Sn,T as Qr,R as sl,S as Jy,U as Xy,V as ld,W as _a,X as Zy,Y as e_,Z as t_,$ as n_,a0 as r_,a1 as To,a2 as s_,a3 as i_,a4 as a_}from"./index-J9yIOodn.js";var o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var uc={};(function n(t,e,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;var R=new OffscreenCanvas(1,1),w=R.getContext("2d");w.fillRect(0,0,1,1);var ee=R.transferToImageBitmap();try{w.createPattern(ee,"no-repeat")}catch{return!1}return!0}();function u(){}function c(R){var w=e.exports.Promise,ee=w!==void 0?w:t.Promise;return typeof ee=="function"?new ee(R):(R(u,u),null)}var d=function(R,w){return{transform:function(ee){if(R)return ee;if(w.has(ee))return w.get(ee);var M=new OffscreenCanvas(ee.width,ee.height),L=M.getContext("2d");return L.drawImage(ee,0,0),w.set(ee,M),M},clear:function(){w.clear()}}}(l,new Map),f=function(){var R=Math.floor(16.666666666666668),w,ee,M={},L=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(w=function(j){var te=Math.random();return M[te]=requestAnimationFrame(function p(U){L===U||L+R-1<U?(L=U,delete M[te],j()):M[te]=requestAnimationFrame(p)}),te},ee=function(j){M[j]&&cancelAnimationFrame(M[j])}):(w=function(j){return setTimeout(j,R)},ee=function(j){return clearTimeout(j)}),{frame:w,cancel:ee}}(),g=function(){var R,w,ee={};function M(L){function j(te,p){L.postMessage({options:te||{},callback:p})}L.init=function(p){var U=p.transferControlToOffscreen();L.postMessage({canvas:U},[U])},L.fire=function(p,U,le){if(w)return j(p,null),w;var Ae=Math.random().toString(36).slice(2);return w=c(function(Y){function ke(ae){ae.data.callback===Ae&&(delete ee[Ae],L.removeEventListener("message",ke),w=null,d.clear(),le(),Y())}L.addEventListener("message",ke),j(p,Ae),ee[Ae]=ke.bind(null,{data:{callback:Ae}})}),w},L.reset=function(){L.postMessage({reset:!0});for(var p in ee)ee[p](),delete ee[p]}}return function(){if(R)return R;if(!r&&i){var L=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{R=new Worker(URL.createObjectURL(new Blob([L])))}catch(j){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",j),null}M(R)}return R}}(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(R,w){return w?w(R):R}function A(R){return R!=null}function S(R,w,ee){return v(R&&A(R[w])?R[w]:b[w],ee)}function F(R){return R<0?0:Math.floor(R)}function q(R,w){return Math.floor(Math.random()*(w-R))+R}function B(R){return parseInt(R,16)}function Q(R){return R.map(se)}function se(R){var w=String(R).replace(/[^0-9a-f]/gi,"");return w.length<6&&(w=w[0]+w[0]+w[1]+w[1]+w[2]+w[2]),{r:B(w.substring(0,2)),g:B(w.substring(2,4)),b:B(w.substring(4,6))}}function J(R){var w=S(R,"origin",Object);return w.x=S(w,"x",Number),w.y=S(w,"y",Number),w}function k(R){R.width=document.documentElement.clientWidth,R.height=document.documentElement.clientHeight}function y(R){var w=R.getBoundingClientRect();R.width=w.width,R.height=w.height}function _(R){var w=document.createElement("canvas");return w.style.position="fixed",w.style.top="0px",w.style.left="0px",w.style.pointerEvents="none",w.style.zIndex=R,w}function T(R,w,ee,M,L,j,te,p,U){R.save(),R.translate(w,ee),R.rotate(j),R.scale(M,L),R.arc(0,0,1,te,p,U),R.restore()}function I(R){var w=R.angle*(Math.PI/180),ee=R.spread*(Math.PI/180);return{x:R.x,y:R.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:R.startVelocity*.5+Math.random()*R.startVelocity,angle2D:-w+(.5*ee-Math.random()*ee),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:R.color,shape:R.shape,tick:0,totalTicks:R.ticks,decay:R.decay,drift:R.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:R.gravity*3,ovalScalar:.6,scalar:R.scalar,flat:R.flat}}function O(R,w){w.x+=Math.cos(w.angle2D)*w.velocity+w.drift,w.y+=Math.sin(w.angle2D)*w.velocity+w.gravity,w.velocity*=w.decay,w.flat?(w.wobble=0,w.wobbleX=w.x+10*w.scalar,w.wobbleY=w.y+10*w.scalar,w.tiltSin=0,w.tiltCos=0,w.random=1):(w.wobble+=w.wobbleSpeed,w.wobbleX=w.x+10*w.scalar*Math.cos(w.wobble),w.wobbleY=w.y+10*w.scalar*Math.sin(w.wobble),w.tiltAngle+=.1,w.tiltSin=Math.sin(w.tiltAngle),w.tiltCos=Math.cos(w.tiltAngle),w.random=Math.random()+2);var ee=w.tick++/w.totalTicks,M=w.x+w.random*w.tiltCos,L=w.y+w.random*w.tiltSin,j=w.wobbleX+w.random*w.tiltCos,te=w.wobbleY+w.random*w.tiltSin;if(R.fillStyle="rgba("+w.color.r+", "+w.color.g+", "+w.color.b+", "+(1-ee)+")",R.beginPath(),a&&w.shape.type==="path"&&typeof w.shape.path=="string"&&Array.isArray(w.shape.matrix))R.fill(z(w.shape.path,w.shape.matrix,w.x,w.y,Math.abs(j-M)*.1,Math.abs(te-L)*.1,Math.PI/10*w.wobble));else if(w.shape.type==="bitmap"){var p=Math.PI/10*w.wobble,U=Math.abs(j-M)*.1,le=Math.abs(te-L)*.1,Ae=w.shape.bitmap.width*w.scalar,Y=w.shape.bitmap.height*w.scalar,ke=new DOMMatrix([Math.cos(p)*U,Math.sin(p)*U,-Math.sin(p)*le,Math.cos(p)*le,w.x,w.y]);ke.multiplySelf(new DOMMatrix(w.shape.matrix));var ae=R.createPattern(d.transform(w.shape.bitmap),"no-repeat");ae.setTransform(ke),R.globalAlpha=1-ee,R.fillStyle=ae,R.fillRect(w.x-Ae/2,w.y-Y/2,Ae,Y),R.globalAlpha=1}else if(w.shape==="circle")R.ellipse?R.ellipse(w.x,w.y,Math.abs(j-M)*w.ovalScalar,Math.abs(te-L)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI):T(R,w.x,w.y,Math.abs(j-M)*w.ovalScalar,Math.abs(te-L)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI);else if(w.shape==="star")for(var oe=Math.PI/2*3,C=4*w.scalar,me=8*w.scalar,ge=w.x,ve=w.y,Ue=5,Ve=Math.PI/Ue;Ue--;)ge=w.x+Math.cos(oe)*me,ve=w.y+Math.sin(oe)*me,R.lineTo(ge,ve),oe+=Ve,ge=w.x+Math.cos(oe)*C,ve=w.y+Math.sin(oe)*C,R.lineTo(ge,ve),oe+=Ve;else R.moveTo(Math.floor(w.x),Math.floor(w.y)),R.lineTo(Math.floor(w.wobbleX),Math.floor(L)),R.lineTo(Math.floor(j),Math.floor(te)),R.lineTo(Math.floor(M),Math.floor(w.wobbleY));return R.closePath(),R.fill(),w.tick<w.totalTicks}function x(R,w,ee,M,L){var j=w.slice(),te=R.getContext("2d"),p,U,le=c(function(Ae){function Y(){p=U=null,te.clearRect(0,0,M.width,M.height),d.clear(),L(),Ae()}function ke(){r&&!(M.width===s.width&&M.height===s.height)&&(M.width=R.width=s.width,M.height=R.height=s.height),!M.width&&!M.height&&(ee(R),M.width=R.width,M.height=R.height),te.clearRect(0,0,M.width,M.height),j=j.filter(function(ae){return O(te,ae)}),j.length?p=f.frame(ke):Y()}p=f.frame(ke),U=Y});return{addFettis:function(Ae){return j=j.concat(Ae),le},canvas:R,promise:le,reset:function(){p&&f.cancel(p),U&&U()}}}function V(R,w){var ee=!R,M=!!S(w||{},"resize"),L=!1,j=S(w,"disableForReducedMotion",Boolean),te=i&&!!S(w||{},"useWorker"),p=te?g():null,U=ee?k:y,le=R&&p?!!R.__confetti_initialized:!1,Ae=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Y;function ke(oe,C,me){for(var ge=S(oe,"particleCount",F),ve=S(oe,"angle",Number),Ue=S(oe,"spread",Number),Ve=S(oe,"startVelocity",Number),tt=S(oe,"decay",Number),yt=S(oe,"gravity",Number),G=S(oe,"drift",Number),we=S(oe,"colors",Q),Qe=S(oe,"ticks",Number),Ke=S(oe,"shapes"),ct=S(oe,"scalar"),Ce=!!S(oe,"flat"),Pt=J(oe),on=ge,cr=[],Mn=R.width*Pt.x,Ir=R.height*Pt.y;on--;)cr.push(I({x:Mn,y:Ir,angle:ve,spread:Ue,startVelocity:Ve,color:we[on%we.length],shape:Ke[q(0,Ke.length)],ticks:Qe,decay:tt,gravity:yt,drift:G,scalar:ct,flat:Ce}));return Y?Y.addFettis(cr):(Y=x(R,cr,U,C,me),Y.promise)}function ae(oe){var C=j||S(oe,"disableForReducedMotion",Boolean),me=S(oe,"zIndex",Number);if(C&&Ae)return c(function(Ve){Ve()});ee&&Y?R=Y.canvas:ee&&!R&&(R=_(me),document.body.appendChild(R)),M&&!le&&U(R);var ge={width:R.width,height:R.height};p&&!le&&p.init(R),le=!0,p&&(R.__confetti_initialized=!0);function ve(){if(p){var Ve={getBoundingClientRect:function(){if(!ee)return R.getBoundingClientRect()}};U(Ve),p.postMessage({resize:{width:Ve.width,height:Ve.height}});return}ge.width=ge.height=null}function Ue(){Y=null,M&&(L=!1,t.removeEventListener("resize",ve)),ee&&R&&(document.body.contains(R)&&document.body.removeChild(R),R=null,le=!1)}return M&&!L&&(L=!0,t.addEventListener("resize",ve,!1)),p?p.fire(oe,ge,Ue):ke(oe,ge,Ue)}return ae.reset=function(){p&&p.reset(),Y&&Y.reset()},ae}var N;function D(){return N||(N=V(null,{useWorker:!0,resize:!0})),N}function z(R,w,ee,M,L,j,te){var p=new Path2D(R),U=new Path2D;U.addPath(p,new DOMMatrix(w));var le=new Path2D;return le.addPath(U,new DOMMatrix([Math.cos(te)*L,Math.sin(te)*L,-Math.sin(te)*j,Math.cos(te)*j,ee,M])),le}function X(R){if(!a)throw new Error("path confetti are not supported in this browser");var w,ee;typeof R=="string"?w=R:(w=R.path,ee=R.matrix);var M=new Path2D(w),L=document.createElement("canvas"),j=L.getContext("2d");if(!ee){for(var te=1e3,p=te,U=te,le=0,Ae=0,Y,ke,ae=0;ae<te;ae+=2)for(var oe=0;oe<te;oe+=2)j.isPointInPath(M,ae,oe,"nonzero")&&(p=Math.min(p,ae),U=Math.min(U,oe),le=Math.max(le,ae),Ae=Math.max(Ae,oe));Y=le-p,ke=Ae-U;var C=10,me=Math.min(C/Y,C/ke);ee=[me,0,0,me,-Math.round(Y/2+p)*me,-Math.round(ke/2+U)*me]}return{type:"path",path:w,matrix:ee}}function H(R){var w,ee=1,M="#000000",L='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof R=="string"?w=R:(w=R.text,ee="scalar"in R?R.scalar:ee,L="fontFamily"in R?R.fontFamily:L,M="color"in R?R.color:M);var j=10*ee,te=""+j+"px "+L,p=new OffscreenCanvas(j,j),U=p.getContext("2d");U.font=te;var le=U.measureText(w),Ae=Math.ceil(le.actualBoundingBoxRight+le.actualBoundingBoxLeft),Y=Math.ceil(le.actualBoundingBoxAscent+le.actualBoundingBoxDescent),ke=2,ae=le.actualBoundingBoxLeft+ke,oe=le.actualBoundingBoxAscent+ke;Ae+=ke+ke,Y+=ke+ke,p=new OffscreenCanvas(Ae,Y),U=p.getContext("2d"),U.font=te,U.fillStyle=M,U.fillText(w,ae,oe);var C=1/ee;return{type:"bitmap",bitmap:p.transferToImageBitmap(),matrix:[C,0,0,C,-Ae*C/2,-Y*C/2]}}e.exports=function(){return D().apply(this,arguments)},e.exports.reset=function(){D().reset()},e.exports.create=V,e.exports.shapeFromPath=X,e.exports.shapeFromText=H})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),uc,!1);const u_=uc.exports;uc.exports.create;const c_={__name:"salutAnim",setup(n){const t=()=>{const e={spread:30,startVelocity:10,gravity:.5,ticks:100,decay:.95,scalar:.7,zIndex:1e3};let r=2e3,s=Date.now();const i=(l,u)=>{u_({...e,particleCount:2,angle:u,origin:{x:l,y:Math.random()*.8+.1}})},a=()=>{Date.now()-s<r&&(i(0,50),i(1,120),requestAnimationFrame(a))};a()};return Zt(()=>{t()}),(e,r)=>(W(),re("div"))}};function ud(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,r)}return e}function $r(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(e),!0).forEach(function(r){h_(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ud(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function h_(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function cd(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(n).reduce((e,r)=>(t.includes(r)||(e[r]=P(n[r])),e),{})}function xo(n){return typeof n=="function"}function d_(n){return Yy(n)||Hy(n)}function Lm(n,t,e){let r=n;const s=t.split(".");for(let i=0;i<s.length;i++){if(!r[s[i]])return e;r=r[s[i]]}return r}function Ul(n,t,e){return ie(()=>n.some(r=>Lm(t,r,{[e]:!1})[e]))}function hd(n,t,e){return ie(()=>n.reduce((r,s)=>{const i=Lm(t,s,{[e]:!1})[e]||[];return r.concat(i)},[]))}function Bm(n,t,e,r){return n.call(r,P(t),P(e),r)}function Um(n){return n.$valid!==void 0?!n.$valid:!n}function f_(n,t,e,r,s,i,a){let{$lazy:l,$rewardEarly:u}=s,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],d=arguments.length>8?arguments[8]:void 0,f=arguments.length>9?arguments[9]:void 0,g=arguments.length>10?arguments[10]:void 0;const b=he(!!r.value),v=he(0);e.value=!1;const A=qt([t,r].concat(c,g),()=>{if(l&&!r.value||u&&!f.value&&!e.value)return;let S;try{S=Bm(n,t,d,a)}catch(F){S=Promise.reject(F)}v.value++,e.value=!!v.value,b.value=!1,Promise.resolve(S).then(F=>{v.value--,e.value=!!v.value,i.value=F,b.value=Um(F)}).catch(F=>{v.value--,e.value=!!v.value,i.value=F,b.value=!0})},{immediate:!0,deep:typeof t=="object"});return{$invalid:b,$unwatch:A}}function m_(n,t,e,r,s,i,a,l){let{$lazy:u,$rewardEarly:c}=r;const d=()=>({}),f=ie(()=>{if(u&&!e.value||c&&!l.value)return!1;let g=!0;try{const b=Bm(n,t,a,i);s.value=b,g=Um(b)}catch(b){s.value=b}return g});return{$unwatch:d,$invalid:f}}function p_(n,t,e,r,s,i,a,l,u,c,d){const f=he(!1),g=n.$params||{},b=he(null);let v,A;n.$async?{$invalid:v,$unwatch:A}=f_(n.$validator,t,f,e,r,b,s,n.$watchTargets,u,c,d):{$invalid:v,$unwatch:A}=m_(n.$validator,t,e,r,b,s,u,c);const S=n.$message;return{$message:xo(S)?ie(()=>S(cd({$pending:f,$invalid:v,$params:cd(g),$model:t,$response:b,$validator:i,$propertyPath:l,$property:a}))):S||"",$params:g,$pending:f,$invalid:v,$response:b,$unwatch:A}}function g_(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=P(n),e=Object.keys(t),r={},s={},i={};let a=null;return e.forEach(l=>{const u=t[l];switch(!0){case xo(u.$validator):r[l]=u;break;case xo(u):r[l]={$validator:u};break;case l==="$validationGroups":a=u;break;case l.startsWith("$"):i[l]=u;break;default:s[l]=u}}),{rules:r,nestedValidators:s,config:i,validationGroups:a}}const v_="__root";function y_(n,t,e,r,s,i,a,l,u){const c=Object.keys(n),d=r.get(s,n),f=he(!1),g=he(!1),b=he(0);if(d){if(!d.$partial)return d;d.$unwatch(),f.value=d.$dirty.value}const v={$dirty:f,$path:s,$touch:()=>{f.value||(f.value=!0)},$reset:()=>{f.value&&(f.value=!1)},$commit:()=>{}};return c.length?(c.forEach(A=>{v[A]=p_(n[A],t,v.$dirty,i,a,A,e,s,u,g,b)}),v.$externalResults=ie(()=>l.value?[].concat(l.value).map((A,S)=>({$propertyPath:s,$property:e,$validator:"$externalResults",$uid:`${s}-externalResult-${S}`,$message:A,$params:{},$response:null,$pending:!1})):[]),v.$invalid=ie(()=>{const A=c.some(S=>P(v[S].$invalid));return g.value=A,!!v.$externalResults.value.length||A}),v.$pending=ie(()=>c.some(A=>P(v[A].$pending))),v.$error=ie(()=>v.$dirty.value?v.$pending.value||v.$invalid.value:!1),v.$silentErrors=ie(()=>c.filter(A=>P(v[A].$invalid)).map(A=>{const S=v[A];return Ar({$propertyPath:s,$property:e,$validator:A,$uid:`${s}-${A}`,$message:S.$message,$params:S.$params,$response:S.$response,$pending:S.$pending})}).concat(v.$externalResults.value)),v.$errors=ie(()=>v.$dirty.value?v.$silentErrors.value:[]),v.$unwatch=()=>c.forEach(A=>{v[A].$unwatch()}),v.$commit=()=>{g.value=!0,b.value=Date.now()},r.set(s,n,v),v):(d&&r.set(s,n,v),v)}function __(n,t,e,r,s,i,a){const l=Object.keys(n);return l.length?l.reduce((u,c)=>(u[c]=bu({validations:n[c],state:t,key:c,parentKey:e,resultsCache:r,globalConfig:s,instance:i,externalResults:a}),u),{}):{}}function w_(n,t,e){const r=ie(()=>[t,e].filter(v=>v).reduce((v,A)=>v.concat(Object.values(P(A))),[])),s=ie({get(){return n.$dirty.value||(r.value.length?r.value.every(v=>v.$dirty):!1)},set(v){n.$dirty.value=v}}),i=ie(()=>{const v=P(n.$silentErrors)||[],A=r.value.filter(S=>(P(S).$silentErrors||[]).length).reduce((S,F)=>S.concat(...F.$silentErrors),[]);return v.concat(A)}),a=ie(()=>{const v=P(n.$errors)||[],A=r.value.filter(S=>(P(S).$errors||[]).length).reduce((S,F)=>S.concat(...F.$errors),[]);return v.concat(A)}),l=ie(()=>r.value.some(v=>v.$invalid)||P(n.$invalid)||!1),u=ie(()=>r.value.some(v=>P(v.$pending))||P(n.$pending)||!1),c=ie(()=>r.value.some(v=>v.$dirty)||r.value.some(v=>v.$anyDirty)||s.value),d=ie(()=>s.value?u.value||l.value:!1),f=()=>{n.$touch(),r.value.forEach(v=>{v.$touch()})},g=()=>{n.$commit(),r.value.forEach(v=>{v.$commit()})},b=()=>{n.$reset(),r.value.forEach(v=>{v.$reset()})};return r.value.length&&r.value.every(v=>v.$dirty)&&f(),{$dirty:s,$errors:a,$invalid:l,$anyDirty:c,$error:d,$pending:u,$touch:f,$reset:b,$silentErrors:i,$commit:g}}function bu(n){let{validations:t,state:e,key:r,parentKey:s,childResults:i,resultsCache:a,globalConfig:l={},instance:u,externalResults:c}=n;const d=s?`${s}.${r}`:r,{rules:f,nestedValidators:g,config:b,validationGroups:v}=g_(t),A=$r($r({},l),b),S=r?ie(()=>{const R=P(e);return R?P(R[r]):void 0}):e,F=$r({},P(c)||{}),q=ie(()=>{const R=P(c);return r?R?P(R[r]):void 0:R}),B=y_(f,S,r,a,d,A,u,q,e),Q=__(g,S,d,a,A,u,q),se={};v&&Object.entries(v).forEach(R=>{let[w,ee]=R;se[w]={$invalid:Ul(ee,Q,"$invalid"),$error:Ul(ee,Q,"$error"),$pending:Ul(ee,Q,"$pending"),$errors:hd(ee,Q,"$errors"),$silentErrors:hd(ee,Q,"$silentErrors")}});const{$dirty:J,$errors:k,$invalid:y,$anyDirty:_,$error:T,$pending:I,$touch:O,$reset:x,$silentErrors:V,$commit:N}=w_(B,Q,i),D=r?ie({get:()=>P(S),set:R=>{J.value=!0;const w=P(e),ee=P(c);ee&&(ee[r]=F[r]),va(w[r])?w[r].value=R:w[r]=R}}):null;r&&A.$autoDirty&&qt(S,()=>{J.value||O();const R=P(c);R&&(R[r]=F[r])},{flush:"sync"});async function z(){return O(),A.$rewardEarly&&(N(),await vn()),await vn(),new Promise(R=>{if(!I.value)return R(!y.value);const w=qt(I,()=>{R(!y.value),w()})})}function X(R){return(i.value||{})[R]}function H(){va(c)?c.value=F:Object.keys(F).length===0?Object.keys(c).forEach(R=>{delete c[R]}):Object.assign(c,F)}return Ar($r($r($r({},B),{},{$model:D,$dirty:J,$error:T,$errors:k,$invalid:y,$anyDirty:_,$pending:I,$touch:O,$reset:x,$path:d||v_,$silentErrors:V,$validate:z,$commit:N},i&&{$getResultsForChild:X,$clearExternalResults:H,$validationGroups:se}),Q))}class b_{constructor(){this.storage=new Map}set(t,e,r){this.storage.set(t,{rules:e,result:r})}checkRulesValidity(t,e,r){const s=Object.keys(r),i=Object.keys(e);return i.length!==s.length||!i.every(l=>s.includes(l))?!1:i.every(l=>e[l].$params?Object.keys(e[l].$params).every(u=>P(r[l].$params[u])===P(e[l].$params[u])):!0)}get(t,e){const r=this.storage.get(t);if(!r)return;const{rules:s,result:i}=r,a=this.checkRulesValidity(t,e,s),l=i.$unwatch?i.$unwatch:()=>({});return a?i:{$dirty:i.$dirty,$partial:!0,$unwatch:l}}}const Po={COLLECT_ALL:!0,COLLECT_NONE:!1},dd=Symbol("vuelidate#injectChildResults"),fd=Symbol("vuelidate#removeChildResults");function T_(n){let{$scope:t,instance:e}=n;const r={},s=he([]),i=ie(()=>s.value.reduce((d,f)=>(d[f]=P(r[f]),d),{}));function a(d,f){let{$registerAs:g,$scope:b,$stopPropagation:v}=f;v||t===Po.COLLECT_NONE||b===Po.COLLECT_NONE||t!==Po.COLLECT_ALL&&t!==b||(r[g]=d,s.value.push(g))}e.__vuelidateInjectInstances=[].concat(e.__vuelidateInjectInstances||[],a);function l(d){s.value=s.value.filter(f=>f!==d),delete r[d]}e.__vuelidateRemoveInstances=[].concat(e.__vuelidateRemoveInstances||[],l);const u=id(dd,[]);ad(dd,e.__vuelidateInjectInstances);const c=id(fd,[]);return ad(fd,e.__vuelidateRemoveInstances),{childResults:i,sendValidationResultsToParent:u,removeValidationResultsFromParent:c}}function qm(n){return new Proxy(n,{get(t,e){return typeof t[e]=="object"?qm(t[e]):ie(()=>t[e])}})}let md=0;function P_(n,t){var e;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(r=n,n=void 0,t=void 0);let{$registerAs:s,$scope:i=Po.COLLECT_ALL,$stopPropagation:a,$externalResults:l,currentVueInstance:u}=r;const c=u||((e=$m())===null||e===void 0?void 0:e.proxy),d=c?c.$options:{};s||(md+=1,s=`_vuelidate_${md}`);const f=he({}),g=new b_,{childResults:b,sendValidationResultsToParent:v,removeValidationResultsFromParent:A}=c?T_({$scope:i,instance:c}):{childResults:he({})};if(!n&&d.validations){const S=d.validations;t=he({}),jy(()=>{t.value=c,qt(()=>xo(S)?S.call(t.value,new qm(t.value)):S,F=>{f.value=bu({validations:F,state:t,childResults:b,resultsCache:g,globalConfig:r,instance:c,externalResults:l||c.vuelidateExternalResults})},{immediate:!0})}),r=d.validationsConfig||r}else{const S=va(n)||d_(n)?n:Ar(n||{});qt(S,F=>{f.value=bu({validations:F,state:t,childResults:b,resultsCache:g,globalConfig:r,instance:c??{},externalResults:l})},{immediate:!0})}return c&&(v.forEach(S=>S(f,{$registerAs:s,$scope:i,$stopPropagation:a})),zy(()=>A.forEach(S=>S(s)))),ie(()=>$r($r({},P(f.value)),b.value))}function E_(...n){const[t,e,r]=n,s=Ar(t),i=P_(e,s,r);return{values:s,$v:i}}const cc=n=>{if(n=P(n),Array.isArray(n))return!!n.length;if(n==null)return!1;if(n===!1)return!0;if(n instanceof Date)return!isNaN(n.getTime());if(typeof n=="object"){for(let t in n)return!0;return!1}return!!String(n).length},A_=n=>(n=P(n),Array.isArray(n)?n.length:typeof n=="object"?Object.keys(n).length:String(n).length);function Is(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return r=>(r=P(r),!cc(r)||t.every(s=>(s.lastIndex=0,s.test(r))))}Is(/^[a-zA-Z]*$/);Is(/^[a-zA-Z0-9]*$/);Is(/^\d*(\.\d+)?$/);const k_=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;Is(k_);function S_(n){return t=>!cc(t)||A_(t)>=P(n)}function R_(n){return{$validator:S_(n),$message:t=>{let{$params:e}=t;return`This field should be at least ${e.min} characters long`},$params:{min:n,type:"minLength"}}}function I_(n){return typeof n=="string"&&(n=n.trim()),cc(n)}var On={$validator:I_,$message:"Value is required",$params:{type:"required"}};const C_=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;Is(C_);Is(/(^[0-9]*$)|(^-[0-9]+$)/);Is(/^[-]?\d*(\.\d+)?$/);const x_={class:"relative w-full bg-white gap-2 flex items-start"},M_={class:"flex items-center gap-y-3 flex-col"},D_={class:"flex flex-col gap-0.5"},O_=vt({__name:"BaseStepper",props:{currentStep:{},steps:{}},setup(n){const t=n;function e(r){return r===t.currentStep?"active":t.currentStep>r?"done":""}return(r,s)=>(W(),re("div",x_,[(W(!0),re(He,null,pt(r.steps,(i,a)=>(W(),re(He,{key:a},[Se("div",{class:Fe([e(a+1),"max-w-[86px] text-center select-none transition-300 w-full group"])},[Se("div",M_,[Se("div",{class:Fe([{"done-styles":e(a+1)=="done"},"flex-center flex-shrink-0 h-[30px] w-[30px] text-white border-gray-100 bg-gray-100 flex-center transition-300 rounded-[8px] text-[14px] font-semibold leading-5 border-[2px] group-[.active]:bg-transparent group-[.active]:text-primary group-[.active]:border-primary group-[.done]:text-yellow-dark group-[.done]:bg-yellow-dark/10"])},$t(a+1),3),Se("div",D_,[Se("p",{class:Fe([{"!text-gray-400":e(a+1)!=="active","!text-black":e(a+1)=="done"},"text-xs text-dark font-medium transition-300"])},$t(r.$t(i==null?void 0:i.title)),3)])])],2),a!==4?(W(),re("div",{key:0,class:Fe([{"!bg-primary":e(a+1)},"min-w-2 min-h-0.5 bg-gray-100 !mt-4"])},null,2)):de("",!0)],64))),128))]))}}),V_=Fm(O_,[["__scopeId","data-v-7b3dca3f"]]),Yi=vt({__name:"BaseButton",props:{variant:{default:"primary"},size:{default:"md"},loading:{type:Boolean},mainClass:{default:""},iconPosition:{default:"right"},text:{default:"Button"},icon:{default:""},disabled:{type:Boolean},type:{default:"button"},id:{default:"button"}},emits:["click"],setup(n,{emit:t}){const e=n,r=t,{t:s}=Wy(),i={primary:"bg-blue-dark text-white hover:bg-blue ",danger:"bg-red/10 text-red hover:bg-red/20 disabled:text-gray-1",outline:"border border-gray-3 text-dark hover:bg-white-1",neutral:"bg-white-1 hover:bg-gray-4 text-dark disabled:text-gray-1",info:"bg-blue/10 text-blue hover:bg-blue/20 disabled:text-gray-1"},a={sm:"py-2 !px-4 text-xs font-medium rounded-md h-10",md:"py-2.5 px-6 font-medium text-base rounded-lg",lg:"p-1.5 font-medium text-base rounded-lg bg-white-1 border-none"},l=ie(()=>({"!opacity-0 !invisible":e.loading,"flex-center justify-center gap-1":e.text,"flex-row-reverse":e.iconPosition==="left"})),u=ie(()=>[i[e.variant],a[e.size],{"!pointer-events-none":e.loading}]);function c(d){if(e.loading||e.disabled){d.stopPropagation();return}r("click",d)}return(d,f)=>(W(),re("button",kt({class:[[u.value,d.$attrs.class],"inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium ring-offset-white transition-200 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-blue-dark focus-visible:ring-offset-1 disabled:pointer-events-none [&_.icon]:pointer-events-none [&_.icon]:size-5 [&_.icon]:shrink-0 dark:focus-visible:ring-blue-dark active:scale-[.98] disabled:cursor-not-allowed select-none relative disabled:opacity-60 disabled:!bg-gray-3"]},{disabled:d.disabled,type:d.type,id:d.id},{onClick:c}),[Ee(d.$slots,"default",{},()=>{var g;return[Se("span",{class:Fe([[l.value,d.mainClass],"opacity-100 text-center pointer-events-none"])},[(g=String(d.text))!=null&&g.length?(W(),re(He,{key:0},[Fn($t(P(s)(d.text)),1)],64)):de("",!0),d.icon?(W(),re("i",{key:1,class:Fe(d.icon)},null,2)):de("",!0)],2)]})],16))}});var jm=typeof global=="object"&&global&&global.Object===Object&&global,N_=typeof self=="object"&&self&&self.Object===Object&&self,ur=jm||N_||Function("return this")(),ar=ur.Symbol,zm=Object.prototype,$_=zm.hasOwnProperty,F_=zm.toString,Hi=ar?ar.toStringTag:void 0;function L_(n){var t=$_.call(n,Hi),e=n[Hi];try{n[Hi]=void 0;var r=!0}catch{}var s=F_.call(n);return r&&(t?n[Hi]=e:delete n[Hi]),s}var B_=Object.prototype,U_=B_.toString;function q_(n){return U_.call(n)}var j_="[object Null]",z_="[object Undefined]",pd=ar?ar.toStringTag:void 0;function Ei(n){return n==null?n===void 0?z_:j_:pd&&pd in Object(n)?L_(n):q_(n)}function Jr(n){return n!=null&&typeof n=="object"}var Y_="[object Symbol]";function hc(n){return typeof n=="symbol"||Jr(n)&&Ei(n)==Y_}function H_(n,t){for(var e=-1,r=n==null?0:n.length,s=Array(r);++e<r;)s[e]=t(n[e],e,n);return s}var Xr=Array.isArray,gd=ar?ar.prototype:void 0,vd=gd?gd.toString:void 0;function Ym(n){if(typeof n=="string")return n;if(Xr(n))return H_(n,Ym)+"";if(hc(n))return vd?vd.call(n):"";var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function Zr(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var W_="[object AsyncFunction]",K_="[object Function]",G_="[object GeneratorFunction]",Q_="[object Proxy]";function Hm(n){if(!Zr(n))return!1;var t=Ei(n);return t==K_||t==G_||t==W_||t==Q_}var ql=ur["__core-js_shared__"],yd=function(){var n=/[^.]+$/.exec(ql&&ql.keys&&ql.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function J_(n){return!!yd&&yd in n}var X_=Function.prototype,Z_=X_.toString;function Cs(n){if(n!=null){try{return Z_.call(n)}catch{}try{return n+""}catch{}}return""}var e0=/[\\^$.*+?()[\]{}|]/g,t0=/^\[object .+?Constructor\]$/,n0=Function.prototype,r0=Object.prototype,s0=n0.toString,i0=r0.hasOwnProperty,a0=RegExp("^"+s0.call(i0).replace(e0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function o0(n){if(!Zr(n)||J_(n))return!1;var t=Hm(n)?a0:t0;return t.test(Cs(n))}function l0(n,t){return n==null?void 0:n[t]}function xs(n,t){var e=l0(n,t);return o0(e)?e:void 0}var Tu=xs(ur,"WeakMap"),_d=Object.create,u0=function(){function n(){}return function(t){if(!Zr(t))return{};if(_d)return _d(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();function c0(n,t){var e=-1,r=n.length;for(t||(t=Array(r));++e<r;)t[e]=n[e];return t}var wd=function(){try{var n=xs(Object,"defineProperty");return n({},"",{}),n}catch{}}();function h0(n,t){for(var e=-1,r=n==null?0:n.length;++e<r&&t(n[e],e,n)!==!1;);return n}var d0=9007199254740991,f0=/^(?:0|[1-9]\d*)$/;function m0(n,t){var e=typeof n;return t=t??d0,!!t&&(e=="number"||e!="symbol"&&f0.test(n))&&n>-1&&n%1==0&&n<t}function Wm(n,t,e){t=="__proto__"&&wd?wd(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function dc(n,t){return n===t||n!==n&&t!==t}var p0=Object.prototype,g0=p0.hasOwnProperty;function Km(n,t,e){var r=n[t];(!(g0.call(n,t)&&dc(r,e))||e===void 0&&!(t in n))&&Wm(n,t,e)}function il(n,t,e,r){var s=!e;e||(e={});for(var i=-1,a=t.length;++i<a;){var l=t[i],u=void 0;u===void 0&&(u=n[l]),s?Wm(e,l,u):Km(e,l,u)}return e}var v0=9007199254740991;function Gm(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=v0}function Qm(n){return n!=null&&Gm(n.length)&&!Hm(n)}var y0=Object.prototype;function fc(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||y0;return n===e}function _0(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}var w0="[object Arguments]";function bd(n){return Jr(n)&&Ei(n)==w0}var Jm=Object.prototype,b0=Jm.hasOwnProperty,T0=Jm.propertyIsEnumerable,P0=bd(function(){return arguments}())?bd:function(n){return Jr(n)&&b0.call(n,"callee")&&!T0.call(n,"callee")};function E0(){return!1}var Xm=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Td=Xm&&typeof module=="object"&&module&&!module.nodeType&&module,A0=Td&&Td.exports===Xm,Pd=A0?ur.Buffer:void 0,k0=Pd?Pd.isBuffer:void 0,Mo=k0||E0,S0="[object Arguments]",R0="[object Array]",I0="[object Boolean]",C0="[object Date]",x0="[object Error]",M0="[object Function]",D0="[object Map]",O0="[object Number]",V0="[object Object]",N0="[object RegExp]",$0="[object Set]",F0="[object String]",L0="[object WeakMap]",B0="[object ArrayBuffer]",U0="[object DataView]",q0="[object Float32Array]",j0="[object Float64Array]",z0="[object Int8Array]",Y0="[object Int16Array]",H0="[object Int32Array]",W0="[object Uint8Array]",K0="[object Uint8ClampedArray]",G0="[object Uint16Array]",Q0="[object Uint32Array]",bt={};bt[q0]=bt[j0]=bt[z0]=bt[Y0]=bt[H0]=bt[W0]=bt[K0]=bt[G0]=bt[Q0]=!0;bt[S0]=bt[R0]=bt[B0]=bt[I0]=bt[U0]=bt[C0]=bt[x0]=bt[M0]=bt[D0]=bt[O0]=bt[V0]=bt[N0]=bt[$0]=bt[F0]=bt[L0]=!1;function J0(n){return Jr(n)&&Gm(n.length)&&!!bt[Ei(n)]}function mc(n){return function(t){return n(t)}}var Zm=typeof exports=="object"&&exports&&!exports.nodeType&&exports,sa=Zm&&typeof module=="object"&&module&&!module.nodeType&&module,X0=sa&&sa.exports===Zm,jl=X0&&jm.process,li=function(){try{var n=sa&&sa.require&&sa.require("util").types;return n||jl&&jl.binding&&jl.binding("util")}catch{}}(),Ed=li&&li.isTypedArray,ep=Ed?mc(Ed):J0,Z0=Object.prototype,ew=Z0.hasOwnProperty;function tp(n,t){var e=Xr(n),r=!e&&P0(n),s=!e&&!r&&Mo(n),i=!e&&!r&&!s&&ep(n),a=e||r||s||i,l=a?_0(n.length,String):[],u=l.length;for(var c in n)(t||ew.call(n,c))&&!(a&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||m0(c,u)))&&l.push(c);return l}function np(n,t){return function(e){return n(t(e))}}var tw=np(Object.keys,Object),nw=Object.prototype,rw=nw.hasOwnProperty;function sw(n){if(!fc(n))return tw(n);var t=[];for(var e in Object(n))rw.call(n,e)&&e!="constructor"&&t.push(e);return t}function rp(n){return Qm(n)?tp(n):sw(n)}function iw(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var aw=Object.prototype,ow=aw.hasOwnProperty;function lw(n){if(!Zr(n))return iw(n);var t=fc(n),e=[];for(var r in n)r=="constructor"&&(t||!ow.call(n,r))||e.push(r);return e}function uw(n){return Qm(n)?tp(n,!0):lw(n)}var cw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hw=/^\w*$/;function dw(n,t){if(Xr(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||hc(n)?!0:hw.test(n)||!cw.test(n)||t!=null&&n in Object(t)}var wa=xs(Object,"create");function fw(){this.__data__=wa?wa(null):{},this.size=0}function mw(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var pw="__lodash_hash_undefined__",gw=Object.prototype,vw=gw.hasOwnProperty;function yw(n){var t=this.__data__;if(wa){var e=t[n];return e===pw?void 0:e}return vw.call(t,n)?t[n]:void 0}var _w=Object.prototype,ww=_w.hasOwnProperty;function bw(n){var t=this.__data__;return wa?t[n]!==void 0:ww.call(t,n)}var Tw="__lodash_hash_undefined__";function Pw(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=wa&&t===void 0?Tw:t,this}function Ps(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Ps.prototype.clear=fw;Ps.prototype.delete=mw;Ps.prototype.get=yw;Ps.prototype.has=bw;Ps.prototype.set=Pw;function Ew(){this.__data__=[],this.size=0}function al(n,t){for(var e=n.length;e--;)if(dc(n[e][0],t))return e;return-1}var Aw=Array.prototype,kw=Aw.splice;function Sw(n){var t=this.__data__,e=al(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():kw.call(t,e,1),--this.size,!0}function Rw(n){var t=this.__data__,e=al(t,n);return e<0?void 0:t[e][1]}function Iw(n){return al(this.__data__,n)>-1}function Cw(n,t){var e=this.__data__,r=al(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}function kr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}kr.prototype.clear=Ew;kr.prototype.delete=Sw;kr.prototype.get=Rw;kr.prototype.has=Iw;kr.prototype.set=Cw;var ba=xs(ur,"Map");function xw(){this.size=0,this.__data__={hash:new Ps,map:new(ba||kr),string:new Ps}}function Mw(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function ol(n,t){var e=n.__data__;return Mw(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Dw(n){var t=ol(this,n).delete(n);return this.size-=t?1:0,t}function Ow(n){return ol(this,n).get(n)}function Vw(n){return ol(this,n).has(n)}function Nw(n,t){var e=ol(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}function Sr(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Sr.prototype.clear=xw;Sr.prototype.delete=Dw;Sr.prototype.get=Ow;Sr.prototype.has=Vw;Sr.prototype.set=Nw;var $w="Expected a function";function pc(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError($w);var e=function(){var r=arguments,s=t?t.apply(this,r):r[0],i=e.cache;if(i.has(s))return i.get(s);var a=n.apply(this,r);return e.cache=i.set(s,a)||i,a};return e.cache=new(pc.Cache||Sr),e}pc.Cache=Sr;var Fw=500;function Lw(n){var t=pc(n,function(r){return e.size===Fw&&e.clear(),r}),e=t.cache;return t}var Bw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Uw=/\\(\\)?/g,qw=Lw(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(Bw,function(e,r,s,i){t.push(s?i.replace(Uw,"$1"):r||e)}),t});function jw(n){return n==null?"":Ym(n)}function sp(n,t){return Xr(n)?n:dw(n,t)?[n]:qw(jw(n))}function ip(n){if(typeof n=="string"||hc(n))return n;var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function ap(n,t){t=sp(t,n);for(var e=0,r=t.length;n!=null&&e<r;)n=n[ip(t[e++])];return e&&e==r?n:void 0}function zw(n,t,e){var r=n==null?void 0:ap(n,t);return r===void 0?e:r}function op(n,t){for(var e=-1,r=t.length,s=n.length;++e<r;)n[s+e]=t[e];return n}var lp=np(Object.getPrototypeOf,Object);function Yw(n,t,e){var r=-1,s=n.length;t<0&&(t=-t>s?0:s+t),e=e>s?s:e,e<0&&(e+=s),s=t>e?0:e-t>>>0,t>>>=0;for(var i=Array(s);++r<s;)i[r]=n[r+t];return i}function Hw(){this.__data__=new kr,this.size=0}function Ww(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}function Kw(n){return this.__data__.get(n)}function Gw(n){return this.__data__.has(n)}var Qw=200;function Jw(n,t){var e=this.__data__;if(e instanceof kr){var r=e.__data__;if(!ba||r.length<Qw-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Sr(r)}return e.set(n,t),this.size=e.size,this}function yr(n){var t=this.__data__=new kr(n);this.size=t.size}yr.prototype.clear=Hw;yr.prototype.delete=Ww;yr.prototype.get=Kw;yr.prototype.has=Gw;yr.prototype.set=Jw;function Xw(n,t){return n&&il(t,rp(t),n)}function Zw(n,t){return n&&il(t,uw(t),n)}var up=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ad=up&&typeof module=="object"&&module&&!module.nodeType&&module,eb=Ad&&Ad.exports===up,kd=eb?ur.Buffer:void 0,Sd=kd?kd.allocUnsafe:void 0;function tb(n,t){var e=n.length,r=Sd?Sd(e):new n.constructor(e);return n.copy(r),r}function nb(n,t){for(var e=-1,r=n==null?0:n.length,s=0,i=[];++e<r;){var a=n[e];t(a,e,n)&&(i[s++]=a)}return i}function cp(){return[]}var rb=Object.prototype,sb=rb.propertyIsEnumerable,Rd=Object.getOwnPropertySymbols,gc=Rd?function(n){return n==null?[]:(n=Object(n),nb(Rd(n),function(t){return sb.call(n,t)}))}:cp;function ib(n,t){return il(n,gc(n),t)}var ab=Object.getOwnPropertySymbols,ob=ab?function(n){for(var t=[];n;)op(t,gc(n)),n=lp(n);return t}:cp;function lb(n,t){return il(n,ob(n),t)}function ub(n,t,e){var r=t(n);return Xr(n)?r:op(r,e(n))}function Pu(n){return ub(n,rp,gc)}var Eu=xs(ur,"DataView"),Au=xs(ur,"Promise"),ku=xs(ur,"Set"),Id="[object Map]",cb="[object Object]",Cd="[object Promise]",xd="[object Set]",Md="[object WeakMap]",Dd="[object DataView]",hb=Cs(Eu),db=Cs(ba),fb=Cs(Au),mb=Cs(ku),pb=Cs(Tu),jn=Ei;(Eu&&jn(new Eu(new ArrayBuffer(1)))!=Dd||ba&&jn(new ba)!=Id||Au&&jn(Au.resolve())!=Cd||ku&&jn(new ku)!=xd||Tu&&jn(new Tu)!=Md)&&(jn=function(n){var t=Ei(n),e=t==cb?n.constructor:void 0,r=e?Cs(e):"";if(r)switch(r){case hb:return Dd;case db:return Id;case fb:return Cd;case mb:return xd;case pb:return Md}return t});var gb=Object.prototype,vb=gb.hasOwnProperty;function yb(n){var t=n.length,e=new n.constructor(t);return t&&typeof n[0]=="string"&&vb.call(n,"index")&&(e.index=n.index,e.input=n.input),e}var Do=ur.Uint8Array;function _b(n){var t=new n.constructor(n.byteLength);return new Do(t).set(new Do(n)),t}function wb(n,t){var e=n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}var bb=/\w*$/;function Tb(n){var t=new n.constructor(n.source,bb.exec(n));return t.lastIndex=n.lastIndex,t}var Od=ar?ar.prototype:void 0,Vd=Od?Od.valueOf:void 0;function Pb(n){return Vd?Object(Vd.call(n)):{}}function Eb(n,t){var e=n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var Ab="[object Boolean]",kb="[object Date]",Sb="[object Map]",Rb="[object Number]",Ib="[object RegExp]",Cb="[object Set]",xb="[object String]",Mb="[object Symbol]",Db="[object ArrayBuffer]",Ob="[object DataView]",Vb="[object Float32Array]",Nb="[object Float64Array]",$b="[object Int8Array]",Fb="[object Int16Array]",Lb="[object Int32Array]",Bb="[object Uint8Array]",Ub="[object Uint8ClampedArray]",qb="[object Uint16Array]",jb="[object Uint32Array]";function zb(n,t,e){var r=n.constructor;switch(t){case Db:return _b(n);case Ab:case kb:return new r(+n);case Ob:return wb(n);case Vb:case Nb:case $b:case Fb:case Lb:case Bb:case Ub:case qb:case jb:return Eb(n);case Sb:return new r;case Rb:case xb:return new r(n);case Ib:return Tb(n);case Cb:return new r;case Mb:return Pb(n)}}function Yb(n){return typeof n.constructor=="function"&&!fc(n)?u0(lp(n)):{}}var Hb="[object Map]";function Wb(n){return Jr(n)&&jn(n)==Hb}var Nd=li&&li.isMap,Kb=Nd?mc(Nd):Wb,Gb="[object Set]";function Qb(n){return Jr(n)&&jn(n)==Gb}var $d=li&&li.isSet,Jb=$d?mc($d):Qb,Xb=2,hp="[object Arguments]",Zb="[object Array]",e1="[object Boolean]",t1="[object Date]",n1="[object Error]",dp="[object Function]",r1="[object GeneratorFunction]",s1="[object Map]",i1="[object Number]",fp="[object Object]",a1="[object RegExp]",o1="[object Set]",l1="[object String]",u1="[object Symbol]",c1="[object WeakMap]",h1="[object ArrayBuffer]",d1="[object DataView]",f1="[object Float32Array]",m1="[object Float64Array]",p1="[object Int8Array]",g1="[object Int16Array]",v1="[object Int32Array]",y1="[object Uint8Array]",_1="[object Uint8ClampedArray]",w1="[object Uint16Array]",b1="[object Uint32Array]",mt={};mt[hp]=mt[Zb]=mt[h1]=mt[d1]=mt[e1]=mt[t1]=mt[f1]=mt[m1]=mt[p1]=mt[g1]=mt[v1]=mt[s1]=mt[i1]=mt[fp]=mt[a1]=mt[o1]=mt[l1]=mt[u1]=mt[y1]=mt[_1]=mt[w1]=mt[b1]=!0;mt[n1]=mt[dp]=mt[c1]=!1;function Eo(n,t,e,r,s,i){var a,l=t&Xb;if(a!==void 0)return a;if(!Zr(n))return n;var u=Xr(n);if(u)return a=yb(n),c0(n,a);var c=jn(n),d=c==dp||c==r1;if(Mo(n))return tb(n);if(c==fp||c==hp||d&&!s)return a=d?{}:Yb(n),l?lb(n,Zw(a,n)):ib(n,Xw(a,n));if(!mt[c])return s?n:{};a=zb(n,c),i||(i=new yr);var f=i.get(n);if(f)return f;i.set(n,a),Jb(n)?n.forEach(function(v){a.add(Eo(v,t,e,v,n,i))}):Kb(n)&&n.forEach(function(v,A){a.set(A,Eo(v,t,e,A,n,i))});var g=Pu,b=u?void 0:g(n);return h0(b||n,function(v,A){b&&(A=v,v=n[A]),Km(a,A,Eo(v,t,e,A,n,i))}),a}var T1=4;function P1(n){return Eo(n,T1)}var E1="__lodash_hash_undefined__";function A1(n){return this.__data__.set(n,E1),this}function k1(n){return this.__data__.has(n)}function Oo(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new Sr;++t<e;)this.add(n[t])}Oo.prototype.add=Oo.prototype.push=A1;Oo.prototype.has=k1;function S1(n,t){for(var e=-1,r=n==null?0:n.length;++e<r;)if(t(n[e],e,n))return!0;return!1}function R1(n,t){return n.has(t)}var I1=1,C1=2;function mp(n,t,e,r,s,i){var a=e&I1,l=n.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=i.get(n),d=i.get(t);if(c&&d)return c==t&&d==n;var f=-1,g=!0,b=e&C1?new Oo:void 0;for(i.set(n,t),i.set(t,n);++f<l;){var v=n[f],A=t[f];if(r)var S=a?r(A,v,f,t,n,i):r(v,A,f,n,t,i);if(S!==void 0){if(S)continue;g=!1;break}if(b){if(!S1(t,function(F,q){if(!R1(b,q)&&(v===F||s(v,F,e,r,i)))return b.push(q)})){g=!1;break}}else if(!(v===A||s(v,A,e,r,i))){g=!1;break}}return i.delete(n),i.delete(t),g}function x1(n){var t=-1,e=Array(n.size);return n.forEach(function(r,s){e[++t]=[s,r]}),e}function M1(n){var t=-1,e=Array(n.size);return n.forEach(function(r){e[++t]=r}),e}var D1=1,O1=2,V1="[object Boolean]",N1="[object Date]",$1="[object Error]",F1="[object Map]",L1="[object Number]",B1="[object RegExp]",U1="[object Set]",q1="[object String]",j1="[object Symbol]",z1="[object ArrayBuffer]",Y1="[object DataView]",Fd=ar?ar.prototype:void 0,zl=Fd?Fd.valueOf:void 0;function H1(n,t,e,r,s,i,a){switch(e){case Y1:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case z1:return!(n.byteLength!=t.byteLength||!i(new Do(n),new Do(t)));case V1:case N1:case L1:return dc(+n,+t);case $1:return n.name==t.name&&n.message==t.message;case B1:case q1:return n==t+"";case F1:var l=x1;case U1:var u=r&D1;if(l||(l=M1),n.size!=t.size&&!u)return!1;var c=a.get(n);if(c)return c==t;r|=O1,a.set(n,t);var d=mp(l(n),l(t),r,s,i,a);return a.delete(n),d;case j1:if(zl)return zl.call(n)==zl.call(t)}return!1}var W1=1,K1=Object.prototype,G1=K1.hasOwnProperty;function Q1(n,t,e,r,s,i){var a=e&W1,l=Pu(n),u=l.length,c=Pu(t),d=c.length;if(u!=d&&!a)return!1;for(var f=u;f--;){var g=l[f];if(!(a?g in t:G1.call(t,g)))return!1}var b=i.get(n),v=i.get(t);if(b&&v)return b==t&&v==n;var A=!0;i.set(n,t),i.set(t,n);for(var S=a;++f<u;){g=l[f];var F=n[g],q=t[g];if(r)var B=a?r(q,F,g,t,n,i):r(F,q,g,n,t,i);if(!(B===void 0?F===q||s(F,q,e,r,i):B)){A=!1;break}S||(S=g=="constructor")}if(A&&!S){var Q=n.constructor,se=t.constructor;Q!=se&&"constructor"in n&&"constructor"in t&&!(typeof Q=="function"&&Q instanceof Q&&typeof se=="function"&&se instanceof se)&&(A=!1)}return i.delete(n),i.delete(t),A}var J1=1,Ld="[object Arguments]",Bd="[object Array]",co="[object Object]",X1=Object.prototype,Ud=X1.hasOwnProperty;function Z1(n,t,e,r,s,i){var a=Xr(n),l=Xr(t),u=a?Bd:jn(n),c=l?Bd:jn(t);u=u==Ld?co:u,c=c==Ld?co:c;var d=u==co,f=c==co,g=u==c;if(g&&Mo(n)){if(!Mo(t))return!1;a=!0,d=!1}if(g&&!d)return i||(i=new yr),a||ep(n)?mp(n,t,e,r,s,i):H1(n,t,u,e,r,s,i);if(!(e&J1)){var b=d&&Ud.call(n,"__wrapped__"),v=f&&Ud.call(t,"__wrapped__");if(b||v){var A=b?n.value():n,S=v?t.value():t;return i||(i=new yr),s(A,S,e,r,i)}}return g?(i||(i=new yr),Q1(n,t,e,r,s,i)):!1}function pp(n,t,e,r,s){return n===t?!0:n==null||t==null||!Jr(n)&&!Jr(t)?n!==n&&t!==t:Z1(n,t,e,r,pp,s)}function eT(n){var t=n==null?0:n.length;return t?n[t-1]:void 0}function tT(n,t){return t.length<2?n:ap(n,Yw(t,0,-1))}function qd(n,t){return pp(n,t)}function nT(n,t){return t=sp(t,n),n=tT(n,t),n==null||delete n[ip(eT(t))]}function rT(n,t){return n==null?!0:nT(n,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */new Array(256).fill("").map((n,t)=>("0"+t.toString(16)).slice(-2));/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 *//* istanbul ignore if -- @preserve */if(!Ky.startsWith("3."))throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html");/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Su;try{Su={window,document}}catch{/* istanbul ignore next -- @preserve */Su={window:{},document:{}}}var Ta=Su;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function jd(){return function n(){n.called=!0}}class ui{constructor(t,e){$(this,"source");$(this,"name");$(this,"path");$(this,"stop");$(this,"off");$(this,"return");this.source=t,this.name=e,this.path=[],this.stop=jd(),this.off=jd()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const cn=new Array(256).fill("").map((n,t)=>("0"+t.toString(16)).slice(-2));function ll(){const[n,t,e,r]=crypto.getRandomValues(new Uint32Array(4));return"e"+cn[n>>0&255]+cn[n>>8&255]+cn[n>>16&255]+cn[n>>24&255]+cn[t>>0&255]+cn[t>>8&255]+cn[t>>16&255]+cn[t>>24&255]+cn[e>>0&255]+cn[e>>8&255]+cn[e>>16&255]+cn[e>>24&255]+cn[r>>0&255]+cn[r>>8&255]+cn[r>>16&255]+cn[r>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const Ru={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function sT(n,t){const e=Ru.get(t.priority);let r=0,s=n.length;for(;r<s;){const i=r+s>>1;Ru.get(n[i].priority)<e?s=i:r=i+1}n.splice(r,0,t)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const iT="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class ye extends Error{constructor(e,r,s){super(aT(e,s));$(this,"context");$(this,"data");this.name="CKEditorError",this.context=r,this.data=s}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,r){if(e.is&&e.is("CKEditorError"))throw e;const s=new ye(e.message,r);throw s.stack=e.stack,s}}function Iu(n,t){console.warn(...oT(n,t))}function gp(n){return`
Read more: ${iT}#error-${n}`}function aT(n,t){const e=new WeakSet,s=t?` ${JSON.stringify(t,(a,l)=>{if(typeof l=="object"&&l!==null){if(e.has(l))return`[object ${l.constructor.name}]`;e.add(l)}return l})}`:"",i=gp(n);return n+s+i}function oT(n,t){const e=gp(n);return t?[n,t,e]:[n,e]}const lT="44.3.0";/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new ye("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=lT;const Qs=Symbol("listeningTo"),Cu=Symbol("emitterId"),fr=Symbol("delegations"),vp=Qt(Object);function Qt(n){if(!n)return vp;class t extends n{on(r,s,i){this.listenTo(this,r,s,i)}once(r,s,i){let a=!1;const l=(u,...c)=>{a||(a=!0,u.off(),s.call(this,u,...c))};this.listenTo(this,r,l,i)}off(r,s){this.stopListening(this,r,s)}listenTo(r,s,i,a={}){let l,u;this[Qs]||(this[Qs]={});const c=this[Qs];Yl(r)||yp(r);const d=Yl(r);(l=c[d])||(l=c[d]={emitter:r,callbacks:{}}),(u=l.callbacks[s])||(u=l.callbacks[s]=[]),u.push(i),fT(this,r,s,i,a)}stopListening(r,s,i){const a=this[Qs];let l=r&&Yl(r);const u=a&&l?a[l]:void 0,c=u&&s?u.callbacks[s]:void 0;if(!(!a||r&&!u||s&&!c))if(i)Hl(this,r,s,i),c.indexOf(i)!==-1&&(c.length===1?delete u.callbacks[s]:Hl(this,r,s,i));else if(c){for(;i=c.pop();)Hl(this,r,s,i);delete u.callbacks[s]}else if(u){for(s in u.callbacks)this.stopListening(r,s);delete a[l]}else{for(l in a)this.stopListening(a[l].emitter);delete this[Qs]}}fire(r,...s){try{const i=r instanceof ui?r:new ui(this,r),a=i.name;let l=dT(this,a);if(i.path.push(this),l){l=l.slice();for(let c=0;c<l.length;c++){const d=l[c].callback;if(d.call(this,i,...s),i.off.called&&(delete i.off.called,this._removeEventListener(a,d)),i.stop.called)break}}const u=this[fr];if(u){const c=u.get(a),d=u.get("*");c&&zd(c,i,s),d&&zd(d,i,s)}return i.return}catch(i){/* istanbul ignore next -- @preserve */ye.rethrowUnexpectedError(i,this)}}delegate(...r){return{to:(s,i)=>{this[fr]||(this[fr]=new Map),r.forEach(a=>{const l=this[fr].get(a);l?l.set(s,i):this[fr].set(a,new Map([[s,i]]))})}}}stopDelegating(r,s){if(this[fr])if(!r)this[fr].clear();else if(!s)this[fr].delete(r);else{const i=this[fr].get(r);i&&i.delete(s)}}_addEventListener(r,s,i){hT(this,r);const a=xu(this,r),l=Ru.get(i.priority),u={callback:s,priority:l};for(const c of a)sT(c,u)}_removeEventListener(r,s){const i=xu(this,r);for(const a of i)for(let l=0;l<a.length;l++)a[l].callback==s&&(a.splice(l,1),l--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Qt[n]=vp.prototype[n]});function uT(n,t){const e=n[Qs];return e&&e[t]?e[t].emitter:null}function yp(n,t){n[Cu]||(n[Cu]=t||ll())}function Yl(n){return n[Cu]}function _p(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function cT(){return{callbacks:[],childEvents:[]}}function hT(n,t){const e=_p(n);if(e[t])return;let r=t,s=null;const i=[];for(;r!==""&&!e[r];)e[r]=cT(),i.push(e[r]),s&&e[r].childEvents.push(s),s=r,r=r.substr(0,r.lastIndexOf(":"));if(r!==""){for(const a of i)a.callbacks=e[r].callbacks.slice();e[r].childEvents.push(s)}}function xu(n,t){const e=_p(n)[t];if(!e)return[];let r=[e.callbacks];for(let s=0;s<e.childEvents.length;s++){const i=xu(n,e.childEvents[s]);r=r.concat(i)}return r}function dT(n,t){if(!n._events)return null;let e=t;do{const r=n._events[e];if(r&&r.callbacks&&r.callbacks.length)return r.callbacks;const s=e.lastIndexOf(":");e=s>-1?e.substring(0,s):""}while(e);return null}function zd(n,t,e){for(let[r,s]of n){s?typeof s=="function"&&(s=s(t.name)):s=t.name;const i=new ui(t.source,s);i.path=[...t.path],r.fire(i,...e)}}function fT(n,t,e,r,s){t._addEventListener?t._addEventListener(e,r,s):n._addEventListener.call(t,e,r,s)}function Hl(n,t,e,r){t._removeEventListener?t._removeEventListener(e,r):n._removeEventListener.call(t,e,r)}const ia=Symbol("observableProperties"),Pa=Symbol("boundObservables"),aa=Symbol("boundProperties"),ms=Symbol("decoratedMethods"),Yd=Symbol("decoratedOriginal"),wp=vc(Qt());function vc(n){var e,r,s,i,a;if(!n)return wp;class t extends(a=n,i=ia,s=ms,r=aa,e=Pa,a){constructor(){super(...arguments);$(this,i);$(this,s);$(this,r);$(this,e)}set(c,d){if(Zr(c)){Object.keys(c).forEach(g=>{this.set(g,c[g])},this);return}Wl(this);const f=this[ia];if(c in this&&!f.has(c))throw new ye("observable-set-cannot-override",this);Object.defineProperty(this,c,{enumerable:!0,configurable:!0,get(){return f.get(c)},set(g){const b=f.get(c);let v=this.fire(`set:${c}`,c,g,b);v===void 0&&(v=g),(b!==v||!f.has(c))&&(f.set(c,v),this.fire(`change:${c}`,c,v,b))}}),this[c]=d}bind(...c){if(!c.length||!Hd(c))throw new ye("observable-bind-wrong-properties",this);if(new Set(c).size!==c.length)throw new ye("observable-bind-duplicate-properties",this);Wl(this);const d=this[aa];c.forEach(g=>{if(d.has(g))throw new ye("observable-bind-rebind",this)});const f=new Map;return c.forEach(g=>{const b={property:g,to:[]};d.set(g,b),f.set(g,b)}),{to:mT,toMany:pT,_observable:this,_bindProperties:c,_to:[],_bindings:f}}unbind(...c){if(!this[ia])return;const d=this[aa],f=this[Pa];if(c.length){if(!Hd(c))throw new ye("observable-unbind-wrong-properties",this);c.forEach(g=>{const b=d.get(g);b&&(b.to.forEach(([v,A])=>{const S=f.get(v),F=S[A];F.delete(b),F.size||delete S[A],Object.keys(S).length||(f.delete(v),this.stopListening(v,"change"))}),d.delete(g))})}else f.forEach((g,b)=>{this.stopListening(b,"change")}),f.clear(),d.clear()}decorate(c){Wl(this);const d=this[c];if(!d)throw new ye("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:c});this.on(c,(f,g)=>{f.return=d.apply(this,g)}),this[c]=function(...f){return this.fire(c,f)},this[c][Yd]=d,this[ms]||(this[ms]=[]),this[ms].push(c)}stopListening(c,d,f){if(!c&&this[ms]){for(const g of this[ms])this[g]=this[g][Yd];delete this[ms]}super.stopListening(c,d,f)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{vc[n]=wp.prototype[n]});function Wl(n){n[ia]||(Object.defineProperty(n,ia,{value:new Map}),Object.defineProperty(n,Pa,{value:new Map}),Object.defineProperty(n,aa,{value:new Map}))}function mT(...n){const t=vT(...n),e=Array.from(this._bindings.keys()),r=e.length;if(!t.callback&&t.to.length>1)throw new ye("observable-bind-to-no-callback",this);if(r>1&&t.callback)throw new ye("observable-bind-to-extra-callback",this);t.to.forEach(s=>{if(s.properties.length&&s.properties.length!==r)throw new ye("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(e[0]).callback=t.callback),wT(this._observable,this._to),_T(this),this._bindProperties.forEach(s=>{bp(this._observable,s)})}function pT(n,t,e){if(this._bindings.size>1)throw new ye("observable-bind-to-many-not-one-binding",this);this.to(...gT(n,t),e)}function gT(n,t){const e=n.map(r=>[r,t]);return Array.prototype.concat.apply([],e)}function Hd(n){return n.every(t=>typeof t=="string")}function vT(...n){if(!n.length)throw new ye("observable-bind-to-parse-error",null);const t={to:[]};let e;return typeof n[n.length-1]=="function"&&(t.callback=n.pop()),n.forEach(r=>{if(typeof r=="string")e.properties.push(r);else if(typeof r=="object")e={observable:r,properties:[]},t.to.push(e);else throw new ye("observable-bind-to-parse-error",null)}),t}function yT(n,t,e,r){const s=n[Pa],i=s.get(e),a=i||{};a[r]||(a[r]=new Set),a[r].add(t),i||s.set(e,a)}function _T(n){let t;n._bindings.forEach((e,r)=>{n._to.forEach(s=>{t=s.properties[e.callback?0:n._bindProperties.indexOf(r)],e.to.push([s.observable,t]),yT(n._observable,e,s.observable,t)})})}function bp(n,t){const r=n[aa].get(t);let s;r.callback?s=r.callback.apply(n,r.to.map(i=>i[0][i[1]])):(s=r.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(n,t)?n[t]=s:n.set(t,s)}function wT(n,t){t.forEach(e=>{const r=n[Pa];let s;r.get(e.observable)||n.listenTo(e.observable,"change",(i,a)=>{s=r.get(e.observable)[a],s&&s.forEach(l=>{bp(n,l.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Wd(n){let t=0;for(const e of n)t++;return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function bn(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++)if(n[r]!=t[r])return r;return n.length==t.length?"same":n.length<t.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Rr(n){return!!(n&&n[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Kd(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Gd(n){const t=Object.prototype.toString.apply(n);return t=="[object Window]"||t=="[object global]"}const Tp=Pp(Qt());function Pp(n){if(!n)return Tp;class t extends n{listenTo(r,s,i,a={}){if(Kd(r)||Gd(r)){const l={capture:!!a.useCapture,passive:!!a.usePassive},u=this._getProxyEmitter(r,l)||new bT(r,l);this.listenTo(u,s,i,a)}else super.listenTo(r,s,i,a)}stopListening(r,s,i){if(Kd(r)||Gd(r)){const a=this._getAllProxyEmitters(r);for(const l of a)this.stopListening(l,s,i)}else super.stopListening(r,s,i)}_getProxyEmitter(r,s){return uT(this,Ep(r,s))}_getAllProxyEmitters(r){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(r,s)).filter(s=>!!s)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Pp[n]=Tp.prototype[n]});class bT extends Qt(){constructor(e,r){super();$(this,"_domNode");$(this,"_options");$(this,"_domListeners");yp(this,Ep(e,r)),this._domNode=e,this._options=r}attach(e){if(this._domListeners&&this._domListeners[e])return;const r=this._createDomListener(e);this._domNode.addEventListener(e,r,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=r}detach(e){let r;this._domListeners[e]&&(!(r=this._events[e])||!r.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,r,s){this.attach(e),Qt().prototype._addEventListener.call(this,e,r,s)}_removeEventListener(e,r){Qt().prototype._removeEventListener.call(this,e,r),this.detach(e)}_createDomListener(e){const r=s=>{this.fire(e,s)};return r.removeListener=()=>{this._domNode.removeEventListener(e,r,this._options),delete this._domListeners[e]},r}}function TT(n){return n["data-ck-expando"]||(n["data-ck-expando"]=ll())}function Ep(n,t){let e=TT(n);for(const r of Object.keys(t).sort())t[r]&&(e+="-"+r);return e}const oa=PT();function PT(){const n={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const e=String.fromCharCode(t);n[e.toLowerCase()]=t}for(let t=48;t<=57;t++)n[t-48]=t;for(let t=112;t<=123;t++)n["f"+(t-111)]=t;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Vo(n){return Array.isArray(n)?n:[n]}/* istanbul ignore else -- @preserve */Ta.window.CKEDITOR_TRANSLATIONS||(Ta.window.CKEDITOR_TRANSLATIONS={});class ET extends Qt(){constructor(e={},r={}){super();$(this,"_items");$(this,"_itemMap");$(this,"_idProperty");$(this,"_bindToCollection");$(this,"_bindToExternalToInternalMap");$(this,"_bindToInternalToExternalMap");$(this,"_skippedIndexesFromExternal");const s=Rr(e);if(s||(r=e),this._items=[],this._itemMap=new Map,this._idProperty=r.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const i of e)this._items.push(i),this._itemMap.set(this._getItemIdBeforeAdding(i),i)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,r){return this.addMany([e],r)}addMany(e,r){if(r===void 0)r=this._items.length;else if(r>this._items.length||r<0)throw new ye("collection-add-item-invalid-index",this);let s=0;for(const i of e){const a=this._getItemIdBeforeAdding(i),l=r+s;this._items.splice(l,0,i),this._itemMap.set(a,i),this.fire("add",i,l),s++}return this.fire("change",{added:e,removed:[],index:r}),this}get(e){let r;if(typeof e=="string")r=this._itemMap.get(e);else if(typeof e=="number")r=this._items[e];else throw new ye("collection-get-invalid-arg",this);return r||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const r=this._idProperty,s=e[r];return s&&this._itemMap.has(s)}}getIndex(e){let r;return typeof e=="string"?r=this._itemMap.get(e):r=e,r?this._items.indexOf(r):-1}remove(e){const[r,s]=this._remove(e);return this.fire("change",{added:[],removed:[r],index:s}),r}map(e,r){return this._items.map(e,r)}forEach(e,r){this._items.forEach(e,r)}find(e,r){return this._items.find(e,r)}filter(e,r){return this._items.filter(e,r)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new ye("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:r=>{this._setUpBindToBinding(s=>new r(s))},using:r=>{typeof r=="function"?this._setUpBindToBinding(r):this._setUpBindToBinding(s=>s[r])}}}_setUpBindToBinding(e){const r=this._bindToCollection,s=(i,a,l)=>{const u=r._bindToCollection==this,c=r._bindToInternalToExternalMap.get(a);if(u&&c)this._bindToExternalToInternalMap.set(a,c),this._bindToInternalToExternalMap.set(c,a);else{const d=e(a);if(!d){this._skippedIndexesFromExternal.push(l);return}let f=l;for(const g of this._skippedIndexesFromExternal)l>g&&f--;for(const g of r._skippedIndexesFromExternal)f>=g&&f++;this._bindToExternalToInternalMap.set(a,d),this._bindToInternalToExternalMap.set(d,a),this.add(d,f);for(let g=0;g<r._skippedIndexesFromExternal.length;g++)f<=r._skippedIndexesFromExternal[g]&&r._skippedIndexesFromExternal[g]++}};for(const i of r)s(null,i,r.getIndex(i));this.listenTo(r,"add",s),this.listenTo(r,"remove",(i,a,l)=>{const u=this._bindToExternalToInternalMap.get(a);u&&this.remove(u),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,d)=>(l<d&&c.push(d-1),l>d&&c.push(d),c),[])})}_getItemIdBeforeAdding(e){const r=this._idProperty;let s;if(r in e){if(s=e[r],typeof s!="string")throw new ye("collection-add-invalid-id",this);if(this.get(s))throw new ye("collection-add-item-already-exists",this)}else e[r]=s=ll();return s}_remove(e){let r,s,i,a=!1;const l=this._idProperty;if(typeof e=="string"?(s=e,i=this._itemMap.get(s),a=!i,i&&(r=this._items.indexOf(i))):typeof e=="number"?(r=e,i=this._items[r],a=!i,i&&(s=i[l])):(i=e,s=i[l],r=this._items.indexOf(i),a=r==-1||!this._itemMap.get(s)),a)throw new ye("collection-remove-404",this);this._items.splice(r,1),this._itemMap.delete(s);const u=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(u),this.fire("remove",i,r),[i,r]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function AT(n){const t=new Map;for(const e in n)t.set(e,n[e]);return t}function Ea(n){return Rr(n)?new Map(n):AT(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Qd(n,t,e){const r=n.length,s=t.length;for(let i=r-1;i>=e;i--)n[i+s]=n[i];for(let i=0;i<s;i++)n[e+i]=t[i]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let Ms=class{is(){throw new Error("is() method is abstract")}},Ds=class extends Qt(Ms){constructor(e){super();$(this,"document");$(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new ye("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let r=this;for(;r.parent;)e.unshift(r.index),r=r.parent;return e}getAncestors(e={}){const r=[];let s=e.includeSelf?this:this.parent;for(;s;)r[e.parentFirst?"push":"unshift"](s),s=s.parent;return r}getCommonAncestor(e,r={}){const s=this.getAncestors(r),i=e.getAncestors(r);let a=0;for(;s[a]==i[a]&&s[a];)a++;return a===0?null:s[a-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const r=this.getPath(),s=e.getPath(),i=bn(r,s);switch(i){case"prefix":return!0;case"extension":return!1;default:return r[i]<s[i]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,r,s){this.fire(`change:${e}`,r,s),this.parent&&this.parent._fireChange(e,r,s)}toJSON(){const e=P1(this);return delete e.parent,e}};Ds.prototype.is=function(n){return n==="node"||n==="view:node"};let ws=class Mu extends Ds{constructor(e,r){super(e);$(this,"_textData");this._textData=r}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Mu?this===e||this.data===e.data:!1}_clone(){return new Mu(this.document,this.data)}};ws.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};let pr=class extends Ms{constructor(e,r,s){super();$(this,"textNode");$(this,"data");$(this,"offsetInText");if(this.textNode=e,r<0||r>e.data.length)throw new ye("view-textproxy-wrong-offsetintext",this);if(s<0||r+s>e.data.length)throw new ye("view-textproxy-wrong-length",this);this.data=e.data.substring(r,r+s),this.offsetInText=r}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const r=[];let s=e.includeSelf?this.textNode:this.parent;for(;s!==null;)r[e.parentFirst?"push":"unshift"](s),s=s.parent;return r}};pr.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};function kT(n){const t=[];return"attributes"in n&&n.attributes&&Kl(t,n.attributes),"classes"in n&&n.classes&&Kl(t,n.classes,"class"),"styles"in n&&n.styles&&Kl(t,n.styles,"style"),{name:n.name||!1,attributes:t}}function Kl(n,t,e){if(typeof t=="string"){n.push(e?[e,t]:[t]);return}for(const r of t)Array.isArray(r)?n.push(r):n.push(e?[e,r]:[r])}class ST{constructor(...t){$(this,"_patterns",[]);this.add(...t)}add(...t){for(let e of t)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const r of this._patterns){const s=this._isElementMatching(e,r);if(s)return{element:e,pattern:r,match:s}}return null}matchAll(...t){const e=[];for(const r of t)for(const s of this._patterns){const i=this._isElementMatching(r,s);i&&e.push({element:r,pattern:s,match:i})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const t=this._patterns[0],e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}_isElementMatching(t,e){if(typeof e=="function"){const i=e(t);return!i||typeof i!="object"?i:kT(i)}const r={};if(e.name&&(r.name=RT(e.name,t.name),!r.name))return null;const s=[];return e.attributes&&!IT(e.attributes,t,s)||e.classes&&!CT(e.classes,t,s)||e.styles&&!xT(e.styles,t,s)?null:(s.length&&(r.attributes=s),r)}}function No(n,t){return n===!0||n===t||n instanceof RegExp&&!!String(t).match(n)}function RT(n,t){return n instanceof RegExp?!!t.match(n):n===t}function yc(n,t){if(Array.isArray(n))return n.map(r=>typeof r!="object"||r instanceof RegExp?t?[t,r,!0]:[r,!0]:((r.key===void 0||r.value===void 0)&&Iu("matcher-pattern-missing-key-or-value",r),t?[t,r.key,r.value]:[r.key,r.value]));if(typeof n!="object"||n instanceof RegExp)return[t?[t,n,!0]:[n,!0]];const e=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.push(t?[t,r,n[r]]:[r,n[r]]);return e}function IT(n,t,e){let r;return typeof n=="object"&&!(n instanceof RegExp)&&!Array.isArray(n)?(n.style!==void 0&&Iu("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&Iu("matcher-pattern-deprecated-attributes-class-key",n)):r=["class","style"],t._collectAttributesMatch(yc(n),e,r)}function CT(n,t,e){return t._collectAttributesMatch(yc(n,"class"),e)}function xT(n,t,e){return t._collectAttributesMatch(yc(n,"style"),e)}class Gl{constructor(t){$(this,"_styles");$(this,"_cachedStyleNames",null);$(this,"_cachedExpandedStyleNames",null);$(this,"_styleProcessor");this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=MT(t);for(const[r,s]of e)this._styleProcessor.toNormalizedForm(r,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const r=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);return Array.isArray(r)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,Zr(t))for(const[r,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(r,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){for(const e of Vo(t)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const r=DT(e);rT(this._styles,r),delete this._styles[e],this._cleanEmptyObjectsOnPath(r)}}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!Zr(this._styles[t]))return this._styles[t];const r=this._styleProcessor.getReducedForm(t,this._styles).find(([s])=>s===t);if(Array.isArray(r))return r[1]}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames=this._cachedExpandedStyleNames||this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames=this._cachedStyleNames||this.getStylesEntries().map(([e])=>e),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const r of e)t.push(...this._styleProcessor.getReducedForm(r,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const r=[];for(const s of this.getStyleNames(!0))if(No(t,s)){if(e===!0){r.push(s);continue}const i=this.getAsString(s);No(e,i)&&r.push(s)}return r.length?r:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const r of this._styleProcessor.getRelatedStyles(t))e.push(r)}else for(const r of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(r))e.push(s);e.push(r)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const s=e.splice(0,e.length-1).join("."),i=zw(this._styles,s);if(!i)return;!Object.keys(i).length&&this.remove(s)}}function MT(n){let t=null,e=0,r=0,s=null;const i=new Map;if(n==="")return i;n.charAt(n.length-1)!=";"&&(n=n+";");for(let a=0;a<n.length;a++){const l=n.charAt(a);if(t===null)switch(l){case":":s||(s=n.substr(e,a-e),r=a+1);break;case'"':case"'":t=l;break;case";":{const u=n.substr(r,a-r);s&&i.set(s.trim(),u.trim()),s=null,e=a+1;break}}else l===t&&(t=null)}return i}function DT(n){return n.replace("-",".")}class Ql{constructor(){$(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of Vo(t))e&&this._set.add(e)}remove(t){for(const e of Vo(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(t===!0){for(const r of this._set.keys())e.push(r);return e}if(typeof t=="string"){for(const r of t.split(/\s+/))if(this._set.has(r))e.push(r);else return;return e}for(const r of this._set.keys())r.match(t)&&e.push(r);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}let Ai=class Ap extends Ds{constructor(e,r,s,i){super(e);$(this,"name");$(this,"_unsafeAttributesToRender",[]);$(this,"_attrs");$(this,"_children");$(this,"_customProperties",new Map);this.name=r,this._attrs=this._parseAttributes(s),this._children=[],i&&this._insertChild(0,i)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,r]of this._attrs.entries())yield[e,String(r)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,r){return this._attrs.has(e)?r!==void 0?Ys(this.name,e)||Wi(this.name,e)?this._attrs.get(e).has(r):this._attrs.get(e)===r:!0:!1}isSimilar(e){if(!(e instanceof Ap))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[r,s]of this._attrs){const i=e._attrs.get(r);if(i===void 0)return!1;if(typeof s=="string"||typeof i=="string"){if(i!==s)return!1}else if(!s.isSimilar(i))return!1}return!0}hasClass(...e){for(const r of e)if(!this._classes||!this._classes.has(r))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],r=e[Symbol.iterator]();return Object.assign(e,{next:r.next.bind(r)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const r of e)if(!this._styles||!this._styles.has(r))return!1;return!0}findAncestor(...e){const r=new ST(...e);let s=this.parent;for(;s&&!s.is("documentFragment");){if(r.match(s))return s;s=s.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",r=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([i])=>i!="style"&&i!="class").map(i=>`${i[0]}="${i[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(r?` style="${r}"`:"")+(s==""?"":` ${s}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const r=[];if(e)for(const i of this.getChildren())r.push(i._clone(e));const s=new this.constructor(this.document,this.name,this._attrs,r);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,r){this._fireChange("children",this,{index:e});let s=0;const i=OT(this.document,r);for(const a of i)a.parent!==null&&a._remove(),a.parent=this,a.document=this.document,this._children.splice(e,0,a),e++,s++;return s}_removeChildren(e,r=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+r;s++)this._children[s].parent=null;return this._children.splice(e,r)}_setAttribute(e,r,s=!0){if(this._fireChange("attributes",this),Ys(this.name,e)||Wi(this.name,e)){let i=this._attrs.get(e);i||(i=Ys(this.name,e)?new Gl(this.document.stylesProcessor):new Ql,this._attrs.set(e,i)),s?i.setTo(String(r)):Ys(this.name,e)?Array.isArray(r)?i.set(r[0],r[1]):i.set(r):i.set(typeof r=="string"?r.split(/\s+/):r)}else this._attrs.set(e,String(r))}_removeAttribute(e,r){if(this._fireChange("attributes",this),r!==void 0&&(Ys(this.name,e)||Wi(this.name,e))){const s=this._attrs.get(e);return s?(Wi(this.name,e)&&typeof r=="string"&&(r=r.split(/\s+/)),s.remove(r),s.isEmpty?this._attrs.delete(e):!1):!1}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,r){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,r],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,r,s){for(const[i,a,l]of e){let u=!1,c=!1;for(const[d,f]of this._attrs)if(!(s&&s.includes(d)||!No(i,d)))if(u=!0,typeof f=="string"){if(No(a,f))r.push([d]),c=!0;else if(!(i instanceof RegExp))return!1}else{const g=f._getTokensMatch(a,l||!0);if(g){c=!0;for(const b of g)r.push([d,b])}else if(!(i instanceof RegExp))return!1}if(!u||!c)return!1}return!0}_getConsumables(e,r){const s=[];if(e){const i=this._attrs.get(e);if(i!==void 0)if(typeof i=="string")s.push([e]);else for(const a of i._getConsumables(r))s.push([e,a])}else for(const[i,a]of this._attrs)if(typeof a=="string")s.push([i]);else for(const l of a._getConsumables())s.push([i,l]);return{name:!e,attributes:s}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[r,s]of e._attrs){const i=this._attrs.get(r);if(i!==void 0){if(typeof i=="string"||typeof s=="string"){if(i!==s)return!1}else if(!i._canMergeFrom(s))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[r,s]of e._attrs){const i=this._attrs.get(r);i===void 0||typeof i=="string"||typeof s=="string"?this._setAttribute(r,s):i._mergeFrom(s)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[r,s]of e._attrs){const i=this._attrs.get(r);if(i===void 0)return!1;if(typeof i=="string"||typeof s=="string"){if(i!==s)return!1}else if(!i._isMatching(s))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[r,s]of e._attrs){const i=this._attrs.get(r);typeof i=="string"||typeof s=="string"?this._attrs.delete(r):(i.remove(s.keys()),i.isEmpty&&this._attrs.delete(r))}}_setCustomProperty(e,r){this._customProperties.set(e,r)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const r=Ea(e);for(const[s,i]of r)if(i===null)r.delete(s);else if(Ys(this.name,s)){const a=i instanceof Gl?i._clone():new Gl(this.document.stylesProcessor).setTo(String(i));r.set(s,a)}else if(Wi(this.name,s)){const a=i instanceof Ql?i._clone():new Ql().setTo(String(i));r.set(s,a)}else typeof i!="string"&&r.set(s,String(i));return r}};Ai.prototype.is=function(n,t){return t?t===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function OT(n,t){if(typeof t=="string")return[new ws(n,t)];Rr(t)||(t=[t]);const e=[];for(const r of t)typeof r=="string"?e.push(new ws(n,r)):r instanceof pr?e.push(new ws(n,r.data)):e.push(r);return e}function Wi(n,t){return t=="class"||n=="a"&&t=="rel"}function Ys(n,t){return t=="style"}class kp extends Ai{constructor(t,e,r,s){super(t,e,r,s),this.getFillerOffset=VT}}kp.prototype.is=function(n,t){return t?t===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function VT(){const n=[...this.getChildren()],t=n[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const e of n)if(!e.is("uiElement"))return null;return this.childCount}class _c extends vc(kp){constructor(t,e,r,s){super(t,e,r,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",i=>i&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}_c.prototype.is=function(n,t){return t?t===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const Jd=Symbol("rootName");class NT extends _c{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(Jd)}set rootName(t){this._setCustomProperty(Jd,t)}set _name(t){this.name=t}}NT.prototype.is=function(n,t){return t?t===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};let ni=class{constructor(t={}){$(this,"direction");$(this,"boundaries");$(this,"singleCharacters");$(this,"shallow");$(this,"ignoreElementEnd");$(this,"_position");$(this,"_boundaryStartParent");$(this,"_boundaryEndParent");if(!t.boundaries&&!t.startPosition)throw new ye("view-tree-walker-no-start-position",null);if(t.direction&&t.direction!="forward"&&t.direction!="backward")throw new ye("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=ft._createAt(t.startPosition):this._position=ft._createAt(t.boundaries[t.direction=="backward"?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,r;do r=this.position,e=this.next();while(!e.done&&t(e.value));e.done||(this._position=r)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,r=t.parent;if(r.parent===null&&t.offset===r.childCount)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(r&&r.is("view:$text")){if(t.isAtEnd)return this._position=ft._createAfter(r),this._next();s=r.data[t.offset]}else s=r.getChild(t.offset);if(typeof s=="string"){let i;this.singleCharacters?i=1:i=(r===this._boundaryEndParent?this.boundaries.end.offset:r.data.length)-t.offset;const a=new pr(r,t.offset,i);return t.offset+=i,this._position=t,this._formatReturnValue("text",a,e,t,i)}if(s&&s.is("view:element")){if(!this.shallow)t=new ft(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new ft(s,0),this._position=t,this._next();let i=s.data.length,a;return s==this._boundaryEndParent?(i=this.boundaries.end.offset,a=new pr(s,0,i),t=ft._createAfter(a)):(a=new pr(s,0,s.data.length),t.offset++),this._position=t,this._formatReturnValue("text",a,e,t,i)}return t=ft._createAfter(r),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",r,e,t)}_previous(){let t=this.position.clone();const e=this.position,r=t.parent;if(r.parent===null&&t.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(r.is("view:$text")){if(t.isAtStart)return this._position=ft._createBefore(r),this._previous();s=r.data[t.offset-1]}else s=r.getChild(t.offset-1);if(typeof s=="string"){let i;if(this.singleCharacters)i=1;else{const l=r===this._boundaryStartParent?this.boundaries.start.offset:0;i=t.offset-l}t.offset-=i;const a=new pr(r,t.offset,i);return this._position=t,this._formatReturnValue("text",a,e,t,i)}if(s&&s.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",s,e,t,1)):(t=new ft(s,s.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,e,t));if(s&&s.is("view:$text")){if(this.singleCharacters)return t=new ft(s,s.data.length),this._position=t,this._previous();let i=s.data.length,a;if(s==this._boundaryStartParent){const l=this.boundaries.start.offset;a=new pr(s,l,s.data.length-l),i=a.data.length,t=ft._createBefore(a)}else a=new pr(s,0,s.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",a,e,t,i)}return t=ft._createBefore(r),this._position=t,this._formatReturnValue("elementStart",r,e,t,1)}_formatReturnValue(t,e,r,s,i){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=ft._createAfter(e.textNode),this._position=s):r=ft._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=ft._createBefore(e.textNode),this._position=s):r=ft._createBefore(e.textNode))),{done:!1,value:{type:t,item:e,previousPosition:r,nextPosition:s,length:i}}}},ft=class mr extends Ms{constructor(e,r){super();$(this,"parent");$(this,"offset");this.parent=e,this.offset=r}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof _c);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const r=mr._createAt(this),s=r.offset+e;return r.offset=s<0?0:s,r}getLastMatchingPosition(e,r={}){r.startPosition=this;const s=new ni(r);return s.skip(e),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const r=this.getAncestors(),s=e.getAncestors();let i=0;for(;r[i]==s[i]&&r[i];)i++;return i===0?null:r[i-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const r=this.parent.is("node")?this.parent.getPath():[],s=e.parent.is("node")?e.parent.getPath():[];r.push(this.offset),s.push(e.offset);const i=bn(r,s);switch(i){case"prefix":return"before";case"extension":return"after";default:return r[i]<s[i]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new ni(e)}clone(){return new mr(this.parent,this.offset)}static _createAt(e,r){if(e instanceof mr)return new this(e.parent,e.offset);{const s=e;if(r=="end")r=s.is("$text")?s.data.length:s.childCount;else{if(r=="before")return this._createBefore(s);if(r=="after")return this._createAfter(s);if(r!==0&&!r)throw new ye("view-createpositionat-offset-required",s)}return new mr(s,r)}}static _createAfter(e){if(e.is("$textProxy"))return new mr(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new ye("view-position-after-root",e,{root:e});return new mr(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new mr(e.textNode,e.offsetInText);if(!e.parent)throw new ye("view-position-before-root",e,{root:e});return new mr(e.parent,e.index)}};ft.prototype.is=function(n){return n==="position"||n==="view:position"};let Xn=class Vr extends Ms{constructor(e,r=null){super();$(this,"start");$(this,"end");this.start=e.clone(),this.end=r?r.clone():e.clone()}*[Symbol.iterator](){yield*new ni({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(ho,{direction:"backward"}),r=this.end.getLastMatchingPosition(ho);return e.parent.is("$text")&&e.isAtStart&&(e=ft._createBefore(e.parent)),r.parent.is("$text")&&r.isAtEnd&&(r=ft._createAfter(r.parent)),new Vr(e,r)}getTrimmed(){let e=this.start.getLastMatchingPosition(ho);if(e.isAfter(this.end)||e.isEqual(this.end))return new Vr(e,e);let r=this.end.getLastMatchingPosition(ho,{direction:"backward"});const s=e.nodeAfter,i=r.nodeBefore;return s&&s.is("$text")&&(e=new ft(s,0)),i&&i.is("$text")&&(r=new ft(i,i.data.length)),new Vr(e,r)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,r=!1){e.isCollapsed&&(r=!1);const s=this.containsPosition(e.start)||r&&this.start.isEqual(e.start),i=this.containsPosition(e.end)||r&&this.end.isEqual(e.end);return s&&i}getDifference(e){const r=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&r.push(new Vr(this.start,e.start)),this.containsPosition(e.end)&&r.push(new Vr(e.end,this.end))):r.push(this.clone()),r}getIntersection(e){if(this.isIntersecting(e)){let r=this.start,s=this.end;return this.containsPosition(e.start)&&(r=e.start),this.containsPosition(e.end)&&(s=e.end),new Vr(r,s)}return null}getWalker(e={}){return e.boundaries=this,new ni(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,r=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(r=this.end.parent.previousSibling),e&&e.is("element")&&e===r?e:null}clone(){return new Vr(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const r=new ni(e);for(const s of r)yield s.item}*getPositions(e={}){e.boundaries=this;const r=new ni(e);yield r.position;for(const s of r)yield s.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,r,s,i){return new this(new ft(e,r),new ft(s,i))}static _createFromPositionAndShift(e,r){const s=e,i=e.getShiftedBy(r);return r>0?new this(s,i):new this(i,s)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const r=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(ft._createBefore(e),r)}};Xn.prototype.is=function(n){return n==="range"||n==="view:range"};function ho(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}let Sp=class Rp extends Qt(Ms){constructor(...e){super();$(this,"_ranges");$(this,"_lastRangeBackward");$(this,"_isFake");$(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const r of this._ranges)(!e||r.start.isBefore(e.start))&&(e=r);return e?e.clone():null}getLastRange(){let e=null;for(const r of this._ranges)(!e||r.end.isAfter(e.end))&&(e=r);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const r of this._ranges){let s=!1;for(const i of e._ranges)if(r.isEqual(i)){s=!0;break}if(!s)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const r=Wd(this.getRanges()),s=Wd(e.getRanges());if(r!=s)return!1;if(r==0)return!0;for(let i of this.getRanges()){i=i.getTrimmed();let a=!1;for(let l of e.getRanges())if(l=l.getTrimmed(),i.start.isEqual(l.start)&&i.end.isEqual(l.end)){a=!0;break}if(!a)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[r,s,i]=e;if(typeof s=="object"&&(i=s,s=void 0),r===null)this._setRanges([]),this._setFakeOptions(i);else if(r instanceof Rp||r instanceof Ip)this._setRanges(r.getRanges(),r.isBackward),this._setFakeOptions({fake:r.isFake,label:r.fakeSelectionLabel});else if(r instanceof Xn)this._setRanges([r],i&&i.backward),this._setFakeOptions(i);else if(r instanceof ft)this._setRanges([new Xn(r)]),this._setFakeOptions(i);else if(r instanceof Ds){const a=!!i&&!!i.backward;let l;if(s===void 0)throw new ye("view-selection-setto-required-second-parameter",this);s=="in"?l=Xn._createIn(r):s=="on"?l=Xn._createOn(r):l=new Xn(ft._createAt(r,s)),this._setRanges([l],a),this._setFakeOptions(i)}else if(Rr(r))this._setRanges(r,i&&i.backward),this._setFakeOptions(i);else throw new ye("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,r){if(this.anchor===null)throw new ye("view-selection-setfocus-no-ranges",this);const s=ft._createAt(e,r);if(s.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.pop(),s.compareWith(i)=="before"?this._addRange(new Xn(s,i),!0):this._addRange(new Xn(i,s)),this.fire("change")}_setRanges(e,r=!1){e=Array.from(e),this._ranges=[];for(const s of e)this._addRange(s);this._lastRangeBackward=!!r}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,r=!1){if(!(e instanceof Xn))throw new ye("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!r}_pushRange(e){for(const r of this._ranges)if(e.isIntersecting(r))throw new ye("view-selection-range-intersects",this,{addedRange:e,intersectingRange:r});this._ranges.push(new Xn(e.start,e.end))}};Sp.prototype.is=function(n){return n==="selection"||n==="view:selection"};let Ip=class extends Qt(Ms){constructor(...e){super();$(this,"_selection");this._selection=new Sp,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,r){this._selection.setFocus(e,r)}};Ip.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class $T extends ui{constructor(e,r,s){super(e,r);$(this,"startRange");$(this,"_eventPhase");$(this,"_currentTarget");this.startRange=s,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Jl=Symbol("bubbling contexts");function Xd(n){class t extends n{fire(r,...s){try{const i=r instanceof ui?r:new ui(this,r),a=Xl(this);if(!a.size)return;if(Ki(i,"capturing",this),Hs(a,"$capture",i,...s))return i.return;const l=i.startRange||this.selection.getFirstRange(),u=l?l.getContainedElement():null,c=u?!!Cp(a,u):!1;let d=u||FT(l);if(Ki(i,"atTarget",d),!c){if(Hs(a,"$text",i,...s))return i.return;Ki(i,"bubbling",d)}for(;d;){if(d.is("rootElement")){if(Hs(a,"$root",i,...s))return i.return}else if(d.is("element")&&Hs(a,d.name,i,...s))return i.return;if(Hs(a,d,i,...s))return i.return;d=d.parent,Ki(i,"bubbling",d)}return Ki(i,"bubbling",this),Hs(a,"$document",i,...s),i.return}catch(i){/* istanbul ignore next -- @preserve */ye.rethrowUnexpectedError(i,this)}}_addEventListener(r,s,i){const a=Vo(i.context||"$document"),l=Xl(this);for(const u of a){let c=l.get(u);c||(c=new(Qt()),l.set(u,c)),this.listenTo(c,r,s,i)}}_removeEventListener(r,s){const i=Xl(this);for(const a of i.values())this.stopListening(a,r,s)}}return t}{const n=Xd(Object);["fire","_addEventListener","_removeEventListener"].forEach(t=>{Xd[t]=n.prototype[t]})}function Ki(n,t,e){n instanceof $T&&(n._eventPhase=t,n._currentTarget=e)}function Hs(n,t,e,...r){const s=typeof t=="string"?n.get(t):Cp(n,t);return s?(s.fire(e,...r),e.stop.called):!1}function Cp(n,t){for(const[e,r]of n)if(typeof e=="function"&&e(t))return r;return null}function Xl(n){return n[Jl]||(n[Jl]=new Map),n[Jl]}function FT(n){if(!n)return null;const t=n.start.parent,e=n.end.parent,r=t.getPath(),s=e.getPath();return r.length>s.length?t:e}const Zd=10;class xp extends Ai{constructor(e,r,s,i){super(e,r,s,i);$(this,"_priority",Zd);$(this,"_id",null);$(this,"_clonesGroup",null);this.getFillerOffset=LT}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new ye("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const r=super._clone(e);return r._priority=this._priority,r._id=this._id,r}_canMergeAttributesFrom(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canSubtractAttributesOf(e)}}$(xp,"DEFAULT_PRIORITY",Zd);xp.prototype.is=function(n,t){return t?t===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function LT(){if(Zl(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(Zl(n)>1)return null;n=n.parent}return!n||Zl(n)>1?null:this.childCount}function Zl(n){return Array.from(n.getChildren()).filter(t=>!t.is("uiElement")).length}class BT extends Ai{constructor(t,e,r,s){super(t,e,r,s),this.getFillerOffset=UT}_insertChild(t,e){if(e&&(e instanceof Ds||Array.from(e).length>0))throw new ye("view-emptyelement-cannot-add",[this,e]);return 0}}BT.prototype.is=function(n,t){return t?t===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function UT(){return null}class qT extends Ai{constructor(t,e,r,s){super(t,e,r,s),this.getFillerOffset=jT}_insertChild(t,e){if(e&&(e instanceof Ds||Array.from(e).length>0))throw new ye("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const r of this.getAttributeKeys())e.setAttribute(r,this.getAttribute(r));return e}}qT.prototype.is=function(n,t){return t?t===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function jT(){return null}class zT extends Ai{constructor(t,e,r,s){super(t,e,r,s),this.getFillerOffset=YT}_insertChild(t,e){if(e&&(e instanceof Ds||Array.from(e).length>0))throw new ye("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}zT.prototype.is=function(n,t){return t?t===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function YT(){return null}let HT=class extends Qt(Ms){constructor(e,r){super();$(this,"document");$(this,"_children",[]);$(this,"_customProperties",new Map);this.document=e,r&&this._insertChild(0,r)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,r){this._fireChange("children",this,{index:e});let s=0;const i=WT(this.document,r);for(const a of i)a.parent!==null&&a._remove(),a.parent=this,this._children.splice(e,0,a),e++,s++;return s}_removeChildren(e,r=1){this._fireChange("children",this,{index:e});for(let s=e;s<e+r;s++)this._children[s].parent=null;return this._children.splice(e,r)}_fireChange(e,r,s){this.fire(`change:${e}`,r,s)}_setCustomProperty(e,r){this._customProperties.set(e,r)}_removeCustomProperty(e){return this._customProperties.delete(e)}};HT.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function WT(n,t){return typeof t=="string"?[new ws(n,t)]:(Rr(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new ws(n,e):e instanceof pr?new ws(n,e.data):e))}const KT=n=>n.createTextNode("Â "),GT=n=>{const t=n.createElement("span");return t.dataset.ckeFiller="true",t.innerText="Â ",t},QT=n=>{const t=n.createElement("br");return t.dataset.ckeFiller="true",t};QT(Ta.document);KT(Ta.document);GT(Ta.document);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class os{is(){throw new Error("is() method is abstract")}}class Es extends os{constructor(e,r,s){super();$(this,"textNode");$(this,"data");$(this,"offsetInText");if(this.textNode=e,r<0||r>e.offsetSize)throw new ye("model-textproxy-wrong-offsetintext",this);if(s<0||r+s>e.offsetSize)throw new ye("model-textproxy-wrong-length",this);this.data=e.data.substring(r,r+s),this.offsetInText=r}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const r=[];let s=e.includeSelf?this:this.parent;for(;s;)r[e.parentFirst?"push":"unshift"](s),s=s.parent;return r}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Es.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};class ea{constructor(t){$(this,"direction");$(this,"boundaries");$(this,"singleCharacters");$(this,"shallow");$(this,"ignoreElementEnd");$(this,"_position");$(this,"_boundaryStartParent");$(this,"_boundaryEndParent");$(this,"_visitedParent");if(!t||!t.boundaries&&!t.startPosition)throw new ye("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if(e!="forward"&&e!="backward")throw new ye("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=xe._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,r,s,i;do s=this.position,i=this._visitedParent,{done:e,value:r}=this.next();while(!e&&t(r));e||(this._position=s,this._visitedParent=i)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),r=this._visitedParent;if(r.parent===null&&e.offset===r.maxOffset)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=la(e,r),i=s||Mp(e,r,s);if(i&&i.is("model:element")){if(!this.shallow)e.path.push(0),this._visitedParent=i;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,ps("elementStart",i,t,e,1)}if(i&&i.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let c=i.endOffset;this._boundaryEndParent==r&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),a=c-e.offset}const l=e.offset-i.startOffset,u=new Es(i,l,a);return e.offset+=a,this._position=e,ps("text",u,t,e,a)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=r.parent,this.ignoreElementEnd?this._next():ps("elementEnd",r,t,e)}_previous(){const t=this.position,e=this.position.clone(),r=this._visitedParent;if(r.parent===null&&e.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=e.parent,i=la(e,s),a=i||Dp(e,s,i);if(a&&a.is("model:element"))return e.offset--,this.shallow?(this._position=e,ps("elementStart",a,t,e,1)):(e.path.push(a.maxOffset),this._position=e,this._visitedParent=a,this.ignoreElementEnd?this._previous():ps("elementEnd",a,t,e));if(a&&a.is("model:$text")){let l;if(this.singleCharacters)l=1;else{let d=a.startOffset;this._boundaryStartParent==r&&this.boundaries.start.offset>d&&(d=this.boundaries.start.offset),l=e.offset-d}const u=e.offset-a.startOffset,c=new Es(a,u-l,l);return e.offset-=l,this._position=e,ps("text",c,t,e,l)}return e.path.pop(),this._position=e,this._visitedParent=r.parent,ps("elementStart",r,t,e,1)}}function ps(n,t,e,r,s){return{done:!1,value:{type:n,item:t,previousPosition:e,nextPosition:r,length:s}}}class xe extends os{constructor(e,r,s="toNone"){super();$(this,"root");$(this,"path");$(this,"stickiness");if(!e.is("element")&&!e.is("documentFragment"))throw new ye("model-position-root-invalid",e);if(!Array.isArray(r)||r.length===0)throw new ye("model-position-path-incorrect-format",e,{path:r});e.is("rootElement")?r=r.slice():(r=[...e.getPath(),...r],e=e.root),this.root=e,this.path=r,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let r=0;r<this.path.length-1;r++)if(e=e.getChildAtOffset(this.path[r]),!e)throw new ye("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new ye("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return la(this,this.parent)}get nodeAfter(){const e=this.parent;return Mp(this,e,la(this,e))}get nodeBefore(){const e=this.parent;return Dp(this,e,la(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let r=0;r<this.path.length-1;r++)if(e=e.getChildAtOffset(this.path[r]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const r=bn(this.path,e.path);switch(r){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[r]<e.path[r]?"before":"after"}}getLastMatchingPosition(e,r={}){r.startPosition=this;const s=new ea(r);return s.skip(e),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const r=this.parent;return r.is("element")?r.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const r=bn(this.path,e.path),s=typeof r=="string"?Math.min(this.path.length,e.path.length):r;return this.path.slice(0,s)}getCommonAncestor(e){const r=this.getAncestors(),s=e.getAncestors();let i=0;for(;r[i]==s[i]&&r[i];)i++;return i===0?null:r[i-1]}getShiftedBy(e){const r=this.clone(),s=r.offset+e;return r.offset=s<0?0:s,r}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const r=Math.min(this.path.length,e.path.length);for(let s=0;s<r;s++){const i=this.path[s]-e.path[s];if(i<-1||i>1)return!1;if(i===1)return ef(e,this,s);if(i===-1)return ef(this,e,s)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?Du(this.path,r):Du(e.path,r)}hasSameParentAs(e){if(this.root!==e.root)return!1;const r=this.getParentPath(),s=e.getParentPath();return bn(r,s)=="same"}getTransformedByOperation(e){let r;switch(e.type){case"insert":r=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":r=this._getTransformedByMoveOperation(e);break;case"split":r=this._getTransformedBySplitOperation(e);break;case"merge":r=this._getTransformedByMergeOperation(e);break;default:r=xe._createAt(this);break}return r}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const r=e.movedRange;return r.containsPosition(this)||r.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const r=e.movedRange,s=r.containsPosition(this)||r.start.isEqual(this);let i;return s?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?i=xe._createAt(e.deletionPosition):i=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i}_getTransformedByDeletion(e,r){const s=xe._createAt(this);if(this.root!=e.root)return s;if(bn(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+r>this.offset)return null;s.offset-=r}}else if(bn(e.getParentPath(),this.getParentPath())=="prefix"){const i=e.path.length-1;if(e.offset<=this.path[i]){if(e.offset+r>this.path[i])return null;s.path[i]-=r}}return s}_getTransformedByInsertion(e,r){const s=xe._createAt(this);if(this.root!=e.root)return s;if(bn(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(s.offset+=r);else if(bn(e.getParentPath(),this.getParentPath())=="prefix"){const i=e.path.length-1;e.offset<=this.path[i]&&(s.path[i]+=r)}return s}_getTransformedByMove(e,r,s){if(r=r._getTransformedByDeletion(e,s),e.isEqual(r))return xe._createAt(this);const i=this._getTransformedByDeletion(e,s);return i===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(s).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,r):i._getTransformedByInsertion(r,s)}_getCombined(e,r){const s=e.path.length-1,i=xe._createAt(r);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[s]-e.offset,i.path=[...i.path,...this.path.slice(s+1)],i}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,r,s="toNone"){if(e.is("model:position"))return new xe(e.root,e.path,e.stickiness);{const i=e;if(r=="end")r=i.maxOffset;else{if(r=="before")return this._createBefore(i,s);if(r=="after")return this._createAfter(i,s);if(r!==0&&!r)throw new ye("model-createpositionat-offset-required",[this,e])}if(!i.is("element")&&!i.is("documentFragment"))throw new ye("model-position-parent-incorrect",[this,e]);const a=i.getPath();return a.push(r),new this(i.root,a,s)}}static _createAfter(e,r){if(!e.parent)throw new ye("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,r)}static _createBefore(e,r){if(!e.parent)throw new ye("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,r)}static fromJSON(e,r){if(e.root==="$graveyard"){const s=new xe(r.graveyard,e.path);return s.stickiness=e.stickiness,s}if(!r.getRoot(e.root))throw new ye("model-position-fromjson-no-root",r,{rootName:e.root});return new xe(r.getRoot(e.root),e.path,e.stickiness)}}xe.prototype.is=function(n){return n==="position"||n==="model:position"};function la(n,t){const e=t.getChildAtOffset(n.offset);return e&&e.is("$text")&&e.startOffset<n.offset?e:null}function Mp(n,t,e){return e!==null?null:t.getChildAtOffset(n.offset)}function Dp(n,t,e){return e!==null?null:t.getChild(t.offsetToIndex(n.offset)-1)}function ef(n,t,e){return!(e+1===n.path.length||!Du(t.path,e+1)||!JT(n,e+1))}function Du(n,t){for(;t<n.length;){if(n[t]!==0)return!1;t++}return!0}function JT(n,t){let e=n.parent,r=n.path.length-1,s=0;for(;r>=t;){if(n.path[r]+s!==e.maxOffset)return!1;s=1,r--,e=e.parent}return!0}class Pe extends os{constructor(e,r){super();$(this,"start");$(this,"end");this.start=xe._createAt(e),this.end=r?xe._createAt(r):xe._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new ea({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),r=this.end.getParentPath();return bn(e,r)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,r=!1){e.isCollapsed&&(r=!1);const s=this.containsPosition(e.start)||r&&this.start.isEqual(e.start),i=this.containsPosition(e.end)||r&&this.end.isEqual(e.end);return s&&i}containsItem(e){const r=xe._createBefore(e);return this.containsPosition(r)||this.start.isEqual(r)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const r=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&r.push(new Pe(this.start,e.start)),this.containsPosition(e.end)&&r.push(new Pe(e.end,this.end))):r.push(new Pe(this.start,this.end)),r}getIntersection(e){if(this.isIntersecting(e)){let r=this.start,s=this.end;return this.containsPosition(e.start)&&(r=e.start),this.containsPosition(e.end)&&(s=e.end),new Pe(r,s)}return null}getJoined(e,r=!1){let s=this.isIntersecting(e);if(s||(this.start.isBefore(e.start)?s=r?this.end.isTouching(e.start):this.end.isEqual(e.start):s=r?e.end.isTouching(this.start):e.end.isEqual(this.start)),!s)return null;let i=this.start,a=this.end;return e.start.isBefore(i)&&(i=e.start),e.end.isAfter(a)&&(a=e.end),new Pe(i,a)}getMinimalFlatRanges(){const e=[],r=this.start.getCommonPath(this.end).length,s=xe._createAt(this.start);let i=s.parent;for(;s.path.length>r+1;){const a=i.maxOffset-s.offset;a!==0&&e.push(new Pe(s,s.getShiftedBy(a))),s.path=s.path.slice(0,-1),s.offset++,i=i.parent}for(;s.path.length<=this.end.path.length;){const a=this.end.path[s.path.length-1],l=a-s.offset;l!==0&&e.push(new Pe(s,s.getShiftedBy(l))),s.offset=a,s.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new ea(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const r=new ea(e);for(const s of r)yield s.item}*getPositions(e={}){e.boundaries=this;const r=new ea(e);yield r.position;for(const s of r)yield s.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new Pe(this.start,this.end)]}getTransformedByOperations(e){const r=[new Pe(this.start,this.end)];for(const s of e)for(let i=0;i<r.length;i++){const a=r[i].getTransformedByOperation(s);r.splice(i,1,...a),i+=a.length-1}for(let s=0;s<r.length;s++){const i=r[s];for(let a=s+1;a<r.length;a++){const l=r[a];(i.containsRange(l)||l.containsRange(i)||i.isEqual(l))&&r.splice(a,1)}}return r}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,r=this.end.nodeBefore;return e&&e.is("element")&&e===r?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,r=!1){return this._getTransformedByInsertion(e.position,e.howMany,r)}_getTransformedByMoveOperation(e,r=!1){const s=e.sourcePosition,i=e.howMany,a=e.targetPosition;return this._getTransformedByMove(s,a,i,r)}_getTransformedBySplitOperation(e){const r=this.start._getTransformedBySplitOperation(e);let s=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(s=this.end.getShiftedBy(1)),r.root!=s.root&&(s=this.end.getShiftedBy(-1)),new Pe(r,s)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new Pe(this.start);let r=this.start._getTransformedByMergeOperation(e),s=this.end._getTransformedByMergeOperation(e);return r.root!=s.root&&(s=this.end.getShiftedBy(-1)),r.isAfter(s)?(e.sourcePosition.isBefore(e.targetPosition)?(r=xe._createAt(s),r.offset=0):(e.deletionPosition.isEqual(r)||(s=e.deletionPosition),r=e.targetPosition),new Pe(r,s)):new Pe(r,s)}_getTransformedByInsertion(e,r,s=!1){if(s&&this.containsPosition(e))return[new Pe(this.start,e),new Pe(e.getShiftedBy(r),this.end._getTransformedByInsertion(e,r))];{const i=new Pe(this.start,this.end);return i.start=i.start._getTransformedByInsertion(e,r),i.end=i.end._getTransformedByInsertion(e,r),[i]}}_getTransformedByMove(e,r,s,i=!1){if(this.isCollapsed){const g=this.start._getTransformedByMove(e,r,s);return[new Pe(g)]}const a=Pe._createFromPositionAndShift(e,s),l=r._getTransformedByDeletion(e,s);if(this.containsPosition(r)&&!i&&(a.containsPosition(this.start)||a.containsPosition(this.end))){const g=this.start._getTransformedByMove(e,r,s),b=this.end._getTransformedByMove(e,r,s);return[new Pe(g,b)]}let u;const c=this.getDifference(a);let d=null;const f=this.getIntersection(a);if(c.length==1?d=new Pe(c[0].start._getTransformedByDeletion(e,s),c[0].end._getTransformedByDeletion(e,s)):c.length==2&&(d=new Pe(this.start,this.end._getTransformedByDeletion(e,s))),d?u=d._getTransformedByInsertion(l,s,f!==null||i):u=[],f){const g=new Pe(f.start._getCombined(a.start,l),f.end._getCombined(a.start,l));u.length==2?u.splice(1,0,g):u.push(g)}return u}_getTransformedByDeletion(e,r){let s=this.start._getTransformedByDeletion(e,r),i=this.end._getTransformedByDeletion(e,r);return s==null&&i==null?null:(s==null&&(s=e),i==null&&(i=e),new Pe(s,i))}static _createFromPositionAndShift(e,r){const s=e,i=e.getShiftedBy(r);return r>0?new this(s,i):new this(i,s)}static _createIn(e){return new this(xe._createAt(e,0),xe._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(xe._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new ye("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const r=e[0];e.sort((a,l)=>a.start.isAfter(l.start)?1:-1);const s=e.indexOf(r),i=new this(r.start,r.end);for(let a=s-1;a>=0&&e[a].end.isEqual(i.start);a--)i.start=xe._createAt(e[a].start);for(let a=s+1;a<e.length&&e[a].start.isEqual(i.end);a++)i.end=xe._createAt(e[a].end);return i}static fromJSON(e,r){return new this(xe.fromJSON(e.start,r),xe.fromJSON(e.end,r))}}Pe.prototype.is=function(n){return n==="range"||n==="model:range"};let ki=class extends os{constructor(e){super();$(this,"parent",null);$(this,"_attrs");$(this,"_index",null);$(this,"_startOffset",null);this._attrs=Ea(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let r=this;for(;r.parent;)e.unshift(r.startOffset),r=r.parent;return e}getAncestors(e={}){const r=[];let s=e.includeSelf?this:this.parent;for(;s;)r[e.parentFirst?"push":"unshift"](s),s=s.parent;return r}getCommonAncestor(e,r={}){const s=this.getAncestors(r),i=e.getAncestors(r);let a=0;for(;s[a]==i[a]&&s[a];)a++;return a===0?null:s[a-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const r=this.getPath(),s=e.getPath(),i=bn(r,s);switch(i){case"prefix":return!0;case"extension":return!1;default:return r[i]<s[i]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((r,s)=>(r[s[0]]=s[1],r),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,r){this._attrs.set(e,r)}_setAttributesTo(e){this._attrs=Ea(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};ki.prototype.is=function(n){return n==="node"||n==="model:node"};class ul extends Qt(os){constructor(...e){super();$(this,"_lastRangeBackward",!1);$(this,"_attrs",new Map);$(this,"_ranges",[]);e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const r of this._ranges){let s=!1;for(const i of e._ranges)if(r.isEqual(i)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new Pe(e.start,e.end)}getFirstRange(){let e=null;for(const r of this._ranges)(!e||r.start.isBefore(e.start))&&(e=r);return e?new Pe(e.start,e.end):null}getLastRange(){let e=null;for(const r of this._ranges)(!e||r.end.isAfter(e.end))&&(e=r);return e?new Pe(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[r,s,i]=e;if(typeof s=="object"&&(i=s,s=void 0),r===null)this._setRanges([]);else if(r instanceof ul)this._setRanges(r.getRanges(),r.isBackward);else if(r&&typeof r.getRanges=="function")this._setRanges(r.getRanges(),r.isBackward);else if(r instanceof Pe)this._setRanges([r],!!i&&!!i.backward);else if(r instanceof xe)this._setRanges([new Pe(r)]);else if(r instanceof ki){const a=!!i&&!!i.backward;let l;if(s=="in")l=Pe._createIn(r);else if(s=="on")l=Pe._createOn(r);else if(s!==void 0)l=new Pe(xe._createAt(r,s));else throw new ye("model-selection-setto-required-second-parameter",[this,r]);this._setRanges([l],a)}else if(Rr(r))this._setRanges(r,i&&!!i.backward);else throw new ye("model-selection-setto-not-selectable",[this,r])}_setRanges(e,r=!1){const s=Array.from(e),i=s.some(a=>{if(!(a instanceof Pe))throw new ye("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(l=>!l.isEqual(a))});s.length===this._ranges.length&&!i||(this._replaceAllRanges(s),this._lastRangeBackward=!!r,this.fire("change:range",{directChange:!0}))}setFocus(e,r){if(this.anchor===null)throw new ye("model-selection-setfocus-no-ranges",[this,e]);const s=xe._createAt(e,r);if(s.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.length&&this._popRange(),s.compareWith(i)=="before"?(this._pushRange(new Pe(s,i)),this._lastRangeBackward=!0):(this._pushRange(new Pe(i,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,r){this.getAttribute(e)!==r&&(this._attrs.set(e,r),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const r of this.getRanges()){const s=tf(r.start,e);ZT(s,r)&&(yield s);const i=r.getWalker();for(const l of i){const u=l.item;l.type=="elementEnd"&&XT(u,e,r)?yield u:l.type=="elementStart"&&u.is("model:element")&&u.root.document.model.schema.isBlock(u)&&i.jumpTo(xe._createAt(u,"end"))}const a=tf(r.end,e);eP(a,r)&&(yield a)}}containsEntireContent(e=this.anchor.root){const r=xe._createAt(e,0),s=xe._createAt(e,"end");return r.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new Pe(e.start,e.end))}_checkRange(e){for(let r=0;r<this._ranges.length;r++)if(e.isIntersecting(this._ranges[r]))throw new ye("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[r]})}_replaceAllRanges(e){this._removeAllRanges();for(const r of e)this._pushRange(r)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}ul.prototype.is=function(n){return n==="selection"||n==="model:selection"};function Op(n,t){return t.has(n)?!1:(t.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function XT(n,t,e){return Op(n,t)&&wc(n,e)}function tf(n,t){const r=n.parent.root.document.model.schema,s=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const a=s.find(l=>i?!1:(i=r.isLimit(l),!i&&Op(l,t)));return s.forEach(l=>t.add(l)),a}function wc(n,t){const e=tP(n);return e?!t.containsRange(Pe._createOn(e),!0):!0}function ZT(n,t){return n?t.isCollapsed||n.isEmpty?!0:t.start.isTouching(xe._createAt(n,n.maxOffset))?!1:wc(n,t):!1}function eP(n,t){return n?t.isCollapsed||n.isEmpty?!0:t.end.isTouching(xe._createAt(n,0))?!1:wc(n,t):!1}function tP(n){const t=n.root.document.model.schema;let e=n.parent;for(;e;){if(t.isBlock(e))return e;e=e.parent}}class cl extends Qt(Pe){constructor(t,e){super(t,e),nP.call(this)}detach(){this.stopListening()}toRange(){return new Pe(this.start,this.end)}static fromRange(t){return new cl(t.start,t.end)}}cl.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function nP(){this.listenTo(this.root.document.model,"applyOperation",(n,t)=>{const e=t[0];e.isDocumentOperation&&rP.call(this,e)},{priority:"low"})}function rP(n){const t=this.getTransformedByOperation(n),e=Pe._createFromRanges(t),r=!e.isEqual(this),s=sP(this,n);let i=null;if(r){e.root.rootName=="$graveyard"&&(n.type=="remove"?i=n.sourcePosition:i=n.deletionPosition);const a=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",a,{deletionPosition:i})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:i})}function sP(n,t){switch(t.type){case"insert":return n.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(t.sourcePosition)||n.start.isEqual(t.sourcePosition)||n.containsPosition(t.targetPosition);case"split":return n.containsPosition(t.splitPosition)||n.containsPosition(t.insertionPosition)}return!1}class Mt extends ki{constructor(e,r){super(r);$(this,"_data");this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Mt(this.data,this.getAttributes())}static fromJSON(e){return new Mt(e.data,e.attributes)}}Mt.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};const Aa="selection:";class iP extends Qt(os){constructor(e){super();$(this,"_selection");this._selection=new aP(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,r){this._selection.setFocus(e,r)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,r){this._selection.setAttribute(e,r)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Aa+e}static _isStoreAttributeKey(e){return e.startsWith(Aa)}}iP.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class aP extends ul{constructor(e){super();$(this,"markers",new ET({idProperty:"name"}));$(this,"_model");$(this,"_document");$(this,"_attributePriority",new Map);$(this,"_selectionRestorePosition",null);$(this,"_hasChangedRange",!1);$(this,"_overriddenGravityRegister",new Set);$(this,"_observedMarkers",new Set);this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(r,s)=>{const i=s[0];!i.isDocumentOperation||i.type=="marker"||i.type=="rename"||i.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(r,s,i,a)=>{this._updateMarker(s,a)}),this.listenTo(this._document,"change",(r,s)=>{oP(this._model,s)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,r){super.setFocus(e,r),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,r){if(this._setAttribute(e,r)){const s=[e];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const r=[e];this.fire("change:attribute",{attributeKeys:r,directChange:!0})}}overrideGravity(){const e=ll();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new ye("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const r=this._prepareRange(e);r&&this._ranges.push(r)}_validateSelectionRanges(e){for(const r of e)if(!this._document._validateSelectionRange(r))throw new ye("document-selection-wrong-position",this,{range:r})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const r=cl.fromRange(e);return r.on("change:range",(s,i,a)=>{if(this._hasChangedRange=!0,r.root==this._document.graveyard){this._selectionRestorePosition=a.deletionPosition;const l=this._ranges.indexOf(r);this._ranges.splice(l,1),r.detach()}}),r}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let r=!1;for(const i of this._model.markers){const a=i.name.split(":",1)[0];if(!this._observedMarkers.has(a))continue;const l=i.getRange();for(const u of this.getRanges())l.containsRange(u,!u.isCollapsed)&&e.push(i)}const s=Array.from(this.markers);for(const i of e)this.markers.has(i)||(this.markers.add(i),r=!0);for(const i of Array.from(this.markers))e.includes(i)||(this.markers.remove(i),r=!0);r&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(e,r){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let i=!1;const a=Array.from(this.markers),l=this.markers.has(e);if(!r)l&&(this.markers.remove(e),i=!0);else{let u=!1;for(const c of this.getRanges())if(r.containsRange(c,!c.isCollapsed)){u=!0;break}u&&!l?(this.markers.add(e),i=!0):!u&&l&&(this.markers.remove(e),i=!0)}i&&this.fire("change:marker",{oldMarkers:a,directChange:!1})}_updateAttributes(e){const r=Ea(this._getSurroundingAttributes()),s=Ea(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[a,l]of this._attributePriority)l=="low"&&(this._attrs.delete(a),this._attributePriority.delete(a));this._setAttributesTo(r);const i=[];for(const[a,l]of this.getAttributes())(!s.has(a)||s.get(a)!==l)&&i.push(a);for(const[a]of s)this.hasAttribute(a)||i.push(a);i.length>0&&this.fire("change:attribute",{attributeKeys:i,directChange:!1})}_setAttribute(e,r,s=!0){const i=s?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===r?!1:(this._attrs.set(e,r),this._attributePriority.set(e,i),!0)}_removeAttribute(e,r=!0){const s=r?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,s),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const r=new Set;for(const[s,i]of this.getAttributes())e.get(s)!==i&&this._removeAttribute(s,!1);for(const[s,i]of e)this._setAttribute(s,i,!1)&&r.add(s);return r}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const r of e.getAttributeKeys())r.startsWith(Aa)&&(yield[r.substr(Aa.length),e.getAttribute(r)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),r=this._model.schema;if(e.root.rootName=="$graveyard")return null;let s=null;if(this.isCollapsed){const i=e.textNode?e.textNode:e.nodeBefore,a=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(s=Gi(i,r)),s||(s=Gi(a,r)),!this.isGravityOverridden&&!s){let l=i;for(;l&&!s;)l=l.previousSibling,s=Gi(l,r)}if(!s){let l=a;for(;l&&!s;)l=l.nextSibling,s=Gi(l,r)}s||(s=this.getStoredAttributes())}else{const i=this.getFirstRange();for(const a of i){if(a.item.is("element")&&r.isObject(a.item)){s=Gi(a.item,r);break}if(a.type=="text"){s=a.item.getAttributes();break}}}return s}_fixGraveyardSelection(e){const r=this._model.schema.getNearestSelectionRange(e);r&&this._pushRange(r)}}function Gi(n,t){if(!n)return null;if(n instanceof Es||n instanceof Mt)return n.getAttributes();if(!t.isInline(n))return null;if(!t.isObject(n))return[];const e=[];for(const[r,s]of n.getAttributes())t.checkAttribute("$text",r)&&t.getAttributeProperties(r).copyFromObject!==!1&&e.push([r,s]);return e}function oP(n,t){const e=n.document.differ;for(const r of e.getChanges()){if(r.type!="insert")continue;const s=r.position.parent;r.length===s.maxOffset&&n.enqueueChange(t,a=>{const l=Array.from(s.getAttributeKeys()).filter(u=>u.startsWith(Aa));for(const u of l)a.removeAttribute(u,s)})}}class ua{constructor(t){$(this,"_nodes",[]);$(this,"_offsetToNode",[]);t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new ye("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new ye("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const r=[];for(const i of e){if(!(i instanceof ki))throw new ye("model-nodelist-insertnodes-not-node",this);r.push(i)}let s=this.indexToOffset(t);Qd(this._nodes,r,t),Qd(this._offsetToNode,lP(r),s);for(let i=t;i<this._nodes.length;i++)this._nodes[i]._index=i,this._nodes[i]._startOffset=s,s+=this._nodes[i].offsetSize}_removeNodes(t,e=1){if(e==0)return[];let r=this.indexToOffset(t);const s=this._nodes.splice(t,e),i=s[s.length-1],a=i.startOffset+i.offsetSize-r;this._offsetToNode.splice(r,a);for(const l of s)l._index=null,l._startOffset=null;for(let l=t;l<this._nodes.length;l++)this._nodes[l]._index=l,this._nodes[l]._startOffset=r,r+=this._nodes[l].offsetSize;return s}_removeNodesArray(t){if(t.length==0)return;for(const r of t)r._index=null,r._startOffset=null;this._nodes=this._nodes.filter(r=>r.index!==null),this._offsetToNode=this._offsetToNode.filter(r=>r.index!==null);let e=0;for(let r=0;r<this._nodes.length;r++)this._nodes[r]._index=r,this._nodes[r]._startOffset=e,e+=this._nodes[r].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}function lP(n){const t=[];let e=0;for(const r of n)for(let s=0;s<r.offsetSize;s++)t[e++]=r;return t}class _r extends ki{constructor(e,r,s){super(r);$(this,"name");$(this,"_children",new ua);this.name=e,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let r=this;for(const s of e)r=r.getChildAtOffset(s);return r}findAncestor(e,r={}){let s=r.includeSelf?this:this.parent;for(;s;){if(s.name===e)return s;s=s.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const r of this._children)e.children.push(r.toJSON())}return e}_clone(e=!1){const r=e?cP(this._children):void 0;return new _r(this.name,this.getAttributes(),r)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,r){const s=uP(r);for(const i of s)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,r=1){const s=this._children._removeNodes(e,r);for(const i of s)i.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const r of e)r.parent=null}static fromJSON(e){let r;if(e.children){r=[];for(const s of e.children)s.name?r.push(_r.fromJSON(s)):r.push(Mt.fromJSON(s))}return new _r(e.name,e.attributes,r)}}_r.prototype.is=function(n,t){return t?t===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function uP(n){if(typeof n=="string")return[new Mt(n)];Rr(n)||(n=[n]);const t=[];for(const e of n)typeof e=="string"?t.push(new Mt(e)):e instanceof Es?t.push(new Mt(e.data,e.getAttributes())):t.push(e);return t}function cP(n){const t=[];for(const e of n)t.push(e._clone(!0));return t}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Ln{constructor(t){$(this,"baseVersion");$(this,"isDocumentOperation");$(this,"batch");this.baseVersion=t,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function bc(n,t){const e=Vp(t),r=e.reduce((a,l)=>a+l.offsetSize,0),s=n.parent;Ra(n);const i=n.index;return s._insertChild(i,e),Sa(s,i+e.length),Sa(s,i),new Pe(n,n.getShiftedBy(r))}function hP(n){if(!n.isFlat)throw new ye("operation-utils-remove-range-not-flat",this);const t=n.start.parent;Ra(n.start),Ra(n.end);const e=t._removeChildren(n.start.index,n.end.index-n.start.index);return Sa(t,n.start.index),e}function ka(n,t){if(!n.isFlat)throw new ye("operation-utils-move-range-not-flat",this);const e=hP(n);return t=t._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),bc(t,e)}function dP(n,t,e){Ra(n.start),Ra(n.end);for(const r of n.getItems({shallow:!0})){const s=r.is("$textProxy")?r.textNode:r;e!==null?s._setAttribute(t,e):s._removeAttribute(t),Sa(s.parent,s.index)}Sa(n.end.parent,n.end.index)}function Vp(n){const t=[];function e(r){if(typeof r=="string")t.push(new Mt(r));else if(r instanceof Es)t.push(new Mt(r.data,r.getAttributes()));else if(r instanceof ki)t.push(r);else if(Rr(r))for(const s of r)e(s)}e(n);for(let r=1;r<t.length;r++){const s=t[r],i=t[r-1];s instanceof Mt&&i instanceof Mt&&Np(s,i)&&(t.splice(r-1,2,new Mt(i.data+s.data,i.getAttributes())),r--)}return t}function Sa(n,t){const e=n.getChild(t-1),r=n.getChild(t);if(e&&r&&e.is("$text")&&r.is("$text")&&Np(e,r)){const s=new Mt(e.data+r.data,e.getAttributes());n._removeChildren(t-1,2),n._insertChild(t-1,s)}}function Ra(n){const t=n.textNode,e=n.parent;if(t){const r=n.offset-t.startOffset,s=t.index;e._removeChildren(s,1);const i=new Mt(t.data.substr(0,r),t.getAttributes()),a=new Mt(t.data.substr(r),t.getAttributes());e._insertChild(s,[i,a])}}function Np(n,t){const e=n.getAttributes(),r=t.getAttributes();for(const s of e){if(s[1]!==t.getAttribute(s[0]))return!1;r.next()}return r.next().done}class gt extends Ln{constructor(e,r,s,i){super(i);$(this,"sourcePosition");$(this,"howMany");$(this,"targetPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=r,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Pe._createFromPositionAndShift(this.sourcePosition,this.howMany),Pe._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new gt(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new gt(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,r=this.targetPosition.parent,s=this.sourcePosition.offset,i=this.targetPosition.offset;if(s+this.howMany>e.maxOffset)throw new ye("move-operation-nodes-do-not-exist",this);if(e===r&&s<i&&i<s+this.howMany)throw new ye("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&bn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const a=this.sourcePosition.path.length-1;if(this.targetPosition.path[a]>=s&&this.targetPosition.path[a]<s+this.howMany)throw new ye("move-operation-node-into-itself",this)}}_execute(){ka(Pe._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,r){const s=xe.fromJSON(e.sourcePosition,r),i=xe.fromJSON(e.targetPosition,r);return new this(s,e.howMany,i,e.baseVersion)}}class sn extends Ln{constructor(e,r,s){super(s);$(this,"position");$(this,"nodes");$(this,"shouldReceiveAttributes");this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new ua(Vp(r)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new ua([...this.nodes].map(s=>s._clone(!0))),r=new sn(this.position,e,this.baseVersion);return r.shouldReceiveAttributes=this.shouldReceiveAttributes,r}getReversed(){const e=this.position.root.document.graveyard,r=new xe(e,[0]);return new gt(this.position,this.nodes.maxOffset,r,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new ye("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new ua([...e].map(r=>r._clone(!0))),bc(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,r){const s=[];for(const a of e.nodes)a.name?s.push(_r.fromJSON(a)):s.push(Mt.fromJSON(a));const i=new sn(xe.fromJSON(e.position,r),s,e.baseVersion);return i.shouldReceiveAttributes=e.shouldReceiveAttributes,i}}class At extends Ln{constructor(e,r,s,i,a){super(a);$(this,"splitPosition");$(this,"howMany");$(this,"insertionPosition");$(this,"graveyardPosition");this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=r,this.insertionPosition=s,this.graveyardPosition=i?i.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new xe(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Pe(this.splitPosition,e)}get affectedSelectable(){const e=[Pe._createFromPositionAndShift(this.splitPosition,0),Pe._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(Pe._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new At(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,r=new xe(e,[0]);return new yn(this.moveTargetPosition,this.howMany,this.splitPosition,r,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,r=this.splitPosition.offset;if(!e||e.maxOffset<r)throw new ye("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new ye("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new ye("split-operation-graveyard-position-invalid",this)}else throw new ye("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)ka(Pe._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const s=e._clone();bc(this.insertionPosition,s)}const r=new Pe(xe._createAt(e,this.splitPosition.offset),xe._createAt(e,e.maxOffset));ka(r,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const r=e.path.slice(0,-1);return r[r.length-1]++,new xe(e.root,r,"toPrevious")}static fromJSON(e,r){const s=xe.fromJSON(e.splitPosition,r),i=xe.fromJSON(e.insertionPosition,r),a=e.graveyardPosition?xe.fromJSON(e.graveyardPosition,r):null;return new this(s,e.howMany,i,a,e.baseVersion)}}class yn extends Ln{constructor(e,r,s,i,a){super(a);$(this,"sourcePosition");$(this,"howMany");$(this,"targetPosition");$(this,"graveyardPosition");this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=r,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=i.clone()}get type(){return"merge"}get deletionPosition(){return new xe(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Pe(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[Pe._createOn(e),Pe._createFromPositionAndShift(this.targetPosition,0),Pe._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new yn(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),r=this.sourcePosition.path.slice(0,-1),s=new xe(this.sourcePosition.root,r)._getTransformedByMergeOperation(this);return new At(e,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,r=this.targetPosition.parent;if(e.parent)if(r.parent){if(this.howMany!=e.maxOffset)throw new ye("merge-operation-how-many-invalid",this)}else throw new ye("merge-operation-target-position-invalid",this);else throw new ye("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,r=Pe._createIn(e);ka(r,this.targetPosition),ka(Pe._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,r){const s=xe.fromJSON(e.sourcePosition,r),i=xe.fromJSON(e.targetPosition,r),a=xe.fromJSON(e.graveyardPosition,r);return new this(s,e.howMany,i,a,e.baseVersion)}}class $n extends Ln{constructor(e,r,s,i,a,l){super(l);$(this,"name");$(this,"oldRange");$(this,"newRange");$(this,"affectsData");$(this,"_markers");this.name=e,this.oldRange=r?r.clone():null,this.newRange=s?s.clone():null,this.affectsData=a,this._markers=i}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new $n(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new $n(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,r){return new $n(e.name,e.oldRange?Pe.fromJSON(e.oldRange,r):null,e.newRange?Pe.fromJSON(e.newRange,r):null,r.model.markers,e.affectsData,e.baseVersion)}}class zt extends Ln{constructor(e,r,s,i,a){super(a);$(this,"range");$(this,"key");$(this,"oldValue");$(this,"newValue");this.range=e.clone(),this.key=r,this.oldValue=s===void 0?null:s,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new zt(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new zt(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new ye("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!qd(e.getAttribute(this.key),this.oldValue))throw new ye("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new ye("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){qd(this.oldValue,this.newValue)||dP(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,r){return new zt(Pe.fromJSON(e.range,r),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Jt extends Ln{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Jt(this.baseVersion)}getReversed(){return new Jt(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class xn extends Ln{constructor(e,r,s,i){super(i);$(this,"position");$(this,"oldName");$(this,"newName");this.position=e,this.position.stickiness="toNext",this.oldName=r,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new xn(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new xn(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof _r){if(e.name!==this.oldName)throw new ye("rename-operation-wrong-name",this)}else throw new ye("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,r){return new xn(xe.fromJSON(e.position,r),e.oldName,e.newName,e.baseVersion)}}class Ur extends Ln{constructor(e,r,s,i,a){super(a);$(this,"root");$(this,"key");$(this,"oldValue");$(this,"newValue");this.root=e,this.key=r,this.oldValue=s===void 0?null:s,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Ur(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ur(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new ye("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new ye("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new ye("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,r){if(!r.getRoot(e.root))throw new ye("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new Ur(r.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class qr extends Ln{constructor(e,r,s,i,a){super(a);$(this,"rootName");$(this,"elementName");$(this,"isAdd");$(this,"_document");if(this.rootName=e,this.elementName=r,this.isAdd=s,this._document=i,!this._document.getRoot(this.rootName)){const l=this._document.createRoot(this.elementName,this.rootName);l._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new qr(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new qr(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,r){return new qr(e.rootName,e.elementName,e.isAdd,r,e.baseVersion)}}const Gn={};Gn[zt.className]=zt;Gn[sn.className]=sn;Gn[$n.className]=$n;Gn[gt.className]=gt;Gn[Jt.className]=Jt;Gn[Ln.className]=Ln;Gn[xn.className]=xn;Gn[Ur.className]=Ur;Gn[qr.className]=qr;Gn[At.className]=At;Gn[yn.className]=yn;const nf=new Map;function st(n,t,e){let r=nf.get(n);r||(r=new Map,nf.set(n,r)),r.set(t,e)}st(zt,zt,(n,t,e)=>{if(n.key===t.key&&n.range.start.hasSameParentAs(t.range.start)){const r=n.range.getDifference(t.range).map(i=>new zt(i,n.key,n.oldValue,n.newValue,0)),s=n.range.getIntersection(t.range);return s&&e.aIsStrong&&r.push(new zt(s,t.key,t.newValue,n.newValue,0)),r.length==0?[new Jt(0)]:r}else return[n]});st(zt,sn,(n,t)=>{if(n.range.start.hasSameParentAs(t.position)&&n.range.containsPosition(t.position)){const r=n.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(s=>new zt(s,n.key,n.oldValue,n.newValue,n.baseVersion));if(t.shouldReceiveAttributes){const s=$p(t,n.key,n.oldValue);s&&r.unshift(s)}return r}return n.range=n.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[n]});function $p(n,t,e){const s=n.nodes.getNode(0).getAttribute(t);if(s==e)return null;const i=new Pe(n.position,n.position.getShiftedBy(n.howMany));return new zt(i,t,s,e,0)}st(zt,yn,(n,t)=>{const e=[];n.range.start.hasSameParentAs(t.deletionPosition)&&(n.range.containsPosition(t.deletionPosition)||n.range.start.isEqual(t.deletionPosition))&&e.push(Pe._createFromPositionAndShift(t.graveyardPosition,1));const r=n.range._getTransformedByMergeOperation(t);return r.isCollapsed||e.push(r),e.map(s=>new zt(s,n.key,n.oldValue,n.newValue,n.baseVersion))});st(zt,gt,(n,t)=>fP(n.range,t).map(r=>new zt(r,n.key,n.oldValue,n.newValue,n.baseVersion)));function fP(n,t){const e=Pe._createFromPositionAndShift(t.sourcePosition,t.howMany);let r=null,s=[];e.containsRange(n,!0)?r=n:n.start.hasSameParentAs(e.start)?(s=n.getDifference(e),r=n.getIntersection(e)):s=[n];const i=[];for(let a of s){a=a._getTransformedByDeletion(t.sourcePosition,t.howMany);const l=t.getMovedRangeStart(),u=a.start.hasSameParentAs(l),c=a._getTransformedByInsertion(l,t.howMany,u);i.push(...c)}return r&&i.push(r._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),i}st(zt,At,(n,t)=>{if(n.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(t.splitPosition)&&n.range.containsPosition(t.splitPosition)){const e=n.clone();return e.range=new Pe(t.moveTargetPosition.clone(),n.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),n.range.end=t.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,e]}return n.range=n.range._getTransformedBySplitOperation(t),[n]});st(sn,zt,(n,t)=>{const e=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(n.position)){const r=$p(n,t.key,t.newValue);r&&e.push(r)}return e});st(sn,sn,(n,t,e)=>n.position.isEqual(t.position)&&e.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(t),[n]));st(sn,gt,(n,t)=>(n.position=n.position._getTransformedByMoveOperation(t),[n]));st(sn,At,(n,t)=>(n.position=n.position._getTransformedBySplitOperation(t),[n]));st(sn,yn,(n,t)=>(n.position=n.position._getTransformedByMergeOperation(t),[n]));st($n,sn,(n,t)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(t)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(t)[0]),[n]));st($n,$n,(n,t,e)=>{if(n.name==t.name)if(e.aIsStrong)n.oldRange=t.newRange?t.newRange.clone():null;else return[new Jt(0)];return[n]});st($n,yn,(n,t)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(t)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(t)),[n]));st($n,gt,(n,t)=>{const e=[n];if(n.oldRange&&(n.oldRange=Pe._createFromRanges(n.oldRange._getTransformedByMoveOperation(t))),n.newRange){const r=n.newRange._getTransformedByMoveOperation(t);n.newRange=r[0];for(let s=1;s<r.length;s++){const i=n.clone();i.oldRange=null,i.newRange=r[s],i.baseVersion=-1,e.push(i)}}return e});st($n,At,(n,t,e)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(t)),n.newRange){if(e.abRelation){const r=n.newRange._getTransformedBySplitOperation(t);return n.newRange.start.isEqual(t.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?n.newRange.start=xe._createAt(t.insertionPosition):n.newRange.start.isEqual(t.splitPosition)&&!e.abRelation.wasInLeftElement?n.newRange.start=xe._createAt(t.moveTargetPosition):n.newRange.start=r.start,n.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasInRightElement?n.newRange.end=xe._createAt(t.moveTargetPosition):n.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?n.newRange.end=xe._createAt(t.insertionPosition):n.newRange.end=r.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(t)}return[n]});st(yn,sn,(n,t)=>(n.sourcePosition.hasSameParentAs(t.position)&&(n.howMany+=t.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(t),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(t),[n]));st(yn,yn,(n,t,e)=>{if(n.sourcePosition.isEqual(t.sourcePosition)&&n.targetPosition.isEqual(t.targetPosition))if(e.bWasUndone){const r=t.graveyardPosition.path.slice();return r.push(0),n.sourcePosition=new xe(t.graveyardPosition.root,r),n.howMany=0,[n]}else return[new Jt(0)];if(n.sourcePosition.isEqual(t.sourcePosition)&&!n.targetPosition.isEqual(t.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const r=n.targetPosition.root.rootName=="$graveyard",s=t.targetPosition.root.rootName=="$graveyard";if(s&&!r||!(r&&!s)&&e.aIsStrong){const u=t.targetPosition._getTransformedByMergeOperation(t),c=n.targetPosition._getTransformedByMergeOperation(t);return[new gt(u,n.howMany,c,0)]}else return[new Jt(0)]}return n.sourcePosition.hasSameParentAs(t.targetPosition)&&(n.howMany+=t.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(t),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(t),(!n.graveyardPosition.isEqual(t.graveyardPosition)||!e.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(t)),[n]});st(yn,gt,(n,t,e)=>{const r=Pe._createFromPositionAndShift(t.sourcePosition,t.howMany);return t.type=="remove"&&!e.bWasUndone&&n.deletionPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(n.sourcePosition)?[new Jt(0)]:(t.sourcePosition.getShiftedBy(t.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":t.targetPosition.isEqual(n.sourcePosition)&&e.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":t.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=t.howMany):t.targetPosition.isEqual(n.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=t.howMany):(n.sourcePosition.hasSameParentAs(t.targetPosition)&&(n.howMany+=t.howMany),n.sourcePosition.hasSameParentAs(t.sourcePosition)&&(n.howMany-=t.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(t),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(t),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(t.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(t)),[n])});st(yn,At,(n,t,e)=>{if(t.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),n.deletionPosition.isEqual(t.graveyardPosition)&&(n.howMany=t.howMany)),n.targetPosition.isEqual(t.splitPosition)&&(t.graveyardPosition&&n.deletionPosition.isEqual(t.graveyardPosition)||e.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(t),[n];if(n.sourcePosition.isEqual(t.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(t),[n];if(e.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=t.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(t),[n]}return n.sourcePosition.hasSameParentAs(t.splitPosition)&&(n.howMany=t.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(t),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(t),[n]});st(gt,sn,(n,t)=>{const r=Pe._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(t,!1)[0];return n.sourcePosition=r.start,n.howMany=r.end.offset-r.start.offset,n.targetPosition.isEqual(t.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(t)),[n]});st(gt,gt,(n,t,e)=>{const r=Pe._createFromPositionAndShift(n.sourcePosition,n.howMany),s=Pe._createFromPositionAndShift(t.sourcePosition,t.howMany);let i=e.aIsStrong,a=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?a=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(a=!1);let l;if(n.targetPosition.isEqual(t.targetPosition)&&a?l=n.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):l=n.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),rf(n,t)&&rf(t,n))return[t.getReversed()];if(r.containsPosition(t.targetPosition)&&r.containsRange(s,!0))return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),ri([r],l);if(s.containsPosition(n.targetPosition)&&s.containsRange(r,!0))return r.start=r.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),r.end=r.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),ri([r],l);const d=bn(n.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(d=="prefix"||d=="extension")return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),ri([r],l);n.type=="remove"&&t.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?i=!0:n.type!="remove"&&t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(i=!1);const f=[],g=r.getDifference(s);for(const v of g){v.start=v.start._getTransformedByDeletion(t.sourcePosition,t.howMany),v.end=v.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const A=bn(v.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same",S=v._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,A);f.push(...S)}const b=r.getIntersection(s);return b!==null&&i&&(b.start=b.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),b.end=b.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),f.length===0?f.push(b):f.length==1?s.start.isBefore(r.start)||s.start.isEqual(r.start)?f.unshift(b):f.push(b):f.splice(1,0,b)),f.length===0?[new Jt(n.baseVersion)]:ri(f,l)});st(gt,At,(n,t,e)=>{let r=n.targetPosition.clone();(!n.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||e.abRelation=="moveTargetAfter")&&(r=n.targetPosition._getTransformedBySplitOperation(t));const s=Pe._createFromPositionAndShift(n.sourcePosition,n.howMany);if(s.end.isEqual(t.insertionPosition))return t.graveyardPosition||n.howMany++,n.targetPosition=r,[n];if(s.start.hasSameParentAs(t.splitPosition)&&s.containsPosition(t.splitPosition)){let l=new Pe(t.splitPosition,s.end);l=l._getTransformedBySplitOperation(t);const u=[new Pe(s.start,t.splitPosition),l];return ri(u,r)}n.targetPosition.isEqual(t.splitPosition)&&e.abRelation=="insertAtSource"&&(r=t.moveTargetPosition),n.targetPosition.isEqual(t.insertionPosition)&&e.abRelation=="insertBetween"&&(r=n.targetPosition);const a=[s._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const l=s.start.isEqual(t.graveyardPosition)||s.containsPosition(t.graveyardPosition);n.howMany>1&&l&&!e.aWasUndone&&a.push(Pe._createFromPositionAndShift(t.insertionPosition,1))}return ri(a,r)});st(gt,yn,(n,t,e)=>{const r=Pe._createFromPositionAndShift(n.sourcePosition,n.howMany);if(t.deletionPosition.hasSameParentAs(n.sourcePosition)&&r.containsPosition(t.sourcePosition)){if(n.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const a=[];let l=t.graveyardPosition.clone(),u=t.targetPosition._getTransformedByMergeOperation(t);const c=n.targetPosition.getTransformedByOperation(t);n.howMany>1&&(a.push(new gt(n.sourcePosition,n.howMany-1,c,0)),l=l._getTransformedByMove(n.sourcePosition,c,n.howMany-1),u=u._getTransformedByMove(n.sourcePosition,c,n.howMany-1));const d=t.deletionPosition._getCombined(n.sourcePosition,c),f=new gt(l,1,d,0),g=f.getMovedRangeStart().path.slice();g.push(0);const b=new xe(f.targetPosition.root,g);u=u._getTransformedByMove(l,d,1);const v=new gt(u,t.howMany,b,0);return a.push(f),a.push(v),a}}else if(n.howMany==1)return e.bWasUndone?(n.sourcePosition=t.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(t),[n]):[new Jt(0)]}const i=Pe._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(t);return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(t),[n]});st(xn,sn,(n,t)=>(n.position=n.position._getTransformedByInsertOperation(t),[n]));st(xn,yn,(n,t)=>n.position.isEqual(t.deletionPosition)?(n.position=t.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(t),[n]));st(xn,gt,(n,t)=>(n.position=n.position._getTransformedByMoveOperation(t),[n]));st(xn,xn,(n,t,e)=>{if(n.position.isEqual(t.position))if(e.aIsStrong)n.oldName=t.newName;else return[new Jt(0)];return[n]});st(xn,At,(n,t)=>{const e=n.position.path,r=t.splitPosition.getParentPath();if(bn(e,r)=="same"&&!t.graveyardPosition){const s=new xn(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,s]}return n.position=n.position._getTransformedBySplitOperation(t),[n]});st(Ur,Ur,(n,t,e)=>{if(n.root===t.root&&n.key===t.key){if(!e.aIsStrong||n.newValue===t.newValue)return[new Jt(0)];n.oldValue=t.newValue}return[n]});st(qr,qr,(n,t)=>n.rootName===t.rootName&&n.isAdd===t.isAdd?[new Jt(0)]:[n]);st(At,sn,(n,t)=>(n.splitPosition.hasSameParentAs(t.position)&&n.splitPosition.offset<t.position.offset&&(n.howMany+=t.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(t),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(t),[n]));st(At,yn,(n,t,e)=>{if(!n.graveyardPosition&&!e.bWasUndone&&n.splitPosition.hasSameParentAs(t.sourcePosition)){const r=t.graveyardPosition.path.slice();r.push(0);const s=new xe(t.graveyardPosition.root,r),i=At.getInsertionPosition(new xe(t.graveyardPosition.root,r)),a=new At(s,0,i,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(t),n.insertionPosition=At.getInsertionPosition(n.splitPosition),n.graveyardPosition=a.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[a,n]}return n.splitPosition.hasSameParentAs(t.deletionPosition)&&!n.splitPosition.isAfter(t.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(t.targetPosition)&&(n.howMany+=t.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(t),n.insertionPosition=At.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(t)),[n]});st(At,gt,(n,t,e)=>{const r=Pe._createFromPositionAndShift(t.sourcePosition,t.howMany);if(n.graveyardPosition){const i=r.start.isEqual(n.graveyardPosition)||r.containsPosition(n.graveyardPosition);if(!e.bWasUndone&&i){const a=n.splitPosition._getTransformedByMoveOperation(t),l=n.graveyardPosition._getTransformedByMoveOperation(t),u=l.path.slice();u.push(0);const c=new xe(l.root,u);return[new gt(a,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(t)}const s=n.splitPosition.isEqual(t.targetPosition);if(s&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return n.howMany+=t.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),n.insertionPosition=At.getInsertionPosition(n.splitPosition),[n];if(s&&e.abRelation&&e.abRelation.howMany){const{howMany:i,offset:a}=e.abRelation;return n.howMany+=i,n.splitPosition=n.splitPosition.getShiftedBy(a),[n]}if(n.splitPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(n.splitPosition)){const i=t.howMany-(n.splitPosition.offset-t.sourcePosition.offset);return n.howMany-=i,n.splitPosition.hasSameParentAs(t.targetPosition)&&n.splitPosition.offset<t.targetPosition.offset&&(n.howMany+=t.howMany),n.splitPosition=t.sourcePosition.clone(),n.insertionPosition=At.getInsertionPosition(n.splitPosition),[n]}return t.sourcePosition.isEqual(t.targetPosition)||(n.splitPosition.hasSameParentAs(t.sourcePosition)&&n.splitPosition.offset<=t.sourcePosition.offset&&(n.howMany-=t.howMany),n.splitPosition.hasSameParentAs(t.targetPosition)&&n.splitPosition.offset<t.targetPosition.offset&&(n.howMany+=t.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(t),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(t):n.insertionPosition=At.getInsertionPosition(n.splitPosition),[n]});st(At,At,(n,t,e)=>{if(n.splitPosition.isEqual(t.splitPosition)){if(!n.graveyardPosition&&!t.graveyardPosition)return[new Jt(0)];if(n.graveyardPosition&&t.graveyardPosition&&n.graveyardPosition.isEqual(t.graveyardPosition))return[new Jt(0)];if(e.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(t),[n]}if(n.graveyardPosition&&t.graveyardPosition&&n.graveyardPosition.isEqual(t.graveyardPosition)){const r=n.splitPosition.root.rootName=="$graveyard",s=t.splitPosition.root.rootName=="$graveyard";if(s&&!r||!(r&&!s)&&e.aIsStrong){const u=[];return t.howMany&&u.push(new gt(t.moveTargetPosition,t.howMany,t.splitPosition,0)),n.howMany&&u.push(new gt(n.splitPosition,n.howMany,n.moveTargetPosition,0)),u}else return[new Jt(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(t)),n.splitPosition.isEqual(t.insertionPosition)&&e.abRelation=="splitBefore")return n.howMany++,[n];if(t.splitPosition.isEqual(n.insertionPosition)&&e.baRelation=="splitBefore"){const r=t.insertionPosition.path.slice();r.push(0);const s=new xe(t.insertionPosition.root,r),i=new gt(n.insertionPosition,1,s,0);return[n,i]}return n.splitPosition.hasSameParentAs(t.splitPosition)&&n.splitPosition.offset<t.splitPosition.offset&&(n.howMany-=t.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(t),n.insertionPosition=At.getInsertionPosition(n.splitPosition),[n]});function rf(n,t){return n.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null}function ri(n,t){const e=[];for(let r=0;r<n.length;r++){const s=n[r],i=new gt(s.start,s.end.offset-s.start.offset,t,0);e.push(i);for(let a=r+1;a<n.length;a++)n[a]=n[a]._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)[0];t=t._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)}return e}class mP extends Qt(xe){constructor(t,e,r="toNone"){if(super(t,e,r),!this.root.is("rootElement"))throw new ye("model-liveposition-root-not-rootelement",t);pP.call(this)}detach(){this.stopListening()}toPosition(){return new xe(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}mP.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function pP(){this.listenTo(this.root.document.model,"applyOperation",(n,t)=>{const e=t[0];e.isDocumentOperation&&gP.call(this,e)},{priority:"low"})}function gP(n){const t=this.getTransformedByOperation(n);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}class vP extends _r{constructor(e,r,s="main"){super(r);$(this,"rootName");$(this,"_document");$(this,"_isAttached",!0);$(this,"_isLoaded",!0);this._document=e,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}vP.prototype.is=function(n,t){return t?t===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};class yP extends Qt(os){constructor(e,r,s,i){super();$(this,"name");$(this,"_managedUsingOperations");$(this,"_affectsData");$(this,"_liveRange");this.name=e,this._liveRange=this._attachLiveRange(r),this._managedUsingOperations=s,this._affectsData=i}get managedUsingOperations(){if(!this._liveRange)throw new ye("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new ye("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new ye("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new ye("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new ye("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}yP.prototype.is=function(n){return n==="marker"||n==="model:marker"};class Tc extends os{constructor(e){super();$(this,"markers",new Map);$(this,"_children",new ua);e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let r=this;for(const s of e)r=r.getChildAtOffset(s);return r}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const r of this._children)e.push(r.toJSON());return e}static fromJSON(e){const r=[];for(const s of e)s.name?r.push(_r.fromJSON(s)):r.push(Mt.fromJSON(s));return new Tc(r)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,r){const s=_P(r);for(const i of s)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(e,s)}_removeChildren(e,r=1){const s=this._children._removeNodes(e,r);for(const i of s)i.parent=null;return s}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const r of e)r.parent=null}}Tc.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function _P(n){return typeof n=="string"?[new Mt(n)]:(Rr(n)||(n=[n]),Array.from(n).map(t=>typeof t=="string"?new Mt(t):t instanceof Es?new Mt(t.data,t.getAttributes()):t))}var wP={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Ia=wP,Fp={};for(const n of Object.keys(Ia))Fp[Ia[n]]=n;const Me={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Lp=Me;for(const n of Object.keys(Me)){if(!("channels"in Me[n]))throw new Error("missing channels property: "+n);if(!("labels"in Me[n]))throw new Error("missing channel labels property: "+n);if(Me[n].labels.length!==Me[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:t,labels:e}=Me[n];delete Me[n].channels,delete Me[n].labels,Object.defineProperty(Me[n],"channels",{value:t}),Object.defineProperty(Me[n],"labels",{value:e})}Me.rgb.hsl=function(n){const t=n[0]/255,e=n[1]/255,r=n[2]/255,s=Math.min(t,e,r),i=Math.max(t,e,r),a=i-s;let l,u;i===s?l=0:t===i?l=(e-r)/a:e===i?l=2+(r-t)/a:r===i&&(l=4+(t-e)/a),l=Math.min(l*60,360),l<0&&(l+=360);const c=(s+i)/2;return i===s?u=0:c<=.5?u=a/(i+s):u=a/(2-i-s),[l,u*100,c*100]};Me.rgb.hsv=function(n){let t,e,r,s,i;const a=n[0]/255,l=n[1]/255,u=n[2]/255,c=Math.max(a,l,u),d=c-Math.min(a,l,u),f=function(g){return(c-g)/6/d+1/2};return d===0?(s=0,i=0):(i=d/c,t=f(a),e=f(l),r=f(u),a===c?s=r-e:l===c?s=1/3+t-r:u===c&&(s=2/3+e-t),s<0?s+=1:s>1&&(s-=1)),[s*360,i*100,c*100]};Me.rgb.hwb=function(n){const t=n[0],e=n[1];let r=n[2];const s=Me.rgb.hsl(n)[0],i=1/255*Math.min(t,Math.min(e,r));return r=1-1/255*Math.max(t,Math.max(e,r)),[s,i*100,r*100]};Me.rgb.cmyk=function(n){const t=n[0]/255,e=n[1]/255,r=n[2]/255,s=Math.min(1-t,1-e,1-r),i=(1-t-s)/(1-s)||0,a=(1-e-s)/(1-s)||0,l=(1-r-s)/(1-s)||0;return[i*100,a*100,l*100,s*100]};function bP(n,t){return(n[0]-t[0])**2+(n[1]-t[1])**2+(n[2]-t[2])**2}Me.rgb.keyword=function(n){const t=Fp[n];if(t)return t;let e=1/0,r;for(const s of Object.keys(Ia)){const i=Ia[s],a=bP(n,i);a<e&&(e=a,r=s)}return r};Me.keyword.rgb=function(n){return Ia[n]};Me.rgb.xyz=function(n){let t=n[0]/255,e=n[1]/255,r=n[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const s=t*.4124+e*.3576+r*.1805,i=t*.2126+e*.7152+r*.0722,a=t*.0193+e*.1192+r*.9505;return[s*100,i*100,a*100]};Me.rgb.lab=function(n){const t=Me.rgb.xyz(n);let e=t[0],r=t[1],s=t[2];e/=95.047,r/=100,s/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const i=116*r-16,a=500*(e-r),l=200*(r-s);return[i,a,l]};Me.hsl.rgb=function(n){const t=n[0]/360,e=n[1]/100,r=n[2]/100;let s,i,a;if(e===0)return a=r*255,[a,a,a];r<.5?s=r*(1+e):s=r+e-r*e;const l=2*r-s,u=[0,0,0];for(let c=0;c<3;c++)i=t+1/3*-(c-1),i<0&&i++,i>1&&i--,6*i<1?a=l+(s-l)*6*i:2*i<1?a=s:3*i<2?a=l+(s-l)*(2/3-i)*6:a=l,u[c]=a*255;return u};Me.hsl.hsv=function(n){const t=n[0];let e=n[1]/100,r=n[2]/100,s=e;const i=Math.max(r,.01);r*=2,e*=r<=1?r:2-r,s*=i<=1?i:2-i;const a=(r+e)/2,l=r===0?2*s/(i+s):2*e/(r+e);return[t,l*100,a*100]};Me.hsv.rgb=function(n){const t=n[0]/60,e=n[1]/100;let r=n[2]/100;const s=Math.floor(t)%6,i=t-Math.floor(t),a=255*r*(1-e),l=255*r*(1-e*i),u=255*r*(1-e*(1-i));switch(r*=255,s){case 0:return[r,u,a];case 1:return[l,r,a];case 2:return[a,r,u];case 3:return[a,l,r];case 4:return[u,a,r];case 5:return[r,a,l]}};Me.hsv.hsl=function(n){const t=n[0],e=n[1]/100,r=n[2]/100,s=Math.max(r,.01);let i,a;a=(2-e)*r;const l=(2-e)*s;return i=e*s,i/=l<=1?l:2-l,i=i||0,a/=2,[t,i*100,a*100]};Me.hwb.rgb=function(n){const t=n[0]/360;let e=n[1]/100,r=n[2]/100;const s=e+r;let i;s>1&&(e/=s,r/=s);const a=Math.floor(6*t),l=1-r;i=6*t-a,a&1&&(i=1-i);const u=e+i*(l-e);let c,d,f;switch(a){default:case 6:case 0:c=l,d=u,f=e;break;case 1:c=u,d=l,f=e;break;case 2:c=e,d=l,f=u;break;case 3:c=e,d=u,f=l;break;case 4:c=u,d=e,f=l;break;case 5:c=l,d=e,f=u;break}return[c*255,d*255,f*255]};Me.cmyk.rgb=function(n){const t=n[0]/100,e=n[1]/100,r=n[2]/100,s=n[3]/100,i=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,e*(1-s)+s),l=1-Math.min(1,r*(1-s)+s);return[i*255,a*255,l*255]};Me.xyz.rgb=function(n){const t=n[0]/100,e=n[1]/100,r=n[2]/100;let s,i,a;return s=t*3.2406+e*-1.5372+r*-.4986,i=t*-.9689+e*1.8758+r*.0415,a=t*.0557+e*-.204+r*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[s*255,i*255,a*255]};Me.xyz.lab=function(n){let t=n[0],e=n[1],r=n[2];t/=95.047,e/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const s=116*e-16,i=500*(t-e),a=200*(e-r);return[s,i,a]};Me.lab.xyz=function(n){const t=n[0],e=n[1],r=n[2];let s,i,a;i=(t+16)/116,s=e/500+i,a=i-r/200;const l=i**3,u=s**3,c=a**3;return i=l>.008856?l:(i-16/116)/7.787,s=u>.008856?u:(s-16/116)/7.787,a=c>.008856?c:(a-16/116)/7.787,s*=95.047,i*=100,a*=108.883,[s,i,a]};Me.lab.lch=function(n){const t=n[0],e=n[1],r=n[2];let s;s=Math.atan2(r,e)*360/2/Math.PI,s<0&&(s+=360);const a=Math.sqrt(e*e+r*r);return[t,a,s]};Me.lch.lab=function(n){const t=n[0],e=n[1],s=n[2]/360*2*Math.PI,i=e*Math.cos(s),a=e*Math.sin(s);return[t,i,a]};Me.rgb.ansi16=function(n,t=null){const[e,r,s]=n;let i=t===null?Me.rgb.hsv(n)[2]:t;if(i=Math.round(i/50),i===0)return 30;let a=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return i===2&&(a+=60),a};Me.hsv.ansi16=function(n){return Me.rgb.ansi16(Me.hsv.rgb(n),n[2])};Me.rgb.ansi256=function(n){const t=n[0],e=n[1],r=n[2];return t===e&&e===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(r/255*5)};Me.ansi16.rgb=function(n){let t=n%10;if(t===0||t===7)return n>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const e=(~~(n>50)+1)*.5,r=(t&1)*e*255,s=(t>>1&1)*e*255,i=(t>>2&1)*e*255;return[r,s,i]};Me.ansi256.rgb=function(n){if(n>=232){const i=(n-232)*10+8;return[i,i,i]}n-=16;let t;const e=Math.floor(n/36)/5*255,r=Math.floor((t=n%36)/6)/5*255,s=t%6/5*255;return[e,r,s]};Me.rgb.hex=function(n){const e=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(e.length)+e};Me.hex.rgb=function(n){const t=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let e=t[0];t[0].length===3&&(e=e.split("").map(l=>l+l).join(""));const r=parseInt(e,16),s=r>>16&255,i=r>>8&255,a=r&255;return[s,i,a]};Me.rgb.hcg=function(n){const t=n[0]/255,e=n[1]/255,r=n[2]/255,s=Math.max(Math.max(t,e),r),i=Math.min(Math.min(t,e),r),a=s-i;let l,u;return a<1?l=i/(1-a):l=0,a<=0?u=0:s===t?u=(e-r)/a%6:s===e?u=2+(r-t)/a:u=4+(t-e)/a,u/=6,u%=1,[u*360,a*100,l*100]};Me.hsl.hcg=function(n){const t=n[1]/100,e=n[2]/100,r=e<.5?2*t*e:2*t*(1-e);let s=0;return r<1&&(s=(e-.5*r)/(1-r)),[n[0],r*100,s*100]};Me.hsv.hcg=function(n){const t=n[1]/100,e=n[2]/100,r=t*e;let s=0;return r<1&&(s=(e-r)/(1-r)),[n[0],r*100,s*100]};Me.hcg.rgb=function(n){const t=n[0]/360,e=n[1]/100,r=n[2]/100;if(e===0)return[r*255,r*255,r*255];const s=[0,0,0],i=t%1*6,a=i%1,l=1-a;let u=0;switch(Math.floor(i)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=l,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=l,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=l}return u=(1-e)*r,[(e*s[0]+u)*255,(e*s[1]+u)*255,(e*s[2]+u)*255]};Me.hcg.hsv=function(n){const t=n[1]/100,e=n[2]/100,r=t+e*(1-t);let s=0;return r>0&&(s=t/r),[n[0],s*100,r*100]};Me.hcg.hsl=function(n){const t=n[1]/100,r=n[2]/100*(1-t)+.5*t;let s=0;return r>0&&r<.5?s=t/(2*r):r>=.5&&r<1&&(s=t/(2*(1-r))),[n[0],s*100,r*100]};Me.hcg.hwb=function(n){const t=n[1]/100,e=n[2]/100,r=t+e*(1-t);return[n[0],(r-t)*100,(1-r)*100]};Me.hwb.hcg=function(n){const t=n[1]/100,r=1-n[2]/100,s=r-t;let i=0;return s<1&&(i=(r-s)/(1-s)),[n[0],s*100,i*100]};Me.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};Me.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};Me.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};Me.gray.hsl=function(n){return[0,0,n[0]]};Me.gray.hsv=Me.gray.hsl;Me.gray.hwb=function(n){return[0,100,n[0]]};Me.gray.cmyk=function(n){return[0,0,0,n[0]]};Me.gray.lab=function(n){return[n[0],0,0]};Me.gray.hex=function(n){const t=Math.round(n[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r};Me.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};const $o=Lp;function TP(){const n={},t=Object.keys($o);for(let e=t.length,r=0;r<e;r++)n[t[r]]={distance:-1,parent:null};return n}function PP(n){const t=TP(),e=[n];for(t[n].distance=0;e.length;){const r=e.pop(),s=Object.keys($o[r]);for(let i=s.length,a=0;a<i;a++){const l=s[a],u=t[l];u.distance===-1&&(u.distance=t[r].distance+1,u.parent=r,e.unshift(l))}}return t}function EP(n,t){return function(e){return t(n(e))}}function AP(n,t){const e=[t[n].parent,n];let r=$o[t[n].parent][n],s=t[n].parent;for(;t[s].parent;)e.unshift(t[s].parent),r=EP($o[t[s].parent][s],r),s=t[s].parent;return r.conversion=e,r}var kP=function(n){const t=PP(n),e={},r=Object.keys(t);for(let s=r.length,i=0;i<s;i++){const a=r[i];t[a].parent!==null&&(e[a]=AP(a,t))}return e};const Ou=Lp,SP=kP,Qi={},RP=Object.keys(Ou);function IP(n){const t=function(...e){const r=e[0];return r==null?r:(r.length>1&&(e=r),n(e))};return"conversion"in n&&(t.conversion=n.conversion),t}function CP(n){const t=function(...e){const r=e[0];if(r==null)return r;r.length>1&&(e=r);const s=n(e);if(typeof s=="object")for(let i=s.length,a=0;a<i;a++)s[a]=Math.round(s[a]);return s};return"conversion"in n&&(t.conversion=n.conversion),t}RP.forEach(n=>{Qi[n]={},Object.defineProperty(Qi[n],"channels",{value:Ou[n].channels}),Object.defineProperty(Qi[n],"labels",{value:Ou[n].labels});const t=SP(n);Object.keys(t).forEach(r=>{const s=t[r];Qi[n][r]=CP(s),Qi[n][r].raw=IP(s)})});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var xP='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';new DOMParser().parseFromString(xP,"image/svg+xml").firstChild;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const MP=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:t,listType:e}of MP);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */oa.arrowup,oa.arrowdown,oa.esc;oa.enter,oa.tab;const DP=["for"],OP={key:0},VP=vt({__name:"FormLabel",props:{label:{},labelClass:{},forText:{},required:{type:Boolean}},setup(n){return(t,e)=>(W(),re("label",{class:Fe([t.labelClass,"text-sm leading-normal text-gray-1"]),for:t.forText},[Fn($t(t.label)+" ",1),t.required?(W(),re("span",OP,"*")):de("",!0)],10,DP))}}),NP={class:"flex flex-col w-full mt-4"},En=vt({__name:"FormGroup",props:{label:{default:""},required:{type:Boolean},forText:{},labelClass:{},labelWrapperClass:{}},setup(n){return(t,e)=>(W(),re("div",NP,[Se("div",{class:Fe([t.labelWrapperClass,"flex-center-between w-full"])},[$e(VP,kt({label:t.$t(t.label),"label-class":t.labelClass},{forText:t.forText,required:t.required},{class:"text-primary mb-1"}),null,16,["label","label-class"]),Ee(t.$slots,"labelOpposite")],2),Ee(t.$slots,"default")]))}}),$P=["for"],FP=vt({__name:"FormInput",props:od({id:{},type:{},placeholder:{},disabled:{type:Boolean},error:{type:Boolean},readonly:{type:Boolean},maxlength:{},minlength:{},max:{},min:{},inputClass:{},autocomplete:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:od(["blur","focus","change"],["update:modelValue"]),setup(n,{expose:t}){const e=Gy(n,"modelValue"),r=he();return t({inputEl:r}),(s,i)=>(W(),re("label",{class:Fe([[s.error?"!bg-red-secondary !border-red":"focus-within:bg-white focus-within:border-blue-dark",{"read-only:focus-within:bg-gray-300 read-only:focus-within:border-transparent hover:bg-white-1":s.readonly}],"inline-flex items-center justify-start gap-2 h-10 relative transition-all duration-300 bg-white-1 rounded-lg border border-transparent overflow-hidden w-full group cursor-text py-2.5 px-3"]),for:s.id,onClick:i[4]||(i[4]=a=>r.value.focus())},[Ee(s.$slots,"prefix",{},void 0,!0),Br(Se("input",kt({ref_key:"inputEl",ref:r,"onUpdate:modelValue":i[0]||(i[0]=a=>e.value=a),class:[s.inputClass,"w-full font-normal text-sm leading-4 text-dark-black placeholder:text-gray-1 bg-transparent flex-grow outline-none disabled:text-gray disabled:hover:cursor-not-allowed caret-blue-dark"],autocomplete:"off"},{id:s.id,type:s.type,minlength:s.minlength,maxlength:s.maxlength,max:s.max,min:s.min,disabled:s.disabled,placeholder:s.placeholder,readonly:s.readonly},{onBlur:i[1]||(i[1]=a=>s.$emit("blur")),onChange:i[2]||(i[2]=a=>s.$emit("change")),onFocus:i[3]||(i[3]=a=>s.$emit("focus"))}),null,16),[[Qy,e.value]]),Ee(s.$slots,"suffix",{},void 0,!0)],10,$P))}}),Nr=Fm(FP,[["__scopeId","data-v-3bbf4480"]]),LP=["checked"],BP=vt({__name:"FormRadio",props:{modelValue:{},value:{},label:{},name:{},disabled:{type:Boolean,default:!1},size:{default:16},btnStyles:{default:" group-hover:border-blue-primary peer-checked:border-primary peer-checked:border-[4px]"},labelStyles:{default:""},activeClass:{default:"text-blue"}},emits:["update:modelValue"],setup(n,{emit:t}){const e=n,r=t,s=c=>{const d=c.target;r("update:modelValue",e.value??d.value)},i=ie(()=>e.size+"px"),a=ie(()=>+e.size*.5+"px"),l=ie(()=>`${e.disabled?"peer-checked:before:!bg-gray-100":e.btnStyles} ${e.modelValue===e.value?"peer-checked:border-blue":""}`),u=ie(()=>e.activeClass||"text-blue");return(c,d)=>(W(),re("label",{class:Fe([c.disabled?"cursor-not-allowed":"cursor-pointer","transition group inline-flex items-center relative select-none min-h-[16px]"]),style:kn({minHeight:i.value,"--btn-size":a.value})},[Se("input",kt({checked:c.modelValue===c.value,class:"absolute opacity-0 invisible h-0 w-0 peer",type:"radio"},{name:c.name||"",value:c.value,disabled:c.disabled||!1},{onChange:s}),null,16,LP),Se("span",{class:Fe([[l.value],"before:w-2 before:h-2 shrink-0 duration-200 ease-in-out bg-white peer-checked:before:opacity-100 before:opacity-0 before:bg-blue-primary relative border-2 rounded-full box-border before:absolute before:top-1/2 before:left-1/2 before:-translate-x-1/2 before:-translate-y-1/2 before:rounded-full before:transition-all before:duration-200 border-gray-1 peer-disabled:before:bg-white"]),style:kn({width:i.value,height:i.value})},null,6),Ee(c.$slots,"default",{},()=>[Se("span",{class:Fe([[c.modelValue===c.value?u.value:c.labelStyles||"text-gray-700"],"font-normal ml-2 text-sm leading-130 transition-300"])},$t(c.label),3)])],6))}}),UP={key:0},Ws=vt({__name:"FormRadioGroup",props:{modelValue:{},items:{},labelKey:{default:"name"},valueKey:{default:"id"},disabled:{type:Boolean,default:!1},itemClass:{default:""},labelStyles:{default:""},activeClass:{default:""},hrClass:{default:""}},emits:["update:modelValue"],setup(n,{emit:t}){const e=n,r=he(e.modelValue),s=t,i=`k-radio-${Math.floor(Math.random()*1e3)}`,a=he([]);return qt(()=>r.value,l=>{l!==a.value&&(a.value=l),e.disabled||s("update:modelValue",a.value)}),qt(()=>e.modelValue,l=>{l!==a.value&&(a.value=l),r.value=l}),(l,u)=>{var c;return(c=l.items)!=null&&c.length?(W(),re("div",UP,[(W(!0),re(He,null,pt(l.items,(d,f)=>(W(),re(He,{key:f},[$e(BP,kt({ref_for:!0},{disabled:l.disabled,labelStyles:l.labelStyles,activeClass:l.activeClass},{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=g=>r.value=g),label:d[l.labelKey],value:d[l.valueKey],name:i,class:[l.itemClass,{"pointer-events-none":d==null?void 0:d.disabled}],disabled:d==null?void 0:d.disabled,onClick:g=>r.value=l.disabled?l.modelValue:d[l.valueKey]}),{label:De(()=>[Ee(l.$slots,"label",{item:d})]),_:2},1040,["modelValue","label","value","class","disabled","onClick"]),f!==l.items.length-1?(W(),re("hr",{key:0,class:Fe(["border-none h-px bg-[#F2F2F2] my-2",l.hrClass])},null,2)):de("",!0)],64))),128))])):de("",!0)}}}),Bp=6048e5,qP=864e5,jP=6e4,Up=36e5,zP=1e3,sf=Symbol.for("constructDateFrom");function ut(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&sf in n?n[sf](t):n instanceof Date?new n.constructor(t):new Date(t)}function Be(n,t){return ut(t||n,n)}function Vn(n,t,e){const r=Be(n,e==null?void 0:e.in);return isNaN(t)?ut((e==null?void 0:e.in)||n,NaN):(t&&r.setDate(r.getDate()+t),r)}function Hn(n,t,e){const r=Be(n,e==null?void 0:e.in);if(isNaN(t))return ut(n,NaN);if(!t)return r;const s=r.getDate(),i=ut(n,r.getTime());i.setMonth(r.getMonth()+t+1,0);const a=i.getDate();return s>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),s),r)}function qp(n,t,e){const{years:r=0,months:s=0,weeks:i=0,days:a=0,hours:l=0,minutes:u=0,seconds:c=0}=t,d=Be(n,e==null?void 0:e.in),f=s||r?Hn(d,s+r*12):d,g=a||i?Vn(f,a+i*7):f,b=u+l*60,A=(c+b*60)*1e3;return ut(n,+g+A)}function YP(n,t,e){return ut(n,+Be(n)+t)}function HP(n,t,e){return YP(n,t*Up)}let WP={};function Os(){return WP}function Kn(n,t){var l,u,c,d;const e=Os(),r=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??e.weekStartsOn??((d=(c=e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=Be(n,t==null?void 0:t.in),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function ci(n,t){return Kn(n,{...t,weekStartsOn:1})}function jp(n,t){const e=Be(n,t==null?void 0:t.in),r=e.getFullYear(),s=ut(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=ci(s),a=ut(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const l=ci(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=l.getTime()?r:r-1}function Fo(n){const t=Be(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function qa(n,...t){const e=ut.bind(null,t.find(r=>typeof r=="object"));return t.map(e)}function af(n,t){const e=Be(n,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function zp(n,t,e){const[r,s]=qa(e==null?void 0:e.in,n,t),i=af(r),a=af(s),l=+i-Fo(i),u=+a-Fo(a);return Math.round((l-u)/qP)}function KP(n,t){const e=jp(n,t),r=ut(n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),ci(r)}function GP(n,t,e){return Hn(n,t*3,e)}function Pc(n,t,e){return Hn(n,t*12,e)}function of(n,t){const e=+Be(n)-+Be(t);return e<0?-1:e>0?1:e}function Yp(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function ca(n){return!(!Yp(n)&&typeof n!="number"||isNaN(+Be(n)))}function lf(n,t){const e=Be(n,t==null?void 0:t.in);return Math.trunc(e.getMonth()/3)+1}function QP(n,t,e){const[r,s]=qa(e==null?void 0:e.in,n,t);return r.getFullYear()-s.getFullYear()}function JP(n,t,e){const[r,s]=qa(e==null?void 0:e.in,n,t),i=of(r,s),a=Math.abs(QP(r,s));r.setFullYear(1584),s.setFullYear(1584);const l=of(r,s)===-i,u=i*(a-+l);return u===0?0:u}function Hp(n,t){const[e,r]=qa(n,t.start,t.end);return{start:e,end:r}}function Wp(n,t){const{start:e,end:r}=Hp(t==null?void 0:t.in,n);let s=+e>+r;const i=s?+e:+r,a=s?r:e;a.setHours(0,0,0,0);let l=1;const u=[];for(;+a<=i;)u.push(ut(e,a)),a.setDate(a.getDate()+l),a.setHours(0,0,0,0);return s?u.reverse():u}function ys(n,t){const e=Be(n,t==null?void 0:t.in),r=e.getMonth(),s=r-r%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function XP(n,t){const{start:e,end:r}=Hp(t==null?void 0:t.in,n);let s=+e>+r;const i=s?+ys(e):+ys(r);let a=ys(s?r:e),l=1;const u=[];for(;+a<=i;)u.push(ut(e,a)),a=GP(a,l);return s?u.reverse():u}function ZP(n,t){const e=Be(n,t==null?void 0:t.in);return e.setDate(1),e.setHours(0,0,0,0),e}function Kp(n,t){const e=Be(n,t==null?void 0:t.in),r=e.getFullYear();return e.setFullYear(r+1,0,0),e.setHours(23,59,59,999),e}function Ca(n,t){const e=Be(n,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}function Gp(n,t){var l,u,c,d;const e=Os(),r=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??e.weekStartsOn??((d=(c=e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,s=Be(n,t==null?void 0:t.in),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function uf(n,t){const e=Be(n,t==null?void 0:t.in),r=e.getMonth(),s=r-r%3+3;return e.setMonth(s,0),e.setHours(23,59,59,999),e}const eE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tE=(n,t,e)=>{let r;const s=eE[n];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function eu(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const nE={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rE={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sE={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iE={date:eu({formats:nE,defaultWidth:"full"}),time:eu({formats:rE,defaultWidth:"full"}),dateTime:eu({formats:sE,defaultWidth:"full"})},aE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oE=(n,t,e,r)=>aE[n];function Ji(n){return(t,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,l=e!=null&&e.width?String(e.width):a;s=n.formattingValues[l]||n.formattingValues[a]}else{const a=n.defaultWidth,l=e!=null&&e.width?String(e.width):n.defaultWidth;s=n.values[l]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(t):t;return s[i]}}const lE={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uE={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cE={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hE={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fE={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mE=(n,t)=>{const e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},pE={ordinalNumber:mE,era:Ji({values:lE,defaultWidth:"wide"}),quarter:Ji({values:uE,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ji({values:cE,defaultWidth:"wide"}),day:Ji({values:hE,defaultWidth:"wide"}),dayPeriod:Ji({values:dE,defaultWidth:"wide",formattingValues:fE,defaultFormattingWidth:"wide"})};function Xi(n){return(t,e={})=>{const r=e.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],u=Array.isArray(l)?vE(l,f=>f.test(a)):gE(l,f=>f.test(a));let c;c=n.valueCallback?n.valueCallback(u):u,c=e.valueCallback?e.valueCallback(c):c;const d=t.slice(a.length);return{value:c,rest:d}}}function gE(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function vE(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function yE(n){return(t,e={})=>{const r=t.match(n.matchPattern);if(!r)return null;const s=r[0],i=t.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=e.valueCallback?e.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const _E=/^(\d+)(th|st|nd|rd)?/i,wE=/\d+/i,bE={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TE={any:[/^b/i,/^(a|c)/i]},PE={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},EE={any:[/1/i,/2/i,/3/i,/4/i]},AE={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kE={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SE={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},RE={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IE={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CE={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xE={ordinalNumber:yE({matchPattern:_E,parsePattern:wE,valueCallback:n=>parseInt(n,10)}),era:Xi({matchPatterns:bE,defaultMatchWidth:"wide",parsePatterns:TE,defaultParseWidth:"any"}),quarter:Xi({matchPatterns:PE,defaultMatchWidth:"wide",parsePatterns:EE,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Xi({matchPatterns:AE,defaultMatchWidth:"wide",parsePatterns:kE,defaultParseWidth:"any"}),day:Xi({matchPatterns:SE,defaultMatchWidth:"wide",parsePatterns:RE,defaultParseWidth:"any"}),dayPeriod:Xi({matchPatterns:IE,defaultMatchWidth:"any",parsePatterns:CE,defaultParseWidth:"any"})},Qp={code:"en-US",formatDistance:tE,formatLong:iE,formatRelative:oE,localize:pE,match:xE,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ME(n,t){const e=Be(n,t==null?void 0:t.in);return zp(e,Ca(e))+1}function Ec(n,t){const e=Be(n,t==null?void 0:t.in),r=+ci(e)-+KP(e);return Math.round(r/Bp)+1}function Ac(n,t){var d,f,g,b;const e=Be(n,t==null?void 0:t.in),r=e.getFullYear(),s=Os(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(g=s.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??1,a=ut((t==null?void 0:t.in)||n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=Kn(a,t),u=ut((t==null?void 0:t.in)||n,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=Kn(u,t);return+e>=+l?r+1:+e>=+c?r:r-1}function DE(n,t){var l,u,c,d;const e=Os(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??e.firstWeekContainsDate??((d=(c=e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,s=Ac(n,t),i=ut((t==null?void 0:t.in)||n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Kn(i,t)}function kc(n,t){const e=Be(n,t==null?void 0:t.in),r=+Kn(e,t)-+DE(e,t);return Math.round(r/Bp)+1}function lt(n,t){const e=n<0?"-":"",r=Math.abs(n).toString().padStart(t,"0");return e+r}const Dr={y(n,t){const e=n.getFullYear(),r=e>0?e:1-e;return lt(t==="yy"?r%100:r,t.length)},M(n,t){const e=n.getMonth();return t==="M"?String(e+1):lt(e+1,2)},d(n,t){return lt(n.getDate(),t.length)},a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return lt(n.getHours()%12||12,t.length)},H(n,t){return lt(n.getHours(),t.length)},m(n,t){return lt(n.getMinutes(),t.length)},s(n,t){return lt(n.getSeconds(),t.length)},S(n,t){const e=t.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,e-3));return lt(s,t.length)}},Ks={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cf={G:function(n,t,e){const r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return e.ordinalNumber(s,{unit:"year"})}return Dr.y(n,t)},Y:function(n,t,e,r){const s=Ac(n,r),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return lt(a,2)}return t==="Yo"?e.ordinalNumber(i,{unit:"year"}):lt(i,t.length)},R:function(n,t){const e=jp(n);return lt(e,t.length)},u:function(n,t){const e=n.getFullYear();return lt(e,t.length)},Q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return lt(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return lt(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){const r=n.getMonth();switch(t){case"M":case"MM":return Dr.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){const r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return lt(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){const s=kc(n,r);return t==="wo"?e.ordinalNumber(s,{unit:"week"}):lt(s,t.length)},I:function(n,t,e){const r=Ec(n);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):lt(r,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Dr.d(n,t)},D:function(n,t,e){const r=ME(n);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):lt(r,t.length)},E:function(n,t,e){const r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return lt(i,2);case"eo":return e.ordinalNumber(i,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});case"eeee":default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return lt(i,t.length);case"co":return e.ordinalNumber(i,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});case"cccc":default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(n,t,e){const r=n.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return lt(s,t.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){const s=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,t,e){const r=n.getHours();let s;switch(r===12?s=Ks.noon:r===0?s=Ks.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,t,e){const r=n.getHours();let s;switch(r>=17?s=Ks.evening:r>=12?s=Ks.afternoon:r>=4?s=Ks.morning:s=Ks.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let r=n.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return Dr.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Dr.H(n,t)},K:function(n,t,e){const r=n.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):lt(r,t.length)},k:function(n,t,e){let r=n.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):lt(r,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Dr.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Dr.s(n,t)},S:function(n,t){return Dr.S(n,t)},X:function(n,t,e){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return df(r);case"XXXX":case"XX":return gs(r);case"XXXXX":case"XXX":default:return gs(r,":")}},x:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"x":return df(r);case"xxxx":case"xx":return gs(r);case"xxxxx":case"xxx":default:return gs(r,":")}},O:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+hf(r,":");case"OOOO":default:return"GMT"+gs(r,":")}},z:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+hf(r,":");case"zzzz":default:return"GMT"+gs(r,":")}},t:function(n,t,e){const r=Math.trunc(+n/1e3);return lt(r,t.length)},T:function(n,t,e){return lt(+n,t.length)}};function hf(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?e+String(s):e+String(s)+t+lt(i,2)}function df(n,t){return n%60===0?(n>0?"-":"+")+lt(Math.abs(n)/60,2):gs(n,t)}function gs(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),s=lt(Math.trunc(r/60),2),i=lt(r%60,2);return e+s+t+i}const ff=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Jp=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},OE=(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],r=e[1],s=e[2];if(!s)return ff(n,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",ff(r,t)).replace("{{time}}",Jp(s,t))},Vu={p:Jp,P:OE},VE=/^D+$/,NE=/^Y+$/,$E=["D","DD","YY","YYYY"];function Xp(n){return VE.test(n)}function Zp(n){return NE.test(n)}function Nu(n,t,e){const r=FE(n,t,e);if(console.warn(r),$E.includes(n))throw new RangeError(r)}function FE(n,t,e){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UE=/^'([^]*?)'?$/,qE=/''/g,jE=/[a-zA-Z]/;function rr(n,t,e){var d,f,g,b,v,A,S,F;const r=Os(),s=(e==null?void 0:e.locale)??r.locale??Qp,i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((b=(g=r.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??1,a=(e==null?void 0:e.weekStartsOn)??((A=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:A.weekStartsOn)??r.weekStartsOn??((F=(S=r.locale)==null?void 0:S.options)==null?void 0:F.weekStartsOn)??0,l=Be(n,e==null?void 0:e.in);if(!ca(l))throw new RangeError("Invalid time value");let u=t.match(BE).map(q=>{const B=q[0];if(B==="p"||B==="P"){const Q=Vu[B];return Q(q,s.formatLong)}return q}).join("").match(LE).map(q=>{if(q==="''")return{isToken:!1,value:"'"};const B=q[0];if(B==="'")return{isToken:!1,value:zE(q)};if(cf[B])return{isToken:!0,value:q};if(B.match(jE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:q}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return u.map(q=>{if(!q.isToken)return q.value;const B=q.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&Zp(B)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&Xp(B))&&Nu(B,t,String(n));const Q=cf[B[0]];return Q(l,B,s.localize,c)}).join("")}function zE(n){const t=n.match(UE);return t?t[1].replace(qE,"'"):n}function YE(n,t){return Be(n,t==null?void 0:t.in).getDay()}function HE(n,t){const e=Be(n,t==null?void 0:t.in),r=e.getFullYear(),s=e.getMonth(),i=ut(e,0);return i.setFullYear(r,s+1,0),i.setHours(0,0,0,0),i.getDate()}function WE(){return Object.assign({},Os())}function br(n,t){return Be(n,t==null?void 0:t.in).getHours()}function KE(n,t){const e=Be(n,t==null?void 0:t.in).getDay();return e===0?7:e}function es(n,t){return Be(n,t==null?void 0:t.in).getMinutes()}function Je(n,t){return Be(n,t==null?void 0:t.in).getMonth()}function hi(n){return Be(n).getSeconds()}function je(n,t){return Be(n,t==null?void 0:t.in).getFullYear()}function As(n,t){return+Be(n)>+Be(t)}function di(n,t){return+Be(n)<+Be(t)}function si(n,t){return+Be(n)==+Be(t)}function GE(n,t){const e=QE(t)?new t(0):ut(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function QE(n){var t;return typeof n=="function"&&((t=n.prototype)==null?void 0:t.constructor)===n}const JE=10;class eg{constructor(){$(this,"subPriority",0)}validate(t,e){return!0}}class XE extends eg{constructor(t,e,r,s,i){super(),this.value=t,this.validateValue=e,this.setValue=r,this.priority=s,i&&(this.subPriority=i)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,r){return this.setValue(t,e,this.value,r)}}class ZE extends eg{constructor(e,r){super();$(this,"priority",JE);$(this,"subPriority",-1);this.context=e||(s=>ut(r,s))}set(e,r){return r.timestampIsSet?e:ut(e,GE(e,this.context))}}class at{run(t,e,r,s){const i=this.parse(t,e,r,s);return i?{setter:new XE(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,e,r){return!0}}class eA extends at{constructor(){super(...arguments);$(this,"priority",140);$(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,s){switch(r){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,r,s){return r.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}const Ft={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},er={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Lt(n,t){return n&&{value:t(n.value),rest:n.rest}}function Rt(n,t){const e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function tr(n,t){const e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const r=e[1]==="+"?1:-1,s=e[2]?parseInt(e[2],10):0,i=e[3]?parseInt(e[3],10):0,a=e[5]?parseInt(e[5],10):0;return{value:r*(s*Up+i*jP+a*zP),rest:t.slice(e[0].length)}}function tg(n){return Rt(Ft.anyDigitsSigned,n)}function Dt(n,t){switch(n){case 1:return Rt(Ft.singleDigit,t);case 2:return Rt(Ft.twoDigits,t);case 3:return Rt(Ft.threeDigits,t);case 4:return Rt(Ft.fourDigits,t);default:return Rt(new RegExp("^\\d{1,"+n+"}"),t)}}function Lo(n,t){switch(n){case 1:return Rt(Ft.singleDigitSigned,t);case 2:return Rt(Ft.twoDigitsSigned,t);case 3:return Rt(Ft.threeDigitsSigned,t);case 4:return Rt(Ft.fourDigitsSigned,t);default:return Rt(new RegExp("^-?\\d{1,"+n+"}"),t)}}function Sc(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ng(n,t){const e=t>0,r=e?t:1-t;let s;if(r<=50)s=n||100;else{const i=r+50,a=Math.trunc(i/100)*100,l=n>=i%100;s=n+a-(l?100:0)}return e?s:1-s}function rg(n){return n%400===0||n%4===0&&n%100!==0}class tA extends at{constructor(){super(...arguments);$(this,"priority",130);$(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,s){const i=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return Lt(Dt(4,e),i);case"yo":return Lt(s.ordinalNumber(e,{unit:"year"}),i);default:return Lt(Dt(r.length,e),i)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,s){const i=e.getFullYear();if(s.isTwoDigitYear){const l=ng(s.year,i);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const a=!("era"in r)||r.era===1?s.year:1-s.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class nA extends at{constructor(){super(...arguments);$(this,"priority",130);$(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,s){const i=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Lt(Dt(4,e),i);case"Yo":return Lt(s.ordinalNumber(e,{unit:"year"}),i);default:return Lt(Dt(r.length,e),i)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,s,i){const a=Ac(e,i);if(s.isTwoDigitYear){const u=ng(s.year,a);return e.setFullYear(u,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Kn(e,i)}const l=!("era"in r)||r.era===1?s.year:1-s.year;return e.setFullYear(l,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Kn(e,i)}}class rA extends at{constructor(){super(...arguments);$(this,"priority",130);$(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return Lo(r==="R"?4:r.length,e)}set(e,r,s){const i=ut(e,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),ci(i)}}class sA extends at{constructor(){super(...arguments);$(this,"priority",130);$(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return Lo(r==="u"?4:r.length,e)}set(e,r,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class iA extends at{constructor(){super(...arguments);$(this,"priority",120);$(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,s){switch(r){case"Q":case"QQ":return Dt(r.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class aA extends at{constructor(){super(...arguments);$(this,"priority",120);$(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,s){switch(r){case"q":case"qq":return Dt(r.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}}class oA extends at{constructor(){super(...arguments);$(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);$(this,"priority",110)}parse(e,r,s){const i=a=>a-1;switch(r){case"M":return Lt(Rt(Ft.month,e),i);case"MM":return Lt(Dt(2,e),i);case"Mo":return Lt(s.ordinalNumber(e,{unit:"month"}),i);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class lA extends at{constructor(){super(...arguments);$(this,"priority",110);$(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,s){const i=a=>a-1;switch(r){case"L":return Lt(Rt(Ft.month,e),i);case"LL":return Lt(Dt(2,e),i);case"Lo":return Lt(s.ordinalNumber(e,{unit:"month"}),i);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}function uA(n,t,e){const r=Be(n,e==null?void 0:e.in),s=kc(r,e)-t;return r.setDate(r.getDate()-s*7),Be(r,e==null?void 0:e.in)}class cA extends at{constructor(){super(...arguments);$(this,"priority",100);$(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,s){switch(r){case"w":return Rt(Ft.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return Dt(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,s,i){return Kn(uA(e,s,i),i)}}function hA(n,t,e){const r=Be(n,e==null?void 0:e.in),s=Ec(r,e)-t;return r.setDate(r.getDate()-s*7),r}class dA extends at{constructor(){super(...arguments);$(this,"priority",100);$(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,s){switch(r){case"I":return Rt(Ft.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return Dt(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,s){return ci(hA(e,s))}}const fA=[31,28,31,30,31,30,31,31,30,31,30,31],mA=[31,29,31,30,31,30,31,31,30,31,30,31];class pA extends at{constructor(){super(...arguments);$(this,"priority",90);$(this,"subPriority",1);$(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,s){switch(r){case"d":return Rt(Ft.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return Dt(r.length,e)}}validate(e,r){const s=e.getFullYear(),i=rg(s),a=e.getMonth();return i?r>=1&&r<=mA[a]:r>=1&&r<=fA[a]}set(e,r,s){return e.setDate(s),e.setHours(0,0,0,0),e}}class gA extends at{constructor(){super(...arguments);$(this,"priority",90);$(this,"subpriority",1);$(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,s){switch(r){case"D":case"DD":return Rt(Ft.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return Dt(r.length,e)}}validate(e,r){const s=e.getFullYear();return rg(s)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}}function Rc(n,t,e){var f,g,b,v;const r=Os(),s=(e==null?void 0:e.weekStartsOn)??((g=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(b=r.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??0,i=Be(n,e==null?void 0:e.in),a=i.getDay(),u=(t%7+7)%7,c=7-s,d=t<0||t>6?t-(a+c)%7:(u+c)%7-(a+c)%7;return Vn(i,d,e)}class vA extends at{constructor(){super(...arguments);$(this,"priority",90);$(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,s){switch(r){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,s,i){return e=Rc(e,s,i),e.setHours(0,0,0,0),e}}class yA extends at{constructor(){super(...arguments);$(this,"priority",90);$(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,s,i){const a=l=>{const u=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+u};switch(r){case"e":case"ee":return Lt(Dt(r.length,e),a);case"eo":return Lt(s.ordinalNumber(e,{unit:"day"}),a);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,s,i){return e=Rc(e,s,i),e.setHours(0,0,0,0),e}}class _A extends at{constructor(){super(...arguments);$(this,"priority",90);$(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,s,i){const a=l=>{const u=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+u};switch(r){case"c":case"cc":return Lt(Dt(r.length,e),a);case"co":return Lt(s.ordinalNumber(e,{unit:"day"}),a);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,s,i){return e=Rc(e,s,i),e.setHours(0,0,0,0),e}}function wA(n,t,e){const r=Be(n,e==null?void 0:e.in),s=KE(r,e),i=t-s;return Vn(r,i,e)}class bA extends at{constructor(){super(...arguments);$(this,"priority",90);$(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,s){const i=a=>a===0?7:a;switch(r){case"i":case"ii":return Dt(r.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return Lt(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return Lt(s.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Lt(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Lt(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,r){return r>=1&&r<=7}set(e,r,s){return e=wA(e,s),e.setHours(0,0,0,0),e}}class TA extends at{constructor(){super(...arguments);$(this,"priority",80);$(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,s){switch(r){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,s){return e.setHours(Sc(s),0,0,0),e}}class PA extends at{constructor(){super(...arguments);$(this,"priority",80);$(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,s){switch(r){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,s){return e.setHours(Sc(s),0,0,0),e}}class EA extends at{constructor(){super(...arguments);$(this,"priority",80);$(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,s){switch(r){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,s){return e.setHours(Sc(s),0,0,0),e}}class AA extends at{constructor(){super(...arguments);$(this,"priority",70);$(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,s){switch(r){case"h":return Rt(Ft.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return Dt(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,s){const i=e.getHours()>=12;return i&&s<12?e.setHours(s+12,0,0,0):!i&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}}class kA extends at{constructor(){super(...arguments);$(this,"priority",70);$(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,s){switch(r){case"H":return Rt(Ft.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return Dt(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,s){return e.setHours(s,0,0,0),e}}class SA extends at{constructor(){super(...arguments);$(this,"priority",70);$(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,s){switch(r){case"K":return Rt(Ft.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return Dt(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}}class RA extends at{constructor(){super(...arguments);$(this,"priority",70);$(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,s){switch(r){case"k":return Rt(Ft.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return Dt(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,s){const i=s<=24?s%24:s;return e.setHours(i,0,0,0),e}}class IA extends at{constructor(){super(...arguments);$(this,"priority",60);$(this,"incompatibleTokens",["t","T"])}parse(e,r,s){switch(r){case"m":return Rt(Ft.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return Dt(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,s){return e.setMinutes(s,0,0),e}}class CA extends at{constructor(){super(...arguments);$(this,"priority",50);$(this,"incompatibleTokens",["t","T"])}parse(e,r,s){switch(r){case"s":return Rt(Ft.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return Dt(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,s){return e.setSeconds(s,0),e}}class xA extends at{constructor(){super(...arguments);$(this,"priority",30);$(this,"incompatibleTokens",["t","T"])}parse(e,r){const s=i=>Math.trunc(i*Math.pow(10,-r.length+3));return Lt(Dt(r.length,e),s)}set(e,r,s){return e.setMilliseconds(s),e}}class MA extends at{constructor(){super(...arguments);$(this,"priority",10);$(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return tr(er.basicOptionalMinutes,e);case"XX":return tr(er.basic,e);case"XXXX":return tr(er.basicOptionalSeconds,e);case"XXXXX":return tr(er.extendedOptionalSeconds,e);case"XXX":default:return tr(er.extended,e)}}set(e,r,s){return r.timestampIsSet?e:ut(e,e.getTime()-Fo(e)-s)}}class DA extends at{constructor(){super(...arguments);$(this,"priority",10);$(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return tr(er.basicOptionalMinutes,e);case"xx":return tr(er.basic,e);case"xxxx":return tr(er.basicOptionalSeconds,e);case"xxxxx":return tr(er.extendedOptionalSeconds,e);case"xxx":default:return tr(er.extended,e)}}set(e,r,s){return r.timestampIsSet?e:ut(e,e.getTime()-Fo(e)-s)}}class OA extends at{constructor(){super(...arguments);$(this,"priority",40);$(this,"incompatibleTokens","*")}parse(e){return tg(e)}set(e,r,s){return[ut(e,s*1e3),{timestampIsSet:!0}]}}class VA extends at{constructor(){super(...arguments);$(this,"priority",20);$(this,"incompatibleTokens","*")}parse(e){return tg(e)}set(e,r,s){return[ut(e,s),{timestampIsSet:!0}]}}const NA={G:new eA,y:new tA,Y:new nA,R:new rA,u:new sA,Q:new iA,q:new aA,M:new oA,L:new lA,w:new cA,I:new dA,d:new pA,D:new gA,E:new vA,e:new yA,c:new _A,i:new bA,a:new TA,b:new PA,B:new EA,h:new AA,H:new kA,K:new SA,k:new RA,m:new IA,s:new CA,S:new xA,X:new MA,x:new DA,t:new OA,T:new VA},$A=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,FA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LA=/^'([^]*?)'?$/,BA=/''/g,UA=/\S/,qA=/[a-zA-Z]/;function $u(n,t,e,r){var S,F,q,B,Q,se,J,k;const s=()=>ut((r==null?void 0:r.in)||e,NaN),i=WE(),a=(r==null?void 0:r.locale)??i.locale??Qp,l=(r==null?void 0:r.firstWeekContainsDate)??((F=(S=r==null?void 0:r.locale)==null?void 0:S.options)==null?void 0:F.firstWeekContainsDate)??i.firstWeekContainsDate??((B=(q=i.locale)==null?void 0:q.options)==null?void 0:B.firstWeekContainsDate)??1,u=(r==null?void 0:r.weekStartsOn)??((se=(Q=r==null?void 0:r.locale)==null?void 0:Q.options)==null?void 0:se.weekStartsOn)??i.weekStartsOn??((k=(J=i.locale)==null?void 0:J.options)==null?void 0:k.weekStartsOn)??0;if(!t)return n?s():Be(e,r==null?void 0:r.in);const c={firstWeekContainsDate:l,weekStartsOn:u,locale:a},d=[new ZE(r==null?void 0:r.in,e)],f=t.match(FA).map(y=>{const _=y[0];if(_ in Vu){const T=Vu[_];return T(y,a.formatLong)}return y}).join("").match($A),g=[];for(let y of f){!(r!=null&&r.useAdditionalWeekYearTokens)&&Zp(y)&&Nu(y,t,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Xp(y)&&Nu(y,t,n);const _=y[0],T=NA[_];if(T){const{incompatibleTokens:I}=T;if(Array.isArray(I)){const x=g.find(V=>I.includes(V.token)||V.token===_);if(x)throw new RangeError(`The format string mustn't contain \`${x.fullToken}\` and \`${y}\` at the same time`)}else if(T.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${y}\` and any other token at the same time`);g.push({token:_,fullToken:y});const O=T.run(n,y,a.match,c);if(!O)return s();d.push(O.setter),n=O.rest}else{if(_.match(qA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");if(y==="''"?y="'":_==="'"&&(y=jA(y)),n.indexOf(y)===0)n=n.slice(y.length);else return s()}}if(n.length>0&&UA.test(n))return s();const b=d.map(y=>y.priority).sort((y,_)=>_-y).filter((y,_,T)=>T.indexOf(y)===_).map(y=>d.filter(_=>_.priority===y).sort((_,T)=>T.subPriority-_.subPriority)).map(y=>y[0]);let v=Be(e,r==null?void 0:r.in);if(isNaN(+v))return s();const A={};for(const y of b){if(!y.validate(v,c))return s();const _=y.set(v,A,c);Array.isArray(_)?(v=_[0],Object.assign(A,_[1])):v=_}return v}function jA(n){return n.match(LA)[1].replace(BA,"'")}function mf(n,t,e){const[r,s]=qa(e==null?void 0:e.in,n,t);return+ys(r)==+ys(s)}function sg(n,t,e){return Vn(n,-t,e)}function ig(n,t,e){const r=Be(n,e==null?void 0:e.in),s=r.getFullYear(),i=r.getDate(),a=ut(n,0);a.setFullYear(s,t,15),a.setHours(0,0,0,0);const l=HE(a);return r.setMonth(t,Math.min(i,l)),r}function ht(n,t,e){let r=Be(n,e==null?void 0:e.in);return isNaN(+r)?ut(n,NaN):(t.year!=null&&r.setFullYear(t.year),t.month!=null&&(r=ig(r,t.month)),t.date!=null&&r.setDate(t.date),t.hours!=null&&r.setHours(t.hours),t.minutes!=null&&r.setMinutes(t.minutes),t.seconds!=null&&r.setSeconds(t.seconds),t.milliseconds!=null&&r.setMilliseconds(t.milliseconds),r)}function zA(n,t,e){const r=Be(n,e==null?void 0:e.in);return r.setHours(t),r}function ag(n,t,e){const r=Be(n,e==null?void 0:e.in);return r.setMilliseconds(t),r}function YA(n,t,e){const r=Be(n,e==null?void 0:e.in);return r.setMinutes(t),r}function og(n,t,e){const r=Be(n,e==null?void 0:e.in);return r.setSeconds(t),r}function nr(n,t,e){const r=Be(n,e==null?void 0:e.in);return isNaN(+r)?ut(n,NaN):(r.setFullYear(t),r)}function fi(n,t,e){return Hn(n,-t,e)}function HA(n,t,e){const{years:r=0,months:s=0,weeks:i=0,days:a=0,hours:l=0,minutes:u=0,seconds:c=0}=t,d=fi(n,s+r*12,e),f=sg(d,a+i*7,e),g=u+l*60,v=(c+g*60)*1e3;return ut(n,+f-v)}function lg(n,t,e){return Pc(n,-t,e)}function Si(){const n=e_();return W(),re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img",...n},[Se("path",{d:"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z"}),Se("path",{d:"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),Se("path",{d:"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"}),Se("path",{d:"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z"})])}Si.compatConfig={MODE:3};function ug(){return W(),re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Se("path",{d:"M23.057 7.057l-16 16c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l16-16c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0z"}),Se("path",{d:"M7.057 8.943l16 16c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885l-16-16c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}ug.compatConfig={MODE:3};function Ic(){return W(),re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Se("path",{d:"M20.943 23.057l-7.057-7.057c0 0 7.057-7.057 7.057-7.057 0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-8 8c-0.521 0.521-0.521 1.365 0 1.885l8 8c0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Ic.compatConfig={MODE:3};function Cc(){return W(),re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Se("path",{d:"M12.943 24.943l8-8c0.521-0.521 0.521-1.365 0-1.885l-8-8c-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885l7.057 7.057c0 0-7.057 7.057-7.057 7.057-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0z"})])}Cc.compatConfig={MODE:3};function xc(){return W(),re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Se("path",{d:"M16 1.333c-8.095 0-14.667 6.572-14.667 14.667s6.572 14.667 14.667 14.667c8.095 0 14.667-6.572 14.667-14.667s-6.572-14.667-14.667-14.667zM16 4c6.623 0 12 5.377 12 12s-5.377 12-12 12c-6.623 0-12-5.377-12-12s5.377-12 12-12z"}),Se("path",{d:"M14.667 8v8c0 0.505 0.285 0.967 0.737 1.193l5.333 2.667c0.658 0.329 1.46 0.062 1.789-0.596s0.062-1.46-0.596-1.789l-4.596-2.298c0 0 0-7.176 0-7.176 0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z"})])}xc.compatConfig={MODE:3};function Mc(){return W(),re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Se("path",{d:"M24.943 19.057l-8-8c-0.521-0.521-1.365-0.521-1.885 0l-8 8c-0.52 0.52-0.52 1.365 0 1.885s1.365 0.52 1.885 0l7.057-7.057c0 0 7.057 7.057 7.057 7.057 0.52 0.52 1.365 0.52 1.885 0s0.52-1.365 0-1.885z"})])}Mc.compatConfig={MODE:3};function Dc(){return W(),re("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor","aria-hidden":"true",class:"dp__icon",role:"img"},[Se("path",{d:"M7.057 12.943l8 8c0.521 0.521 1.365 0.521 1.885 0l8-8c0.52-0.52 0.52-1.365 0-1.885s-1.365-0.52-1.885 0l-7.057 7.057c0 0-7.057-7.057-7.057-7.057-0.52-0.52-1.365-0.52-1.885 0s-0.52 1.365 0 1.885z"})])}Dc.compatConfig={MODE:3};const Rn=(n,t)=>t?new Date(n.toLocaleString("en-US",{timeZone:t})):new Date(n),Oc=(n,t,e)=>Fu(n,t,e)||fe(),WA=(n,t,e)=>{const r=t.dateInTz?Rn(new Date(n),t.dateInTz):fe(n);return e?Xt(r,!0):r},Fu=(n,t,e)=>{if(!n)return null;const r=e?Xt(fe(n),!0):fe(n);return t?t.exactMatch?WA(n,t,e):Rn(r,t.timezone):r},KA=n=>{const t=new Date(n.getFullYear(),0,1).getTimezoneOffset();return n.getTimezoneOffset()<t},GA=(n,t)=>{if(!n)return 0;const e=new Date,r=new Date(e.toLocaleString("en-US",{timeZone:"UTC"})),s=new Date(e.toLocaleString("en-US",{timeZone:n})),i=(KA(t??s)?s:t??s).getTimezoneOffset()/60;return(+r-+s)/(1e3*60*60)-i};var Un=(n=>(n.month="month",n.year="year",n))(Un||{}),qn=(n=>(n.top="top",n.bottom="bottom",n))(qn||{}),bs=(n=>(n.header="header",n.calendar="calendar",n.timePicker="timePicker",n))(bs||{}),mn=(n=>(n.month="month",n.year="year",n.calendar="calendar",n.time="time",n.minutes="minutes",n.hours="hours",n.seconds="seconds",n))(mn||{});const QA=["timestamp","date","iso"];var wn=(n=>(n.up="up",n.down="down",n.left="left",n.right="right",n))(wn||{}),Tt=(n=>(n.arrowUp="ArrowUp",n.arrowDown="ArrowDown",n.arrowLeft="ArrowLeft",n.arrowRight="ArrowRight",n.enter="Enter",n.space=" ",n.esc="Escape",n.tab="Tab",n.home="Home",n.end="End",n.pageUp="PageUp",n.pageDown="PageDown",n))(Tt||{}),ii=(n=>(n.MONTH_AND_YEAR="MM-yyyy",n.YEAR="yyyy",n.DATE="dd-MM-yyyy",n))(ii||{});function pf(n){return t=>{const e=new Intl.DateTimeFormat(n,{weekday:"short",timeZone:"UTC"}).format(new Date(`2017-01-0${t}T00:00:00+00:00`));return n==="ar"?e.slice(2,5):e.slice(0,2)}}function JA(n){return t=>rr(Rn(new Date(`2017-01-0${t}T00:00:00+00:00`),"UTC"),"EEEEEE",{locale:n})}const XA=(n,t,e)=>{const r=[1,2,3,4,5,6,7];let s;if(n!==null)try{s=r.map(JA(n))}catch{s=r.map(pf(t))}else s=r.map(pf(t));const i=s.slice(0,e),a=s.slice(e+1,s.length);return[s[e]].concat(...a).concat(...i)},Vc=(n,t,e)=>{const r=[];for(let s=+n[0];s<=+n[1];s++)r.push({value:+s,text:fg(s,t)});return e?r.reverse():r},cg=(n,t,e)=>{const r=[1,2,3,4,5,6,7,8,9,10,11,12].map(i=>{const a=i<10?`0${i}`:i;return new Date(`2017-${a}-01T00:00:00+00:00`)});if(n!==null)try{const i=e==="long"?"LLLL":"LLL";return r.map((a,l)=>{const u=rr(Rn(a,"UTC"),i,{locale:n});return{text:u.charAt(0).toUpperCase()+u.substring(1),value:l}})}catch{}const s=new Intl.DateTimeFormat(t,{month:e,timeZone:"UTC"});return r.map((i,a)=>{const l=s.format(i);return{text:l.charAt(0).toUpperCase()+l.substring(1),value:a}})},ZA=n=>[12,1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11][n],Ut=n=>{const t=P(n);return t!=null&&t.$el?t==null?void 0:t.$el:t},ek=n=>({type:"dot",...n??{}}),hg=n=>Array.isArray(n)?!!n[0]&&!!n[1]:!1,Nc={prop:n=>`"${n}" prop must be enabled!`,dateArr:n=>`You need to use array as "model-value" binding in order to support "${n}"`},Wt=n=>n,gf=n=>n===0?n:!n||isNaN(+n)?null:+n,vf=n=>n===null,dg=n=>{if(n)return[...n.querySelectorAll("input, button, select, textarea, a[href]")][0]},tk=n=>{const t=[],e=r=>r.filter(s=>s);for(let r=0;r<n.length;r+=3){const s=[n[r],n[r+1],n[r+2]];t.push(e(s))}return t},xa=(n,t,e)=>{const r=e!=null,s=t!=null;if(!r&&!s)return!1;const i=+e,a=+t;return r&&s?+n>i||+n<a:r?+n>i:s?+n<a:!1},mi=(n,t)=>tk(n).map(e=>e.map(r=>{const{active:s,disabled:i,isBetween:a,highlighted:l}=t(r);return{...r,active:s,disabled:i,className:{dp__overlay_cell_active:s,dp__overlay_cell:!s,dp__overlay_cell_disabled:i,dp__overlay_cell_pad:!0,dp__overlay_cell_active_disabled:i&&s,dp__cell_in_between:a,"dp--highlighted":l}}})),jr=(n,t,e=!1)=>{n&&t.allowStopPropagation&&(e&&n.stopImmediatePropagation(),n.stopPropagation())},nk=()=>["a[href]","area[href]","input:not([disabled]):not([type='hidden'])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[tabindex]:not([tabindex='-1'])","[data-datepicker-instance]"].join(", ");function rk(n,t){let e=[...document.querySelectorAll(nk())];e=e.filter(s=>!n.contains(s)||s.hasAttribute("data-datepicker-instance"));const r=e.indexOf(n);if(r>=0&&(t?r-1>=0:r+1<=e.length))return e[r+(t?-1:1)]}const Lu=(n,t)=>n==null?void 0:n.querySelector(`[data-dp-element="${t}"]`),fg=(n,t)=>new Intl.NumberFormat(t,{useGrouping:!1,style:"decimal"}).format(n),$c=(n,t)=>rr(n,t??ii.DATE),tu=n=>Array.isArray(n),Bo=(n,t,e)=>t.get($c(n,e)),sk=(n,t)=>n?t?t instanceof Map?!!Bo(n,t):t(fe(n)):!1:!0,Tn=(n,t,e=!1,r)=>{if(n.key===Tt.enter||n.key===Tt.space)return e&&n.preventDefault(),t();if(r)return r(n)},ik=()=>"ontouchstart"in window||navigator.maxTouchPoints>0,mg=(n,t)=>n?ii.MONTH_AND_YEAR:t?ii.YEAR:ii.DATE,pg=n=>n<10?`0${n}`:n,yf=(n,t,e,r,s,i)=>{const a=$u(n,t.slice(0,n.length),new Date,{locale:i});return ca(a)&&Yp(a)?r||s?a:ht(a,{hours:+e.hours,minutes:+(e==null?void 0:e.minutes),seconds:+(e==null?void 0:e.seconds),milliseconds:0}):null},ak=(n,t,e,r,s,i)=>{const a=Array.isArray(e)?e[0]:e;if(typeof t=="string")return yf(n,t,a,r,s,i);if(Array.isArray(t)){let l=null;for(const u of t)if(l=yf(n,u,a,r,s,i),l)break;return l}return typeof t=="function"?t(n):null},fe=n=>n?new Date(n):new Date,ok=(n,t,e)=>{if(t){const s=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),a=n.getHours().toString().padStart(2,"0"),l=n.getMinutes().toString().padStart(2,"0"),u=e?n.getSeconds().toString().padStart(2,"0"):"00";return`${n.getFullYear()}-${s}-${i}T${a}:${l}:${u}.000Z`}const r=Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds());return new Date(r).toISOString()},Xt=(n,t)=>{const e=fe(JSON.parse(JSON.stringify(n))),r=ht(e,{hours:0,minutes:0,seconds:0,milliseconds:0});return t?ZP(r):r},zr=(n,t,e,r)=>{let s=n?fe(n):fe();return(t||t===0)&&(s=zA(s,+t)),(e||e===0)&&(s=YA(s,+e)),(r||r===0)&&(s=og(s,+r)),ag(s,0)},xt=(n,t)=>!n||!t?!1:di(Xt(n),Xt(t)),Xe=(n,t)=>!n||!t?!1:si(Xt(n),Xt(t)),Vt=(n,t)=>!n||!t?!1:As(Xt(n),Xt(t)),Ma=(n,t,e)=>n!=null&&n[0]&&n!=null&&n[1]?Vt(e,n[0])&&xt(e,n[1]):n!=null&&n[0]&&t?Vt(e,n[0])&&xt(e,t)||xt(e,n[0])&&Vt(e,t):!1,zn=n=>{const t=ht(new Date(n),{date:1});return Xt(t)},nu=(n,t,e)=>t&&(e||e===0)?Object.fromEntries(["hours","minutes","seconds"].map(r=>r===t?[r,e]:[r,isNaN(+n[r])?void 0:+n[r]])):{hours:isNaN(+n.hours)?void 0:+n.hours,minutes:isNaN(+n.minutes)?void 0:+n.minutes,seconds:isNaN(+n.seconds)?void 0:+n.seconds},Ts=n=>({hours:br(n),minutes:es(n),seconds:hi(n)}),gg=(n,t)=>{if(t){const e=je(fe(t));if(e>n)return 12;if(e===n)return Je(fe(t))}},vg=(n,t)=>{if(t){const e=je(fe(t));return e<n?-1:e===n?Je(fe(t)):void 0}},pi=n=>{if(n)return je(fe(n))},yg=(n,t)=>{const e=Vt(n,t)?t:n,r=Vt(t,n)?t:n;return Wp({start:e,end:r})},lk=n=>{const t=Hn(n,1);return{month:Je(t),year:je(t)}},gr=(n,t)=>{const e=Kn(n,{weekStartsOn:+t}),r=Gp(n,{weekStartsOn:+t});return[e,r]},_g=(n,t)=>{const e={hours:br(fe()),minutes:es(fe()),seconds:t?hi(fe()):0};return Object.assign(e,n)},Fr=(n,t,e)=>[ht(fe(n),{date:1}),ht(fe(),{month:t,year:e,date:1})],vr=(n,t,e)=>{let r=n?fe(n):fe();return(t||t===0)&&(r=ig(r,t)),e&&(r=nr(r,e)),r},wg=(n,t,e,r,s)=>{if(!r||s&&!t||!s&&!e)return!1;const i=s?Hn(n,1):fi(n,1),a=[Je(i),je(i)];return s?!ck(...a,t):!uk(...a,e)},uk=(n,t,e)=>xt(...Fr(e,n,t))||Xe(...Fr(e,n,t)),ck=(n,t,e)=>Vt(...Fr(e,n,t))||Xe(...Fr(e,n,t)),bg=(n,t,e,r,s,i,a)=>{if(typeof t=="function"&&!a)return t(n);const l=e?{locale:e}:void 0;return Array.isArray(n)?`${rr(n[0],i,l)}${s&&!n[1]?"":r}${n[1]?rr(n[1],i,l):""}`:rr(n,i,l)},Gs=n=>{if(n)return null;throw new Error(Nc.prop("partial-range"))},fo=(n,t)=>{if(t)return n();throw new Error(Nc.prop("range"))},Bu=n=>Array.isArray(n)?ca(n[0])&&(n[1]?ca(n[1]):!0):n?ca(n):!1,hk=(n,t)=>ht(t??fe(),{hours:+n.hours||0,minutes:+n.minutes||0,seconds:+n.seconds||0}),ru=(n,t,e,r)=>{if(!n)return!0;if(r){const s=e==="max"?di(n,t):As(n,t),i={seconds:0,milliseconds:0};return s||si(ht(n,i),ht(t,i))}return e==="max"?n.getTime()<=t.getTime():n.getTime()>=t.getTime()},su=(n,t,e)=>n?hk(n,t):fe(e??t),_f=(n,t,e,r,s)=>{if(Array.isArray(r)){const a=su(n,r[0],t),l=su(n,r[1],t);return ru(r[0],a,e,!!t)&&ru(r[1],l,e,!!t)&&s}const i=su(n,r,t);return ru(r,i,e,!!t)&&s},iu=n=>ht(fe(),Ts(n)),dk=(n,t,e)=>{if(n instanceof Map){const r=`${pg(e+1)}-${t}`;return n.size?n.has(r):!1}return typeof n=="function"?n(Xt(ht(fe(),{month:e,year:t}),!0)):!1},fk=(n,t,e)=>{if(n instanceof Map){const r=`${pg(e+1)}-${t}`;return n.size?n.has(r):!0}return!0},Tg=(n,t,e)=>typeof n=="function"?n({month:t,year:e}):!!n.months.find(r=>r.month===t&&r.year===e),Fc=(n,t)=>typeof n=="function"?n(t):n.years.includes(t),Uu=n=>`dp-${rr(n,"yyyy-MM-dd")}`,wf=(n,t)=>{const e=sg(Xt(t),n),r=Vn(Xt(t),n);return{before:e,after:r}},Zi=Ar({menuFocused:!1,shiftKeyInMenu:!1}),Pg=()=>{const n=e=>{Zi.menuFocused=e},t=e=>{Zi.shiftKeyInMenu!==e&&(Zi.shiftKeyInMenu=e)};return{control:ie(()=>({shiftKeyInMenu:Zi.shiftKeyInMenu,menuFocused:Zi.menuFocused})),setMenuFocused:n,setShiftKey:t}},wt=Ar({monthYear:[],calendar:[],time:[],actionRow:[],selectionGrid:[],timePicker:{0:[],1:[]},monthPicker:[]}),au=he(null),mo=he(!1),ou=he(!1),lu=he(!1),uu=he(!1),hn=he(0),Ot=he(0),ls=()=>{const n=ie(()=>mo.value?[...wt.selectionGrid,wt.actionRow].filter(f=>f.length):ou.value?[...wt.timePicker[0],...wt.timePicker[1],uu.value?[]:[au.value],wt.actionRow].filter(f=>f.length):lu.value?[...wt.monthPicker,wt.actionRow]:[wt.monthYear,...wt.calendar,wt.time,wt.actionRow].filter(f=>f.length)),t=f=>{hn.value=f?hn.value+1:hn.value-1;let g=null;n.value[Ot.value]&&(g=n.value[Ot.value][hn.value]),!g&&n.value[Ot.value+(f?1:-1)]?(Ot.value=Ot.value+(f?1:-1),hn.value=f?0:n.value[Ot.value].length-1):g||(hn.value=f?hn.value-1:hn.value+1)},e=f=>{Ot.value===0&&!f||Ot.value===n.value.length&&f||(Ot.value=f?Ot.value+1:Ot.value-1,n.value[Ot.value]?n.value[Ot.value]&&!n.value[Ot.value][hn.value]&&hn.value!==0&&(hn.value=n.value[Ot.value].length-1):Ot.value=f?Ot.value-1:Ot.value+1)},r=f=>{let g=null;n.value[Ot.value]&&(g=n.value[Ot.value][hn.value]),g?g.focus({preventScroll:!mo.value}):hn.value=f?hn.value-1:hn.value+1},s=()=>{t(!0),r(!0)},i=()=>{t(!1),r(!1)},a=()=>{e(!1),r(!0)},l=()=>{e(!0),r(!0)},u=(f,g)=>{wt[g]=f},c=(f,g)=>{wt[g]=f},d=()=>{hn.value=0,Ot.value=0};return{buildMatrix:u,buildMultiLevelMatrix:c,setTimePickerBackRef:f=>{au.value=f},setSelectionGrid:f=>{mo.value=f,d(),f||(wt.selectionGrid=[])},setTimePicker:(f,g=!1)=>{ou.value=f,uu.value=g,d(),f||(wt.timePicker[0]=[],wt.timePicker[1]=[])},setTimePickerElements:(f,g=0)=>{wt.timePicker[g]=f},arrowRight:s,arrowLeft:i,arrowUp:a,arrowDown:l,clearArrowNav:()=>{wt.monthYear=[],wt.calendar=[],wt.time=[],wt.actionRow=[],wt.selectionGrid=[],wt.timePicker[0]=[],wt.timePicker[1]=[],mo.value=!1,ou.value=!1,uu.value=!1,lu.value=!1,d(),au.value=null},setMonthPicker:f=>{lu.value=f,d()},refSets:wt}},bf=n=>({menuAppearTop:"dp-menu-appear-top",menuAppearBottom:"dp-menu-appear-bottom",open:"dp-slide-down",close:"dp-slide-up",next:"calendar-next",previous:"calendar-prev",vNext:"dp-slide-up",vPrevious:"dp-slide-down",...n??{}}),mk=n=>({toggleOverlay:"Toggle overlay",menu:"Datepicker menu",input:"Datepicker input",openTimePicker:"Open time picker",closeTimePicker:"Close time Picker",incrementValue:t=>`Increment ${t}`,decrementValue:t=>`Decrement ${t}`,openTpOverlay:t=>`Open ${t} overlay`,amPmButton:"Switch AM/PM mode",openYearsOverlay:"Open years overlay",openMonthsOverlay:"Open months overlay",nextMonth:"Next month",prevMonth:"Previous month",nextYear:"Next year",prevYear:"Previous year",day:void 0,weekDay:void 0,clearInput:"Clear value",calendarIcon:"Calendar icon",timePicker:"Time picker",monthPicker:t=>`Month picker${t?" overlay":""}`,yearPicker:t=>`Year picker${t?" overlay":""}`,timeOverlay:t=>`${t} overlay`,...n??{}}),Tf=n=>n?typeof n=="boolean"?n?2:0:+n>=2?+n:2:0,pk=n=>{const t=typeof n=="object"&&n,e={static:!0,solo:!1};if(!n)return{...e,count:Tf(!1)};const r=t?n:{},s=t?r.count??!0:n,i=Tf(s);return Object.assign(e,r,{count:i})},gk=(n,t,e)=>n||(typeof e=="string"?e:t),vk=n=>typeof n=="boolean"?n?bf({}):!1:bf(n),yk=n=>{const t={enterSubmit:!0,tabSubmit:!0,openMenu:"open",selectOnFocus:!1,rangeSeparator:" - ",escClose:!0};return typeof n=="object"?{...t,...n??{},enabled:!0}:{...t,enabled:n}},_k=n=>({months:[],years:[],times:{hours:[],minutes:[],seconds:[]},...n??{}}),wk=n=>({showSelect:!0,showCancel:!0,showNow:!1,showPreview:!0,...n??{}}),bk=n=>{const t={input:!1};return typeof n=="object"?{...t,...n??{},enabled:!0}:{enabled:n,...t}},Tk=n=>({allowStopPropagation:!0,closeOnScroll:!1,modeHeight:255,allowPreventDefault:!1,closeOnClearValue:!0,closeOnAutoApply:!0,noSwipe:!1,keepActionRow:!1,onClickOutside:void 0,tabOutClosesMenu:!0,arrowLeft:void 0,keepViewOnOffsetClick:!1,timeArrowHoldThreshold:0,shadowDom:!1,mobileBreakpoint:600,setDateOnMenuClose:!1,...n??{}}),Pk=n=>{const t={dates:Array.isArray(n)?n.map(e=>fe(e)):[],years:[],months:[],quarters:[],weeks:[],weekdays:[],options:{highlightDisabled:!1}};return typeof n=="function"?n:{...t,...n??{}}},Ek=n=>typeof n=="object"?{type:(n==null?void 0:n.type)??"local",hideOnOffsetDates:(n==null?void 0:n.hideOnOffsetDates)??!1}:{type:n,hideOnOffsetDates:!1},Ak=n=>{const t={noDisabledRange:!1,showLastInRange:!0,minMaxRawRange:!1,partialRange:!0,disableTimeRangeValidation:!1,maxRange:void 0,minRange:void 0,autoRange:void 0,fixedStart:!1,fixedEnd:!1};return typeof n=="object"?{enabled:!0,...t,...n}:{enabled:n,...t}},kk=n=>n?typeof n=="string"?{timezone:n,exactMatch:!1,dateInTz:void 0,emitTimezone:void 0,convertModel:!0}:{timezone:n.timezone,exactMatch:n.exactMatch??!1,dateInTz:n.dateInTz??void 0,emitTimezone:n.emitTimezone??void 0,convertModel:n.convertModel??!0}:{timezone:void 0,exactMatch:!1,emitTimezone:void 0},cu=(n,t,e,r)=>new Map(n.map(s=>{const i=Oc(s,t,r);return[$c(i,e),i]})),Sk=(n,t)=>n.length?new Map(n.map(e=>{const r=Oc(e.date,t);return[$c(r,ii.DATE),e]})):null,Rk=n=>{var t;const e=mg(n.isMonthPicker,n.isYearPicker);return{minDate:Fu(n.minDate,n.timezone,n.isSpecific),maxDate:Fu(n.maxDate,n.timezone,n.isSpecific),disabledDates:tu(n.disabledDates)?cu(n.disabledDates,n.timezone,e,n.isSpecific):n.disabledDates,allowedDates:tu(n.allowedDates)?cu(n.allowedDates,n.timezone,e,n.isSpecific):null,highlight:typeof n.highlight=="object"&&tu((t=n.highlight)==null?void 0:t.dates)?cu(n.highlight.dates,n.timezone,e):n.highlight,markers:Sk(n.markers,n.timezone)}},Ik=n=>typeof n=="boolean"?{enabled:n,dragSelect:!0,limit:null}:{enabled:!!n,limit:n.limit?+n.limit:null,dragSelect:n.dragSelect??!0},Ck=n=>({...Object.fromEntries(Object.keys(n).map(t=>{const e=t,r=n[e],s=typeof n[e]=="string"?{[r]:!0}:Object.fromEntries(r.map(i=>[i,!0]));return[t,s]}))}),St=n=>{const t=()=>{const J=n.enableSeconds?":ss":"",k=n.enableMinutes?":mm":"";return n.is24?`HH${k}${J}`:`hh${k}${J} aa`},e=()=>{var J;return n.format?n.format:n.monthPicker?"MM/yyyy":n.timePicker?t():n.weekPicker?`${((J=S.value)==null?void 0:J.type)==="iso"?"II":"ww"}-RR`:n.yearPicker?"yyyy":n.quarterPicker?"QQQ/yyyy":n.enableTimePicker?`MM/dd/yyyy, ${t()}`:"MM/dd/yyyy"},r=J=>_g(J,n.enableSeconds),s=()=>Q.value.enabled?n.startTime&&Array.isArray(n.startTime)?[r(n.startTime[0]),r(n.startTime[1])]:null:n.startTime&&!Array.isArray(n.startTime)?r(n.startTime):null,i=ie(()=>pk(n.multiCalendars)),a=ie(()=>s()),l=ie(()=>mk(n.ariaLabels)),u=ie(()=>_k(n.filters)),c=ie(()=>vk(n.transitions)),d=ie(()=>wk(n.actionRow)),f=ie(()=>gk(n.previewFormat,n.format,e())),g=ie(()=>yk(n.textInput)),b=ie(()=>bk(n.inline)),v=ie(()=>Tk(n.config)),A=ie(()=>Pk(n.highlight)),S=ie(()=>Ek(n.weekNumbers)),F=ie(()=>kk(n.timezone)),q=ie(()=>Ik(n.multiDates)),B=ie(()=>Rk({minDate:n.minDate,maxDate:n.maxDate,disabledDates:n.disabledDates,allowedDates:n.allowedDates,highlight:A.value,markers:n.markers,timezone:F.value,isSpecific:n.monthPicker||n.yearPicker||n.quarterPicker,isMonthPicker:n.monthPicker,isYearPicker:n.yearPicker})),Q=ie(()=>Ak(n.range)),se=ie(()=>Ck(n.ui));return{defaultedTransitions:c,defaultedMultiCalendars:i,defaultedStartTime:a,defaultedAriaLabels:l,defaultedFilters:u,defaultedActionRow:d,defaultedPreviewFormat:f,defaultedTextInput:g,defaultedInline:b,defaultedConfig:v,defaultedHighlight:A,defaultedWeekNumbers:S,defaultedRange:Q,propDates:B,defaultedTz:F,defaultedMultiDates:q,defaultedUI:se,getDefaultPattern:e,getDefaultStartTime:s,handleEventPropagation:J=>{v.value.allowStopPropagation&&J.stopPropagation(),v.value.allowPreventDefault&&J.preventDefault()}}},xk=(n,t,e)=>{const r=he(),{defaultedTextInput:s,defaultedRange:i,defaultedTz:a,defaultedMultiDates:l,getDefaultPattern:u}=St(t),c=he(""),d=ya(t,"format"),f=ya(t,"formatLocale");qt(r,()=>{typeof t.onInternalModelChange=="function"&&n("internal-model-change",r.value,te(!0))},{deep:!0}),qt(i,(p,U)=>{p.enabled!==U.enabled&&(r.value=null)}),qt(d,()=>{X()});const g=p=>a.value.timezone&&a.value.convertModel?Rn(p,a.value.timezone):p,b=p=>{if(a.value.timezone&&a.value.convertModel){const U=GA(a.value.timezone,p);return HP(p,U)}return p},v=(p,U,le=!1)=>bg(p,t.format,t.formatLocale,s.value.rangeSeparator,t.modelAuto,U??u(),le),A=p=>p?t.modelType?R(p):{hours:br(p),minutes:es(p),seconds:t.enableSeconds?hi(p):0}:null,S=p=>t.modelType?R(p):{month:Je(p),year:je(p)},F=p=>Array.isArray(p)?l.value.enabled?p.map(U=>q(U,nr(fe(),U))):fo(()=>[nr(fe(),p[0]),p[1]?nr(fe(),p[1]):Gs(i.value.partialRange)],i.value.enabled):nr(fe(),+p),q=(p,U)=>(typeof p=="string"||typeof p=="number")&&t.modelType?H(p):U,B=p=>Array.isArray(p)?[q(p[0],zr(null,+p[0].hours,+p[0].minutes,p[0].seconds)),q(p[1],zr(null,+p[1].hours,+p[1].minutes,p[1].seconds))]:q(p,zr(null,p.hours,p.minutes,p.seconds)),Q=p=>{const U=ht(fe(),{date:1});return Array.isArray(p)?l.value.enabled?p.map(le=>q(le,vr(U,+le.month,+le.year))):fo(()=>[q(p[0],vr(U,+p[0].month,+p[0].year)),q(p[1],p[1]?vr(U,+p[1].month,+p[1].year):Gs(i.value.partialRange))],i.value.enabled):q(p,vr(U,+p.month,+p.year))},se=p=>{if(Array.isArray(p))return p.map(U=>H(U));throw new Error(Nc.dateArr("multi-dates"))},J=p=>{if(Array.isArray(p)&&i.value.enabled){const U=p[0],le=p[1];return[fe(Array.isArray(U)?U[0]:null),Array.isArray(le)&&le.length?fe(le[0]):null]}return fe(p[0])},k=p=>t.modelAuto?Array.isArray(p)?[H(p[0]),H(p[1])]:t.autoApply?[H(p)]:[H(p),null]:Array.isArray(p)?fo(()=>p[1]?[H(p[0]),p[1]?H(p[1]):Gs(i.value.partialRange)]:[H(p[0])],i.value.enabled):H(p),y=()=>{Array.isArray(r.value)&&i.value.enabled&&r.value.length===1&&r.value.push(Gs(i.value.partialRange))},_=()=>{const p=r.value;return[R(p[0]),p[1]?R(p[1]):Gs(i.value.partialRange)]},T=()=>Array.isArray(r.value)?r.value[1]?_():R(Wt(r.value[0])):[],I=()=>(r.value||[]).map(p=>R(p)),O=(p=!1)=>(p||y(),t.modelAuto?T():l.value.enabled?I():Array.isArray(r.value)?fo(()=>_(),i.value.enabled):R(Wt(r.value))),x=p=>!p||Array.isArray(p)&&!p.length?null:t.timePicker?B(Wt(p)):t.monthPicker?Q(Wt(p)):t.yearPicker?F(Wt(p)):l.value.enabled?se(Wt(p)):t.weekPicker?J(Wt(p)):k(Wt(p)),V=p=>{const U=x(p);Bu(Wt(U))?(r.value=Wt(U),X()):(r.value=null,c.value="")},N=()=>{const p=U=>rr(U,s.value.format);return`${p(r.value[0])} ${s.value.rangeSeparator} ${r.value[1]?p(r.value[1]):""}`},D=()=>e.value&&r.value?Array.isArray(r.value)?N():rr(r.value,s.value.format):v(r.value),z=()=>r.value?l.value.enabled?r.value.map(p=>v(p)).join("; "):s.value.enabled&&typeof s.value.format=="string"?D():v(r.value):"",X=()=>{!t.format||typeof t.format=="string"||s.value.enabled&&typeof s.value.format=="string"?c.value=z():c.value=t.format(r.value)},H=p=>{if(t.utc){const U=new Date(p);return t.utc==="preserve"?new Date(U.getTime()+U.getTimezoneOffset()*6e4):U}return t.modelType?QA.includes(t.modelType)?g(new Date(p)):t.modelType==="format"&&(typeof t.format=="string"||!t.format)?g($u(p,u(),new Date,{locale:f.value})):g($u(p,t.modelType,new Date,{locale:f.value})):g(new Date(p))},R=p=>p?t.utc?ok(p,t.utc==="preserve",t.enableSeconds):t.modelType?t.modelType==="timestamp"?+b(p):t.modelType==="iso"?b(p).toISOString():t.modelType==="format"&&(typeof t.format=="string"||!t.format)?v(b(p)):v(b(p),t.modelType,!0):b(p):"",w=(p,U=!1,le=!1)=>{if(le)return p;if(n("update:model-value",p),a.value.emitTimezone&&U){const Ae=Array.isArray(p)?p.map(Y=>Rn(Wt(Y),a.value.emitTimezone)):Rn(Wt(p),a.value.emitTimezone);n("update:model-timezone-value",Ae)}},ee=p=>Array.isArray(r.value)?l.value.enabled?r.value.map(U=>p(U)):[p(r.value[0]),r.value[1]?p(r.value[1]):Gs(i.value.partialRange)]:p(Wt(r.value)),M=()=>{if(Array.isArray(r.value)){const p=gr(r.value[0],t.weekStart),U=r.value[1]?gr(r.value[1],t.weekStart):[];return[p.map(le=>fe(le)),U.map(le=>fe(le))]}return gr(r.value,t.weekStart).map(p=>fe(p))},L=(p,U)=>w(Wt(ee(p)),!1,U),j=p=>{const U=M();return p?U:n("update:model-value",M())},te=(p=!1)=>(p||X(),t.monthPicker?L(S,p):t.timePicker?L(A,p):t.yearPicker?L(je,p):t.weekPicker?j(p):w(O(p),!0,p));return{inputValue:c,internalModelValue:r,checkBeforeEmit:()=>r.value?i.value.enabled?i.value.partialRange?r.value.length>=1:r.value.length===2:!!r.value:!1,parseExternalModelValue:V,formatInputValue:X,emitModelValue:te}},Mk=(n,t)=>{const{defaultedFilters:e,propDates:r}=St(n),{validateMonthYearInRange:s}=us(n),i=(d,f)=>{let g=d;return e.value.months.includes(Je(g))?(g=f?Hn(d,1):fi(d,1),i(g,f)):g},a=(d,f)=>{let g=d;return e.value.years.includes(je(g))?(g=f?Pc(d,1):lg(d,1),a(g,f)):g},l=(d,f=!1)=>{const g=ht(fe(),{month:n.month,year:n.year});let b=d?Hn(g,1):fi(g,1);n.disableYearSelect&&(b=nr(b,n.year));let v=Je(b),A=je(b);e.value.months.includes(v)&&(b=i(b,d),v=Je(b),A=je(b)),e.value.years.includes(A)&&(b=a(b,d),A=je(b)),s(v,A,d,n.preventMinMaxNavigation)&&u(v,A,f)},u=(d,f,g)=>{t("update-month-year",{month:d,year:f,fromNav:g})},c=ie(()=>d=>wg(ht(fe(),{month:n.month,year:n.year}),r.value.maxDate,r.value.minDate,n.preventMinMaxNavigation,d));return{handleMonthYearChange:l,isDisabled:c,updateMonthYear:u}},hl={multiCalendars:{type:[Boolean,Number,String,Object],default:void 0},modelValue:{type:[String,Date,Array,Object,Number],default:null},modelType:{type:String,default:null},position:{type:String,default:"center"},dark:{type:Boolean,default:!1},format:{type:[String,Function],default:()=>null},autoPosition:{type:[Boolean,String],default:!0},altPosition:{type:Function,default:null},transitions:{type:[Boolean,Object],default:!0},formatLocale:{type:Object,default:null},utc:{type:[Boolean,String],default:!1},ariaLabels:{type:Object,default:()=>({})},offset:{type:[Number,String],default:10},hideNavigation:{type:Array,default:()=>[]},timezone:{type:[String,Object],default:null},vertical:{type:Boolean,default:!1},disableMonthYearSelect:{type:Boolean,default:!1},disableYearSelect:{type:Boolean,default:!1},dayClass:{type:Function,default:null},yearRange:{type:Array,default:()=>[1900,2100]},enableTimePicker:{type:Boolean,default:!0},autoApply:{type:Boolean,default:!1},disabledDates:{type:[Array,Function],default:()=>[]},monthNameFormat:{type:String,default:"short"},startDate:{type:[Date,String],default:null},startTime:{type:[Object,Array],default:null},hideOffsetDates:{type:Boolean,default:!1},noToday:{type:Boolean,default:!1},disabledWeekDays:{type:Array,default:()=>[]},allowedDates:{type:Array,default:null},nowButtonLabel:{type:String,default:"Now"},markers:{type:Array,default:()=>[]},escClose:{type:Boolean,default:!0},spaceConfirm:{type:Boolean,default:!0},monthChangeOnArrows:{type:Boolean,default:!0},presetDates:{type:Array,default:()=>[]},flow:{type:Array,default:()=>[]},partialFlow:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},reverseYears:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},arrowNavigation:{type:Boolean,default:!1},highlight:{type:[Function,Object],default:null},teleport:{type:[Boolean,String,Object],default:null},teleportCenter:{type:Boolean,default:!1},locale:{type:String,default:"en-Us"},weekNumName:{type:String,default:"W"},weekStart:{type:[Number,String],default:1},weekNumbers:{type:[String,Function,Object],default:null},monthChangeOnScroll:{type:[Boolean,String],default:!0},dayNames:{type:[Function,Array],default:null},monthPicker:{type:Boolean,default:!1},customProps:{type:Object,default:null},yearPicker:{type:Boolean,default:!1},modelAuto:{type:Boolean,default:!1},selectText:{type:String,default:"Select"},cancelText:{type:String,default:"Cancel"},previewFormat:{type:[String,Function],default:()=>""},multiDates:{type:[Object,Boolean],default:!1},ignoreTimeValidation:{type:Boolean,default:!1},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},minTime:{type:Object,default:null},maxTime:{type:Object,default:null},name:{type:String,default:null},placeholder:{type:String,default:""},hideInputIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},alwaysClearable:{type:Boolean,default:!1},state:{type:Boolean,default:null},required:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},timePicker:{type:Boolean,default:!1},enableSeconds:{type:Boolean,default:!1},is24:{type:Boolean,default:!0},noHoursOverlay:{type:Boolean,default:!1},noMinutesOverlay:{type:Boolean,default:!1},noSecondsOverlay:{type:Boolean,default:!1},hoursGridIncrement:{type:[String,Number],default:1},minutesGridIncrement:{type:[String,Number],default:5},secondsGridIncrement:{type:[String,Number],default:5},hoursIncrement:{type:[Number,String],default:1},minutesIncrement:{type:[Number,String],default:1},secondsIncrement:{type:[Number,String],default:1},range:{type:[Boolean,Object],default:!1},uid:{type:String,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inline:{type:[Boolean,Object],default:!1},textInput:{type:[Boolean,Object],default:!1},sixWeeks:{type:[Boolean,String],default:!1},actionRow:{type:Object,default:()=>({})},focusStartDate:{type:Boolean,default:!1},disabledTimes:{type:[Function,Array],default:void 0},timePickerInline:{type:Boolean,default:!1},calendar:{type:Function,default:null},config:{type:Object,default:void 0},quarterPicker:{type:Boolean,default:!1},yearFirst:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onInternalModelChange:{type:[Function,Object],default:null},enableMinutes:{type:Boolean,default:!0},ui:{type:Object,default:()=>({})}},Qn={...hl,shadow:{type:Boolean,default:!1},flowStep:{type:Number,default:0},internalModelValue:{type:[Date,Array],default:null},noOverlayFocus:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},menuWrapRef:{type:Object,default:null},getInputRect:{type:Function,default:()=>({})},isTextInputDate:{type:Boolean,default:!1},isMobile:{type:Boolean,default:void 0}},Dk=["title"],Ok=["disabled"],Vk=vt({compatConfig:{MODE:3},__name:"ActionRow",props:{menuMount:{type:Boolean,default:!1},calendarWidth:{type:Number,default:0},...Qn},emits:["close-picker","select-date","select-now","invalid-select"],setup(n,{emit:t}){const e=t,r=n,{defaultedActionRow:s,defaultedPreviewFormat:i,defaultedMultiCalendars:a,defaultedTextInput:l,defaultedInline:u,defaultedRange:c,defaultedMultiDates:d}=St(r),{isTimeValid:f,isMonthValid:g}=us(r),{buildMatrix:b}=ls(),v=he(null),A=he(null),S=he(!1),F=he({}),q=he(null),B=he(null);Zt(()=>{r.arrowNavigation&&b([Ut(v),Ut(A)],"actionRow"),Q(),window.addEventListener("resize",Q)}),Pi(()=>{window.removeEventListener("resize",Q)});const Q=()=>{S.value=!1,setTimeout(()=>{var V,N;const D=(V=q.value)==null?void 0:V.getBoundingClientRect(),z=(N=B.value)==null?void 0:N.getBoundingClientRect();D&&z&&(F.value.maxWidth=`${z.width-D.width-20}px`),S.value=!0},0)},se=ie(()=>c.value.enabled&&!c.value.partialRange&&r.internalModelValue?r.internalModelValue.length===2:!0),J=ie(()=>!f.value(r.internalModelValue)||!g.value(r.internalModelValue)||!se.value),k=()=>{const V=i.value;return r.timePicker||r.monthPicker,V(Wt(r.internalModelValue))},y=()=>{const V=r.internalModelValue;return a.value.count>0?`${_(V[0])} - ${_(V[1])}`:[_(V[0]),_(V[1])]},_=V=>bg(V,i.value,r.formatLocale,l.value.rangeSeparator,r.modelAuto,i.value),T=ie(()=>!r.internalModelValue||!r.menuMount?"":typeof i.value=="string"?Array.isArray(r.internalModelValue)?r.internalModelValue.length===2&&r.internalModelValue[1]?y():d.value.enabled?r.internalModelValue.map(V=>`${_(V)}`):r.modelAuto?`${_(r.internalModelValue[0])}`:`${_(r.internalModelValue[0])} -`:_(r.internalModelValue):k()),I=()=>d.value.enabled?"; ":" - ",O=ie(()=>Array.isArray(T.value)?T.value.join(I()):T.value),x=()=>{f.value(r.internalModelValue)&&g.value(r.internalModelValue)&&se.value?e("select-date"):e("invalid-select")};return(V,N)=>(W(),re("div",{ref_key:"actionRowRef",ref:B,class:"dp__action_row"},[V.$slots["action-row"]?Ee(V.$slots,"action-row",Gt(kt({key:0},{internalModelValue:V.internalModelValue,disabled:J.value,selectDate:()=>V.$emit("select-date"),closePicker:()=>V.$emit("close-picker")}))):(W(),re(He,{key:1},[P(s).showPreview?(W(),re("div",{key:0,class:"dp__selection_preview",title:O.value,style:kn(F.value)},[V.$slots["action-preview"]&&S.value?Ee(V.$slots,"action-preview",{key:0,value:V.internalModelValue}):de("",!0),!V.$slots["action-preview"]&&S.value?(W(),re(He,{key:1},[Fn($t(O.value),1)],64)):de("",!0)],12,Dk)):de("",!0),Se("div",{ref_key:"actionBtnContainer",ref:q,class:"dp__action_buttons","data-dp-element":"action-row"},[V.$slots["action-buttons"]?Ee(V.$slots,"action-buttons",{key:0,value:V.internalModelValue}):de("",!0),V.$slots["action-buttons"]?de("",!0):(W(),re(He,{key:1},[!P(u).enabled&&P(s).showCancel?(W(),re("button",{key:0,ref_key:"cancelButtonRef",ref:v,type:"button",class:"dp__action_button dp__action_cancel",onClick:N[0]||(N[0]=D=>V.$emit("close-picker")),onKeydown:N[1]||(N[1]=D=>P(Tn)(D,()=>V.$emit("close-picker")))},$t(V.cancelText),545)):de("",!0),P(s).showNow?(W(),re("button",{key:1,type:"button",class:"dp__action_button dp__action_cancel",onClick:N[2]||(N[2]=D=>V.$emit("select-now")),onKeydown:N[3]||(N[3]=D=>P(Tn)(D,()=>V.$emit("select-now")))},$t(V.nowButtonLabel),33)):de("",!0),P(s).showSelect?(W(),re("button",{key:2,ref_key:"selectButtonRef",ref:A,type:"button",class:"dp__action_button dp__action_select",disabled:J.value,"data-test-id":"select-button",onKeydown:N[4]||(N[4]=D=>P(Tn)(D,()=>x())),onClick:x},$t(V.selectText),41,Ok)):de("",!0)],64))],512)],64))],512))}}),Nk=["role","aria-label","tabindex"],$k={class:"dp__selection_grid_header"},Fk=["aria-selected","aria-disabled","data-test-id","onClick","onKeydown","onMouseover"],Lk=["aria-label"],ja=vt({__name:"SelectionOverlay",props:{items:{},type:{},isLast:{type:Boolean},arrowNavigation:{type:Boolean},skipButtonRef:{type:Boolean},headerRefs:{},hideNavigation:{},escClose:{type:Boolean},useRelative:{type:Boolean},height:{},textInput:{type:[Boolean,Object]},config:{},noOverlayFocus:{type:Boolean},focusValue:{},menuWrapRef:{},ariaLabels:{},overlayLabel:{}},emits:["selected","toggle","reset-flow","hover-value"],setup(n,{expose:t,emit:e}){const{setSelectionGrid:r,buildMultiLevelMatrix:s,setMonthPicker:i}=ls(),a=e,l=n,{defaultedAriaLabels:u,defaultedTextInput:c,defaultedConfig:d,handleEventPropagation:f}=St(l),{hideNavigationButtons:g}=ml(),b=he(!1),v=he(null),A=he(null),S=he([]),F=he(),q=he(null),B=he(0),Q=he(null);r_(()=>{v.value=null}),Zt(()=>{vn().then(()=>O()),l.noOverlayFocus||J(),se(!0)}),Pi(()=>se(!1));const se=M=>{var L;l.arrowNavigation&&((L=l.headerRefs)!=null&&L.length?i(M):r(M))},J=()=>{var M;const L=Ut(A);L&&(c.value.enabled||(v.value?(M=v.value)==null||M.focus({preventScroll:!0}):L.focus({preventScroll:!0})),b.value=L.clientHeight<L.scrollHeight)},k=ie(()=>({dp__overlay:!0,"dp--overlay-absolute":!l.useRelative,"dp--overlay-relative":l.useRelative})),y=ie(()=>l.useRelative?{height:`${l.height}px`,width:"var(--dp-menu-min-width)"}:void 0),_=ie(()=>({dp__overlay_col:!0})),T=ie(()=>({dp__btn:!0,dp__button:!0,dp__overlay_action:!0,dp__over_action_scroll:b.value,dp__button_bottom:l.isLast})),I=ie(()=>{var M,L;return{dp__overlay_container:!0,dp__container_flex:((M=l.items)==null?void 0:M.length)<=6,dp__container_block:((L=l.items)==null?void 0:L.length)>6}});qt(()=>l.items,()=>O(!1),{deep:!0});const O=(M=!0)=>{vn().then(()=>{const L=Ut(v),j=Ut(A),te=Ut(q),p=Ut(Q),U=te?te.getBoundingClientRect().height:0;j&&(j.getBoundingClientRect().height?B.value=j.getBoundingClientRect().height-U:B.value=d.value.modeHeight-U),L&&p&&M&&(p.scrollTop=L.offsetTop-p.offsetTop-(B.value/2-L.getBoundingClientRect().height)-U)})},x=M=>{M.disabled||a("selected",M.value)},V=()=>{a("toggle"),a("reset-flow")},N=M=>{l.escClose&&(V(),f(M))},D=(M,L,j,te)=>{M&&((L.active||L.value===l.focusValue)&&(v.value=M),l.arrowNavigation&&(Array.isArray(S.value[j])?S.value[j][te]=M:S.value[j]=[M],z()))},z=()=>{var M,L;const j=(M=l.headerRefs)!=null&&M.length?[l.headerRefs].concat(S.value):S.value.concat([l.skipButtonRef?[]:[q.value]]);s(Wt(j),(L=l.headerRefs)!=null&&L.length?"monthPicker":"selectionGrid")},X=M=>{l.arrowNavigation||jr(M,d.value,!0)},H=M=>{F.value=M,a("hover-value",M)},R=()=>{if(V(),!l.isLast){const M=Lu(l.menuWrapRef??null,"action-row");if(M){const L=dg(M);L==null||L.focus()}}},w=M=>{switch(M.key){case Tt.esc:return N(M);case Tt.arrowLeft:return X(M);case Tt.arrowRight:return X(M);case Tt.arrowUp:return X(M);case Tt.arrowDown:return X(M);default:return}},ee=M=>{if(M.key===Tt.enter)return V();if(M.key===Tt.tab)return R()};return t({focusGrid:J}),(M,L)=>{var j;return W(),re("div",{ref_key:"gridWrapRef",ref:A,class:Fe(k.value),style:kn(y.value),role:M.useRelative?void 0:"dialog","aria-label":M.overlayLabel,tabindex:M.useRelative?void 0:"0",onKeydown:w,onClick:L[0]||(L[0]=_a(()=>{},["prevent"]))},[Se("div",{ref_key:"containerRef",ref:Q,class:Fe(I.value),style:kn({"--dp-overlay-height":`${B.value}px`}),role:"grid"},[Se("div",$k,[Ee(M.$slots,"header")]),M.$slots.overlay?Ee(M.$slots,"overlay",{key:0}):(W(!0),re(He,{key:1},pt(M.items,(te,p)=>(W(),re("div",{key:p,class:Fe(["dp__overlay_row",{dp__flex_row:M.items.length>=3}]),role:"row"},[(W(!0),re(He,null,pt(te,(U,le)=>(W(),re("div",{key:U.value,ref_for:!0,ref:Ae=>D(Ae,U,p,le),role:"gridcell",class:Fe(_.value),"aria-selected":U.active||void 0,"aria-disabled":U.disabled||void 0,tabindex:"0","data-test-id":U.text,onClick:_a(Ae=>x(U),["prevent"]),onKeydown:Ae=>P(Tn)(Ae,()=>x(U),!0),onMouseover:Ae=>H(U.value)},[Se("div",{class:Fe(U.className)},[M.$slots.item?Ee(M.$slots,"item",{key:0,item:U}):de("",!0),M.$slots.item?de("",!0):(W(),re(He,{key:1},[Fn($t(U.text),1)],64))],2)],42,Fk))),128))],2))),128))],6),M.$slots["button-icon"]?Br((W(),re("button",{key:0,ref_key:"toggleButton",ref:q,type:"button","aria-label":(j=P(u))==null?void 0:j.toggleOverlay,class:Fe(T.value),tabindex:"0",onClick:V,onKeydown:ee},[Ee(M.$slots,"button-icon")],42,Lk)),[[To,!P(g)(M.hideNavigation,M.type)]]):de("",!0)],46,Nk)}}}),Bk=["data-dp-mobile"],dl=vt({__name:"InstanceWrap",props:{multiCalendars:{},stretch:{type:Boolean},collapse:{type:Boolean},isMobile:{type:Boolean}},setup(n){const t=n,e=ie(()=>t.multiCalendars>0?[...Array(t.multiCalendars).keys()]:[0]),r=ie(()=>({dp__instance_calendar:t.multiCalendars>0}));return(s,i)=>(W(),re("div",{class:Fe({dp__menu_inner:!s.stretch,"dp--menu--inner-stretched":s.stretch,dp__flex_display:s.multiCalendars>0,"dp--flex-display-collapsed":s.collapse}),"data-dp-mobile":s.isMobile},[(W(!0),re(He,null,pt(e.value,(a,l)=>(W(),re("div",{key:a,class:Fe(r.value)},[Ee(s.$slots,"default",{instance:a,index:l})],2))),128))],10,Bk))}}),Uk=["data-dp-element","aria-label","aria-disabled"],ha=vt({compatConfig:{MODE:3},__name:"ArrowBtn",props:{ariaLabel:{},elName:{},disabled:{type:Boolean}},emits:["activate","set-ref"],setup(n,{emit:t}){const e=t,r=he(null);return Zt(()=>e("set-ref",r)),(s,i)=>(W(),re("button",{ref_key:"elRef",ref:r,type:"button","data-dp-element":s.elName,class:"dp__btn dp--arrow-btn-nav",tabindex:"0","aria-label":s.ariaLabel,"aria-disabled":s.disabled||void 0,onClick:i[0]||(i[0]=a=>s.$emit("activate")),onKeydown:i[1]||(i[1]=a=>P(Tn)(a,()=>s.$emit("activate"),!0))},[Se("span",{class:Fe(["dp__inner_nav",{dp__inner_nav_disabled:s.disabled}])},[Ee(s.$slots,"default")],2)],40,Uk))}}),qk=["aria-label","data-test-id"],Eg=vt({__name:"YearModePicker",props:{...Qn,showYearPicker:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},instance:{type:Number,default:0},year:{type:Number,default:0},isDisabled:{type:Function,default:()=>!1}},emits:["toggle-year-picker","year-select","handle-year"],setup(n,{emit:t}){const e=t,r=n,{showRightIcon:s,showLeftIcon:i}=ml(),{defaultedConfig:a,defaultedMultiCalendars:l,defaultedAriaLabels:u,defaultedTransitions:c,defaultedUI:d}=St(r),{showTransition:f,transitionName:g}=za(c),b=he(!1),v=(F=!1,q)=>{b.value=!b.value,e("toggle-year-picker",{flow:F,show:q})},A=F=>{b.value=!1,e("year-select",F)},S=(F=!1)=>{e("handle-year",F)};return(F,q)=>{var B,Q,se,J,k;return W(),re(He,null,[Se("div",{class:Fe(["dp--year-mode-picker",{"dp--hidden-el":b.value}])},[P(i)(P(l),n.instance)?(W(),et(ha,{key:0,ref:"mpPrevIconRef","aria-label":(B=P(u))==null?void 0:B.prevYear,disabled:n.isDisabled(!1),class:Fe((Q=P(d))==null?void 0:Q.navBtnPrev),onActivate:q[0]||(q[0]=y=>S(!1))},{default:De(()=>[F.$slots["arrow-left"]?Ee(F.$slots,"arrow-left",{key:0}):de("",!0),F.$slots["arrow-left"]?de("",!0):(W(),et(P(Ic),{key:1}))]),_:3},8,["aria-label","disabled","class"])):de("",!0),Se("button",{ref:"mpYearButtonRef",class:"dp__btn dp--year-select",type:"button","aria-label":`${n.year}-${(se=P(u))==null?void 0:se.openYearsOverlay}`,"data-test-id":`year-mode-btn-${n.instance}`,onClick:q[1]||(q[1]=()=>v(!1)),onKeydown:q[2]||(q[2]=s_(()=>v(!1),["enter"]))},[F.$slots.year?Ee(F.$slots,"year",{key:0,year:n.year}):de("",!0),F.$slots.year?de("",!0):(W(),re(He,{key:1},[Fn($t(n.year),1)],64))],40,qk),P(s)(P(l),n.instance)?(W(),et(ha,{key:1,ref:"mpNextIconRef","aria-label":(J=P(u))==null?void 0:J.nextYear,disabled:n.isDisabled(!0),class:Fe((k=P(d))==null?void 0:k.navBtnNext),onActivate:q[3]||(q[3]=y=>S(!0))},{default:De(()=>[F.$slots["arrow-right"]?Ee(F.$slots,"arrow-right",{key:0}):de("",!0),F.$slots["arrow-right"]?de("",!0):(W(),et(P(Cc),{key:1}))]),_:3},8,["aria-label","disabled","class"])):de("",!0)],2),$e(Qr,{name:P(g)(n.showYearPicker),css:P(f)},{default:De(()=>{var y,_;return[n.showYearPicker?(W(),et(ja,{key:0,items:n.items,"text-input":F.textInput,"esc-close":F.escClose,config:F.config,"is-last":F.autoApply&&!P(a).keepActionRow,"hide-navigation":F.hideNavigation,"aria-labels":F.ariaLabels,"overlay-label":(_=(y=P(u))==null?void 0:y.yearPicker)==null?void 0:_.call(y,!0),type:"year",onToggle:v,onSelected:q[4]||(q[4]=T=>A(T))},gn({"button-icon":De(()=>[F.$slots["calendar-icon"]?Ee(F.$slots,"calendar-icon",{key:0}):de("",!0),F.$slots["calendar-icon"]?de("",!0):(W(),et(P(Si),{key:1}))]),_:2},[F.$slots["year-overlay-value"]?{name:"item",fn:De(({item:T})=>[Ee(F.$slots,"year-overlay-value",{text:T.text,value:T.value})]),key:"0"}:void 0]),1032,["items","text-input","esc-close","config","is-last","hide-navigation","aria-labels","overlay-label"])):de("",!0)]}),_:3},8,["name","css"])],64)}}}),Lc=(n,t,e)=>{if(t.value&&Array.isArray(t.value))if(t.value.some(r=>Xe(n,r))){const r=t.value.filter(s=>!Xe(s,n));t.value=r.length?r:null}else(e&&+e>t.value.length||!e)&&t.value.push(n);else t.value=[n]},Bc=(n,t,e)=>{let r=n.value?n.value.slice():[];return r.length===2&&r[1]!==null&&(r=[]),r.length?(xt(t,r[0])?r.unshift(t):r[1]=t,e("range-end",t)):(r=[t],e("range-start",t)),r},fl=(n,t,e,r)=>{n&&(n[0]&&n[1]&&e&&t("auto-apply"),n[0]&&!n[1]&&r&&e&&t("auto-apply"))},Ag=n=>{Array.isArray(n.value)&&n.value.length<=2&&n.range?n.modelValue.value=n.value.map(t=>Rn(fe(t),n.timezone)):Array.isArray(n.value)||(n.modelValue.value=Rn(fe(n.value),n.timezone))},kg=(n,t,e,r)=>Array.isArray(t.value)&&(t.value.length===2||t.value.length===1&&r.value.partialRange)?r.value.fixedStart&&(Vt(n,t.value[0])||Xe(n,t.value[0]))?[t.value[0],n]:r.value.fixedEnd&&(xt(n,t.value[1])||Xe(n,t.value[1]))?[n,t.value[1]]:(e("invalid-fixed-range",n),t.value):[],Sg=({multiCalendars:n,range:t,highlight:e,propDates:r,calendars:s,modelValue:i,props:a,filters:l,year:u,month:c,emit:d})=>{const f=ie(()=>Vc(a.yearRange,a.locale,a.reverseYears)),g=he([!1]),b=ie(()=>(T,I)=>{const O=ht(zn(new Date),{month:c.value(T),year:u.value(T)}),x=I?Kp(O):Ca(O);return wg(x,r.value.maxDate,r.value.minDate,a.preventMinMaxNavigation,I)}),v=()=>Array.isArray(i.value)&&n.value.solo&&i.value[1],A=()=>{for(let T=0;T<n.value.count;T++)if(T===0)s.value[T]=s.value[0];else if(T===n.value.count-1&&v())s.value[T]={month:Je(i.value[1]),year:je(i.value[1])};else{const I=ht(fe(),s.value[T-1]);s.value[T]={month:Je(I),year:je(Pc(I,1))}}},S=T=>{if(!T)return A();const I=ht(fe(),s.value[T]);return s.value[0].year=je(lg(I,n.value.count-1)),A()},F=(T,I)=>{const O=JP(I,T);return t.value.showLastInRange&&O>1?I:T},q=T=>a.focusStartDate||n.value.solo?T[0]:T[1]?F(T[0],T[1]):T[0],B=()=>{if(i.value){const T=Array.isArray(i.value)?q(i.value):i.value;s.value[0]={month:Je(T),year:je(T)}}},Q=()=>{B(),n.value.count&&A()};qt(i,(T,I)=>{a.isTextInputDate&&JSON.stringify(T??{})!==JSON.stringify(I??{})&&Q()}),Zt(()=>{Q()});const se=(T,I)=>{s.value[I].year=T,d("update-month-year",{instance:I,year:T,month:s.value[I].month}),n.value.count&&!n.value.solo&&S(I)},J=ie(()=>T=>mi(f.value,I=>{var O;const x=u.value(T)===I.value,V=xa(I.value,pi(r.value.minDate),pi(r.value.maxDate))||((O=l.value.years)==null?void 0:O.includes(u.value(T))),N=Fc(e.value,I.value);return{active:x,disabled:V,highlighted:N}})),k=(T,I)=>{se(T,I),_(I)},y=(T,I=!1)=>{if(!b.value(T,I)){const O=I?u.value(T)+1:u.value(T)-1;se(O,T)}},_=(T,I=!1,O)=>{I||d("reset-flow"),O!==void 0?g.value[T]=O:g.value[T]=!g.value[T],g.value[T]?d("overlay-toggle",{open:!0,overlay:mn.year}):(d("overlay-closed"),d("overlay-toggle",{open:!1,overlay:mn.year}))};return{isDisabled:b,groupedYears:J,showYearPicker:g,selectYear:se,toggleYearPicker:_,handleYearSelect:k,handleYear:y}},jk=(n,t)=>{const{defaultedMultiCalendars:e,defaultedAriaLabels:r,defaultedTransitions:s,defaultedConfig:i,defaultedRange:a,defaultedHighlight:l,propDates:u,defaultedTz:c,defaultedFilters:d,defaultedMultiDates:f}=St(n),g=()=>{n.isTextInputDate&&Q(je(fe(n.startDate)),0)},{modelValue:b,year:v,month:A,calendars:S}=Ya(n,t,g),F=ie(()=>cg(n.formatLocale,n.locale,n.monthNameFormat)),q=he(null),{checkMinMaxRange:B}=us(n),{selectYear:Q,groupedYears:se,showYearPicker:J,toggleYearPicker:k,handleYearSelect:y,handleYear:_,isDisabled:T}=Sg({modelValue:b,multiCalendars:e,range:a,highlight:l,calendars:S,year:v,propDates:u,month:A,filters:d,props:n,emit:t});Zt(()=>{n.startDate&&(b.value&&n.focusStartDate||!b.value)&&Q(je(fe(n.startDate)),0)});const I=L=>L?{month:Je(L),year:je(L)}:{month:null,year:null},O=()=>b.value?Array.isArray(b.value)?b.value.map(L=>I(L)):I(b.value):I(),x=(L,j)=>{const te=S.value[L],p=O();return Array.isArray(p)?p.some(U=>U.year===(te==null?void 0:te.year)&&U.month===j):(te==null?void 0:te.year)===p.year&&j===p.month},V=(L,j,te)=>{var p,U;const le=O();return Array.isArray(le)?v.value(j)===((p=le[te])==null?void 0:p.year)&&L===((U=le[te])==null?void 0:U.month):!1},N=(L,j)=>{if(a.value.enabled){const te=O();if(Array.isArray(b.value)&&Array.isArray(te)){const p=V(L,j,0)||V(L,j,1),U=vr(zn(fe()),L,v.value(j));return Ma(b.value,q.value,U)&&!p}return!1}return!1},D=ie(()=>L=>mi(F.value,j=>{var te;const p=x(L,j.value),U=xa(j.value,gg(v.value(L),u.value.minDate),vg(v.value(L),u.value.maxDate))||dk(u.value.disabledDates,v.value(L),j.value)||((te=d.value.months)==null?void 0:te.includes(j.value))||!fk(u.value.allowedDates,v.value(L),j.value),le=N(j.value,L),Ae=Tg(l.value,j.value,v.value(L));return{active:p,disabled:U,isBetween:le,highlighted:Ae}})),z=(L,j)=>vr(zn(fe()),L,v.value(j)),X=(L,j)=>{const te=b.value?b.value:zn(new Date);b.value=vr(te,L,v.value(j)),t("auto-apply"),t("update-flow-step")},H=(L,j)=>{const te=z(L,j);a.value.fixedEnd||a.value.fixedStart?b.value=kg(te,b,t,a):b.value?B(te,b.value)&&(b.value=Bc(b,z(L,j),t)):b.value=[z(L,j)],vn().then(()=>{fl(b.value,t,n.autoApply,n.modelAuto)})},R=(L,j)=>{Lc(z(L,j),b,f.value.limit),t("auto-apply",!0)},w=(L,j)=>(S.value[j].month=L,M(j,S.value[j].year,L),f.value.enabled?R(L,j):a.value.enabled?H(L,j):X(L,j)),ee=(L,j)=>{Q(L,j),M(j,L,null)},M=(L,j,te)=>{let p=te;if(!p&&p!==0){const U=O();p=Array.isArray(U)?U[L].month:U.month}t("update-month-year",{instance:L,year:j,month:p})};return{groupedMonths:D,groupedYears:se,year:v,isDisabled:T,defaultedMultiCalendars:e,defaultedAriaLabels:r,defaultedTransitions:s,defaultedConfig:i,showYearPicker:J,modelValue:b,presetDate:(L,j)=>{Ag({value:L,modelValue:b,range:a.value.enabled,timezone:j?void 0:c.value.timezone}),t("auto-apply")},setHoverDate:(L,j)=>{q.value=z(L,j)},selectMonth:w,selectYear:ee,toggleYearPicker:k,handleYearSelect:y,handleYear:_,getModelMonthYear:O}},zk=vt({compatConfig:{MODE:3},__name:"MonthPicker",props:{...Qn},emits:["update:internal-model-value","overlay-closed","reset-flow","range-start","range-end","auto-apply","update-month-year","update-flow-step","mount","invalid-fixed-range","overlay-toggle"],setup(n,{expose:t,emit:e}){const r=e,s=Rs(),i=Cn(s,"yearMode"),a=n;Zt(()=>{a.shadow||r("mount",null)});const{groupedMonths:l,groupedYears:u,year:c,isDisabled:d,defaultedMultiCalendars:f,defaultedConfig:g,showYearPicker:b,modelValue:v,presetDate:A,setHoverDate:S,selectMonth:F,selectYear:q,toggleYearPicker:B,handleYearSelect:Q,handleYear:se,getModelMonthYear:J}=jk(a,r);return t({getSidebarProps:()=>({modelValue:v,year:c,getModelMonthYear:J,selectMonth:F,selectYear:q,handleYear:se}),presetDate:A,toggleYearPicker:k=>B(0,k)}),(k,y)=>(W(),et(dl,{"multi-calendars":P(f).count,collapse:k.collapse,stretch:"","is-mobile":k.isMobile},{default:De(({instance:_})=>[k.$slots["top-extra"]?Ee(k.$slots,"top-extra",{key:0,value:k.internalModelValue}):de("",!0),k.$slots["month-year"]?Ee(k.$slots,"month-year",Gt(kt({key:1},{year:P(c),months:P(l)(_),years:P(u)(_),selectMonth:P(F),selectYear:P(q),instance:_}))):(W(),et(ja,{key:2,items:P(l)(_),"arrow-navigation":k.arrowNavigation,"is-last":k.autoApply&&!P(g).keepActionRow,"esc-close":k.escClose,height:P(g).modeHeight,config:k.config,"no-overlay-focus":!!(k.noOverlayFocus||k.textInput),"use-relative":"",type:"month",onSelected:T=>P(F)(T,_),onHoverValue:T=>P(S)(T,_)},gn({header:De(()=>[$e(Eg,kt(k.$props,{items:P(u)(_),instance:_,"show-year-picker":P(b)[_],year:P(c)(_),"is-disabled":T=>P(d)(_,T),onHandleYear:T=>P(se)(_,T),onYearSelect:T=>P(Q)(T,_),onToggleYearPicker:T=>P(B)(_,T==null?void 0:T.flow,T==null?void 0:T.show)}),gn({_:2},[pt(P(i),(T,I)=>({name:T,fn:De(O=>[Ee(k.$slots,T,Gt(Sn(O)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),_:2},[k.$slots["month-overlay-value"]?{name:"item",fn:De(({item:T})=>[Ee(k.$slots,"month-overlay-value",{text:T.text,value:T.value})]),key:"0"}:void 0]),1032,["items","arrow-navigation","is-last","esc-close","height","config","no-overlay-focus","onSelected","onHoverValue"]))]),_:3},8,["multi-calendars","collapse","is-mobile"]))}}),Yk=(n,t)=>{const e=()=>{n.isTextInputDate&&(d.value=je(fe(n.startDate)))},{modelValue:r}=Ya(n,t,e),s=he(null),{defaultedHighlight:i,defaultedMultiDates:a,defaultedFilters:l,defaultedRange:u,propDates:c}=St(n),d=he();Zt(()=>{n.startDate&&(r.value&&n.focusStartDate||!r.value)&&(d.value=je(fe(n.startDate)))});const f=F=>Array.isArray(r.value)?r.value.some(q=>je(q)===F):r.value?je(r.value)===F:!1,g=F=>u.value.enabled&&Array.isArray(r.value)?Ma(r.value,s.value,S(F)):!1,b=F=>c.value.allowedDates instanceof Map?c.value.allowedDates.size?c.value.allowedDates.has(`${F}`):!1:!0,v=F=>c.value.disabledDates instanceof Map?c.value.disabledDates.size?c.value.disabledDates.has(`${F}`):!1:!0,A=ie(()=>mi(Vc(n.yearRange,n.locale,n.reverseYears),F=>{const q=f(F.value),B=xa(F.value,pi(c.value.minDate),pi(c.value.maxDate))||l.value.years.includes(F.value)||!b(F.value)||v(F.value),Q=g(F.value)&&!q,se=Fc(i.value,F.value);return{active:q,disabled:B,isBetween:Q,highlighted:se}})),S=F=>nr(zn(Ca(new Date)),F);return{groupedYears:A,modelValue:r,focusYear:d,setHoverValue:F=>{s.value=nr(zn(new Date),F)},selectYear:F=>{var q;if(t("update-month-year",{instance:0,year:F}),a.value.enabled)return r.value?Array.isArray(r.value)&&(((q=r.value)==null?void 0:q.map(B=>je(B))).includes(F)?r.value=r.value.filter(B=>je(B)!==F):r.value.push(nr(Xt(fe()),F))):r.value=[nr(Xt(Ca(fe())),F)],t("auto-apply",!0);u.value.enabled?(r.value=Bc(r,S(F),t),vn().then(()=>{fl(r.value,t,n.autoApply,n.modelAuto)})):(r.value=S(F),t("auto-apply"))}}},Hk=vt({compatConfig:{MODE:3},__name:"YearPicker",props:{...Qn},emits:["update:internal-model-value","reset-flow","range-start","range-end","auto-apply","update-month-year"],setup(n,{expose:t,emit:e}){const r=e,s=n,{groupedYears:i,modelValue:a,focusYear:l,selectYear:u,setHoverValue:c}=Yk(s,r),{defaultedConfig:d}=St(s);return t({getSidebarProps:()=>({modelValue:a,selectYear:u})}),(f,g)=>(W(),re("div",null,[f.$slots["top-extra"]?Ee(f.$slots,"top-extra",{key:0,value:f.internalModelValue}):de("",!0),f.$slots["month-year"]?Ee(f.$slots,"month-year",Gt(kt({key:1},{years:P(i),selectYear:P(u)}))):(W(),et(ja,{key:2,items:P(i),"is-last":f.autoApply&&!P(d).keepActionRow,height:P(d).modeHeight,config:f.config,"no-overlay-focus":!!(f.noOverlayFocus||f.textInput),"focus-value":P(l),type:"year","use-relative":"",onSelected:P(u),onHoverValue:P(c)},gn({_:2},[f.$slots["year-overlay-value"]?{name:"item",fn:De(({item:b})=>[Ee(f.$slots,"year-overlay-value",{text:b.text,value:b.value})]),key:"0"}:void 0]),1032,["items","is-last","height","config","no-overlay-focus","focus-value","onSelected","onHoverValue"]))]))}}),Wk={key:0,class:"dp__time_input"},Kk=["data-compact","data-collapsed"],Gk=["data-test-id","aria-label","onKeydown","onClick","onMousedown"],Qk=["aria-label","disabled","data-test-id","onKeydown","onClick"],Jk=["data-test-id","aria-label","onKeydown","onClick","onMousedown"],Xk={key:0},Zk=["aria-label","data-compact"],eS=vt({compatConfig:{MODE:3},__name:"TimeInput",props:{hours:{type:Number,default:0},minutes:{type:Number,default:0},seconds:{type:Number,default:0},closeTimePickerBtn:{type:Object,default:null},order:{type:Number,default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Qn},emits:["set-hours","set-minutes","update:hours","update:minutes","update:seconds","reset-flow","mounted","overlay-closed","overlay-opened","am-pm-change"],setup(n,{expose:t,emit:e}){const r=e,s=n,{setTimePickerElements:i,setTimePickerBackRef:a}=ls(),{defaultedAriaLabels:l,defaultedTransitions:u,defaultedFilters:c,defaultedConfig:d,defaultedRange:f,defaultedMultiCalendars:g}=St(s),{transitionName:b,showTransition:v}=za(u),A=Ar({hours:!1,minutes:!1,seconds:!1}),S=he("AM"),F=he(null),q=he([]),B=he(),Q=he(!1);Zt(()=>{r("mounted")});const se=C=>ht(new Date,{hours:C.hours,minutes:C.minutes,seconds:s.enableSeconds?C.seconds:0,milliseconds:0}),J=ie(()=>C=>H(C,s[C])||y(C,s[C])),k=ie(()=>({hours:s.hours,minutes:s.minutes,seconds:s.seconds})),y=(C,me)=>f.value.enabled&&!f.value.disableTimeRangeValidation?!s.validateTime(C,me):!1,_=(C,me)=>{if(f.value.enabled&&!f.value.disableTimeRangeValidation){const ge=me?+s[`${C}Increment`]:-+s[`${C}Increment`],ve=s[C]+ge;return!s.validateTime(C,ve)}return!1},T=ie(()=>C=>!L(+s[C]+ +s[`${C}Increment`],C)||_(C,!0)),I=ie(()=>C=>!L(+s[C]-+s[`${C}Increment`],C)||_(C,!1)),O=(C,me)=>qp(ht(fe(),C),me),x=(C,me)=>HA(ht(fe(),C),me),V=ie(()=>({dp__time_col:!0,dp__time_col_block:!s.timePickerInline,dp__time_col_reg_block:!s.enableSeconds&&s.is24&&!s.timePickerInline,dp__time_col_reg_inline:!s.enableSeconds&&s.is24&&s.timePickerInline,dp__time_col_reg_with_button:!s.enableSeconds&&!s.is24,dp__time_col_sec:s.enableSeconds&&s.is24,dp__time_col_sec_with_button:s.enableSeconds&&!s.is24})),N=ie(()=>s.timePickerInline&&f.value.enabled&&!g.value.count),D=ie(()=>{const C=[{type:"hours"}];return s.enableMinutes&&C.push({type:"",separator:!0},{type:"minutes"}),s.enableSeconds&&C.push({type:"",separator:!0},{type:"seconds"}),C}),z=ie(()=>D.value.filter(C=>!C.separator)),X=ie(()=>C=>{if(C==="hours"){const me=Ae(+s.hours);return{text:me<10?`0${me}`:`${me}`,value:me}}return{text:s[C]<10?`0${s[C]}`:`${s[C]}`,value:s[C]}}),H=(C,me)=>{var ge;if(!s.disabledTimesConfig)return!1;const ve=s.disabledTimesConfig(s.order,C==="hours"?me:void 0);return ve[C]?!!((ge=ve[C])!=null&&ge.includes(me)):!0},R=(C,me)=>me!=="hours"||S.value==="AM"?C:C+12,w=C=>{const me=s.is24?24:12,ge=C==="hours"?me:60,ve=+s[`${C}GridIncrement`],Ue=C==="hours"&&!s.is24?ve:0,Ve=[];for(let tt=Ue;tt<ge;tt+=ve)Ve.push({value:s.is24?tt:R(tt,C),text:tt<10?`0${tt}`:`${tt}`});return C==="hours"&&!s.is24&&Ve.unshift({value:S.value==="PM"?12:0,text:"12"}),mi(Ve,tt=>({active:!1,disabled:c.value.times[C].includes(tt.value)||!L(tt.value,C)||H(C,tt.value)||y(C,tt.value)}))},ee=C=>C>=0?C:59,M=C=>C>=0?C:23,L=(C,me)=>{const ge=s.minTime?se(nu(s.minTime)):null,ve=s.maxTime?se(nu(s.maxTime)):null,Ue=se(nu(k.value,me,me==="minutes"||me==="seconds"?ee(C):M(C)));return ge&&ve?(di(Ue,ve)||si(Ue,ve))&&(As(Ue,ge)||si(Ue,ge)):ge?As(Ue,ge)||si(Ue,ge):ve?di(Ue,ve)||si(Ue,ve):!0},j=C=>s[`no${C[0].toUpperCase()+C.slice(1)}Overlay`],te=C=>{j(C)||(A[C]=!A[C],A[C]?(Q.value=!0,r("overlay-opened",C)):(Q.value=!1,r("overlay-closed",C)))},p=C=>C==="hours"?br:C==="minutes"?es:hi,U=()=>{B.value&&clearTimeout(B.value)},le=(C,me=!0,ge)=>{const ve=me?O:x,Ue=me?+s[`${C}Increment`]:-+s[`${C}Increment`];L(+s[C]+Ue,C)&&r(`update:${C}`,p(C)(ve({[C]:+s[C]},{[C]:+s[`${C}Increment`]}))),!(ge!=null&&ge.keyboard)&&d.value.timeArrowHoldThreshold&&(B.value=setTimeout(()=>{le(C,me)},d.value.timeArrowHoldThreshold))},Ae=C=>s.is24?C:(C>=12?S.value="PM":S.value="AM",ZA(C)),Y=()=>{S.value==="PM"?(S.value="AM",r("update:hours",s.hours-12)):(S.value="PM",r("update:hours",s.hours+12)),r("am-pm-change",S.value)},ke=C=>{A[C]=!0},ae=(C,me,ge)=>{if(C&&s.arrowNavigation){Array.isArray(q.value[me])?q.value[me][ge]=C:q.value[me]=[C];const ve=q.value.reduce((Ue,Ve)=>Ve.map((tt,yt)=>[...Ue[yt]||[],Ve[yt]]),[]);a(s.closeTimePickerBtn),F.value&&(ve[1]=ve[1].concat(F.value)),i(ve,s.order)}},oe=(C,me)=>(te(C),r(`update:${C}`,me));return t({openChildCmp:ke}),(C,me)=>{var ge;return C.disabled?de("",!0):(W(),re("div",Wk,[(W(!0),re(He,null,pt(D.value,(ve,Ue)=>{var Ve,tt,yt;return W(),re("div",{key:Ue,class:Fe(V.value),"data-compact":N.value&&!C.enableSeconds,"data-collapsed":N.value&&C.enableSeconds},[ve.separator?(W(),re(He,{key:0},[Q.value?de("",!0):(W(),re(He,{key:0},[Fn(":")],64))],64)):(W(),re(He,{key:1},[Se("button",{ref_for:!0,ref:G=>ae(G,Ue,0),type:"button",class:Fe({dp__btn:!0,dp__inc_dec_button:!C.timePickerInline,dp__inc_dec_button_inline:C.timePickerInline,dp__tp_inline_btn_top:C.timePickerInline,dp__inc_dec_button_disabled:T.value(ve.type),"dp--hidden-el":Q.value}),"data-test-id":`${ve.type}-time-inc-btn-${s.order}`,"aria-label":(Ve=P(l))==null?void 0:Ve.incrementValue(ve.type),tabindex:"0",onKeydown:G=>P(Tn)(G,()=>le(ve.type,!0,{keyboard:!0}),!0),onClick:G=>P(d).timeArrowHoldThreshold?void 0:le(ve.type,!0),onMousedown:G=>P(d).timeArrowHoldThreshold?le(ve.type,!0):void 0,onMouseup:U},[s.timePickerInline?(W(),re(He,{key:1},[C.$slots["tp-inline-arrow-up"]?Ee(C.$slots,"tp-inline-arrow-up",{key:0}):(W(),re(He,{key:1},[me[2]||(me[2]=Se("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1)),me[3]||(me[3]=Se("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1))],64))],64)):(W(),re(He,{key:0},[C.$slots["arrow-up"]?Ee(C.$slots,"arrow-up",{key:0}):de("",!0),C.$slots["arrow-up"]?de("",!0):(W(),et(P(Mc),{key:1}))],64))],42,Gk),Se("button",{ref_for:!0,ref:G=>ae(G,Ue,1),type:"button","aria-label":`${X.value(ve.type).text}-${(tt=P(l))==null?void 0:tt.openTpOverlay(ve.type)}`,class:Fe({dp__time_display:!0,dp__time_display_block:!C.timePickerInline,dp__time_display_inline:C.timePickerInline,"dp--time-invalid":J.value(ve.type),"dp--time-overlay-btn":!J.value(ve.type),"dp--hidden-el":Q.value}),disabled:j(ve.type),tabindex:"0","data-test-id":`${ve.type}-toggle-overlay-btn-${s.order}`,onKeydown:G=>P(Tn)(G,()=>te(ve.type),!0),onClick:G=>te(ve.type)},[C.$slots[ve.type]?Ee(C.$slots,ve.type,{key:0,text:X.value(ve.type).text,value:X.value(ve.type).value}):de("",!0),C.$slots[ve.type]?de("",!0):(W(),re(He,{key:1},[Fn($t(X.value(ve.type).text),1)],64))],42,Qk),Se("button",{ref_for:!0,ref:G=>ae(G,Ue,2),type:"button",class:Fe({dp__btn:!0,dp__inc_dec_button:!C.timePickerInline,dp__inc_dec_button_inline:C.timePickerInline,dp__tp_inline_btn_bottom:C.timePickerInline,dp__inc_dec_button_disabled:I.value(ve.type),"dp--hidden-el":Q.value}),"data-test-id":`${ve.type}-time-dec-btn-${s.order}`,"aria-label":(yt=P(l))==null?void 0:yt.decrementValue(ve.type),tabindex:"0",onKeydown:G=>P(Tn)(G,()=>le(ve.type,!1,{keyboard:!0}),!0),onClick:G=>P(d).timeArrowHoldThreshold?void 0:le(ve.type,!1),onMousedown:G=>P(d).timeArrowHoldThreshold?le(ve.type,!1):void 0,onMouseup:U},[s.timePickerInline?(W(),re(He,{key:1},[C.$slots["tp-inline-arrow-down"]?Ee(C.$slots,"tp-inline-arrow-down",{key:0}):(W(),re(He,{key:1},[me[4]||(me[4]=Se("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_l"},null,-1)),me[5]||(me[5]=Se("span",{class:"dp__tp_inline_btn_bar dp__tp_btn_in_r"},null,-1))],64))],64)):(W(),re(He,{key:0},[C.$slots["arrow-down"]?Ee(C.$slots,"arrow-down",{key:0}):de("",!0),C.$slots["arrow-down"]?de("",!0):(W(),et(P(Dc),{key:1}))],64))],42,Jk)],64))],10,Kk)}),128)),C.is24?de("",!0):(W(),re("div",Xk,[C.$slots["am-pm-button"]?Ee(C.$slots,"am-pm-button",{key:0,toggle:Y,value:S.value}):de("",!0),C.$slots["am-pm-button"]?de("",!0):(W(),re("button",{key:1,ref_key:"amPmButton",ref:F,type:"button",class:"dp__pm_am_button",role:"button","aria-label":(ge=P(l))==null?void 0:ge.amPmButton,tabindex:"0","data-compact":N.value,onClick:Y,onKeydown:me[0]||(me[0]=ve=>P(Tn)(ve,()=>Y(),!0))},$t(S.value),41,Zk))])),(W(!0),re(He,null,pt(z.value,(ve,Ue)=>(W(),et(Qr,{key:Ue,name:P(b)(A[ve.type]),css:P(v)},{default:De(()=>{var Ve,tt;return[A[ve.type]?(W(),et(ja,{key:0,items:w(ve.type),"is-last":C.autoApply&&!P(d).keepActionRow,"esc-close":C.escClose,type:ve.type,"text-input":C.textInput,config:C.config,"arrow-navigation":C.arrowNavigation,"aria-labels":C.ariaLabels,"overlay-label":(tt=(Ve=P(l)).timeOverlay)==null?void 0:tt.call(Ve,ve.type),onSelected:yt=>oe(ve.type,yt),onToggle:yt=>te(ve.type),onResetFlow:me[1]||(me[1]=yt=>C.$emit("reset-flow"))},gn({"button-icon":De(()=>[C.$slots["clock-icon"]?Ee(C.$slots,"clock-icon",{key:0}):de("",!0),C.$slots["clock-icon"]?de("",!0):(W(),et(sl(C.timePickerInline?P(Si):P(xc)),{key:1}))]),_:2},[C.$slots[`${ve.type}-overlay-value`]?{name:"item",fn:De(({item:yt})=>[Ee(C.$slots,`${ve.type}-overlay-value`,{text:yt.text,value:yt.value})]),key:"0"}:void 0,C.$slots[`${ve.type}-overlay-header`]?{name:"header",fn:De(()=>[Ee(C.$slots,`${ve.type}-overlay-header`,{toggle:()=>te(ve.type)})]),key:"1"}:void 0]),1032,["items","is-last","esc-close","type","text-input","config","arrow-navigation","aria-labels","overlay-label","onSelected","onToggle"])):de("",!0)]}),_:2},1032,["name","css"]))),128))]))}}}),tS=["data-dp-mobile"],nS=["aria-label","tabindex"],rS=["role","aria-label","tabindex"],sS=["aria-label"],Rg=vt({compatConfig:{MODE:3},__name:"TimePicker",props:{hours:{type:[Number,Array],default:0},minutes:{type:[Number,Array],default:0},seconds:{type:[Number,Array],default:0},disabledTimesConfig:{type:Function,default:null},validateTime:{type:Function,default:()=>!1},...Qn},emits:["update:hours","update:minutes","update:seconds","mount","reset-flow","overlay-opened","overlay-closed","am-pm-change"],setup(n,{expose:t,emit:e}){const r=e,s=n,{buildMatrix:i,setTimePicker:a}=ls(),l=Rs(),{defaultedTransitions:u,defaultedAriaLabels:c,defaultedTextInput:d,defaultedConfig:f,defaultedRange:g}=St(s),{transitionName:b,showTransition:v}=za(u),{hideNavigationButtons:A}=ml(),S=he(null),F=he(null),q=he([]),B=he(null),Q=he(!1);Zt(()=>{r("mount"),!s.timePicker&&s.arrowNavigation?i([Ut(S.value)],"time"):a(!0,s.timePicker)});const se=ie(()=>g.value.enabled&&s.modelAuto?hg(s.internalModelValue):!0),J=he(!1),k=H=>({hours:Array.isArray(s.hours)?s.hours[H]:s.hours,minutes:Array.isArray(s.minutes)?s.minutes[H]:s.minutes,seconds:Array.isArray(s.seconds)?s.seconds[H]:s.seconds}),y=ie(()=>{const H=[];if(g.value.enabled)for(let R=0;R<2;R++)H.push(k(R));else H.push(k(0));return H}),_=(H,R=!1,w="")=>{R||r("reset-flow"),J.value=H,r(H?"overlay-opened":"overlay-closed",mn.time),s.arrowNavigation&&a(H),vn(()=>{w!==""&&q.value[0]&&q.value[0].openChildCmp(w)})},T=ie(()=>({dp__btn:!0,dp__button:!0,dp__button_bottom:s.autoApply&&!f.value.keepActionRow})),I=Cn(l,"timePicker"),O=(H,R,w)=>g.value.enabled?R===0?[H,y.value[1][w]]:[y.value[0][w],H]:H,x=H=>{r("update:hours",H)},V=H=>{r("update:minutes",H)},N=H=>{r("update:seconds",H)},D=()=>{if(B.value&&!d.value.enabled&&!s.noOverlayFocus){const H=dg(B.value);H&&H.focus({preventScroll:!0})}},z=H=>{Q.value=!1,r("overlay-closed",H)},X=H=>{Q.value=!0,r("overlay-opened",H)};return t({toggleTimePicker:_}),(H,R)=>{var w;return W(),re("div",{class:"dp--tp-wrap","data-dp-mobile":H.isMobile},[!H.timePicker&&!H.timePickerInline?Br((W(),re("button",{key:0,ref_key:"openTimePickerBtn",ref:S,type:"button",class:Fe({...T.value,"dp--hidden-el":J.value}),"aria-label":(w=P(c))==null?void 0:w.openTimePicker,tabindex:H.noOverlayFocus?void 0:0,"data-test-id":"open-time-picker-btn",onKeydown:R[0]||(R[0]=ee=>P(Tn)(ee,()=>_(!0))),onClick:R[1]||(R[1]=ee=>_(!0))},[H.$slots["clock-icon"]?Ee(H.$slots,"clock-icon",{key:0}):de("",!0),H.$slots["clock-icon"]?de("",!0):(W(),et(P(xc),{key:1}))],42,nS)),[[To,!P(A)(H.hideNavigation,"time")]]):de("",!0),$e(Qr,{name:P(b)(J.value),css:P(v)&&!H.timePickerInline},{default:De(()=>{var ee,M;return[J.value||H.timePicker||H.timePickerInline?(W(),re("div",{key:0,ref_key:"overlayRef",ref:B,role:H.timePickerInline?void 0:"dialog",class:Fe({dp__overlay:!H.timePickerInline,"dp--overlay-absolute":!s.timePicker&&!H.timePickerInline,"dp--overlay-relative":s.timePicker}),style:kn(H.timePicker?{height:`${P(f).modeHeight}px`}:void 0),"aria-label":(ee=P(c))==null?void 0:ee.timePicker,tabindex:H.timePickerInline?void 0:0},[Se("div",{class:Fe(H.timePickerInline?"dp__time_picker_inline_container":"dp__overlay_container dp__container_flex dp__time_picker_overlay_container"),style:{display:"flex"}},[H.$slots["time-picker-overlay"]?Ee(H.$slots,"time-picker-overlay",{key:0,hours:n.hours,minutes:n.minutes,seconds:n.seconds,setHours:x,setMinutes:V,setSeconds:N}):de("",!0),H.$slots["time-picker-overlay"]?de("",!0):(W(),re("div",{key:1,class:Fe(H.timePickerInline?"dp__flex":"dp__overlay_row dp__flex_row")},[(W(!0),re(He,null,pt(y.value,(L,j)=>Br((W(),et(eS,kt({key:j,ref_for:!0},{...H.$props,order:j,hours:L.hours,minutes:L.minutes,seconds:L.seconds,closeTimePickerBtn:F.value,disabledTimesConfig:n.disabledTimesConfig,disabled:j===0?P(g).fixedStart:P(g).fixedEnd},{ref_for:!0,ref_key:"timeInputRefs",ref:q,"validate-time":(te,p)=>n.validateTime(te,O(p,j,te)),"onUpdate:hours":te=>x(O(te,j,"hours")),"onUpdate:minutes":te=>V(O(te,j,"minutes")),"onUpdate:seconds":te=>N(O(te,j,"seconds")),onMounted:D,onOverlayClosed:z,onOverlayOpened:X,onAmPmChange:R[2]||(R[2]=te=>H.$emit("am-pm-change",te))}),gn({_:2},[pt(P(I),(te,p)=>({name:te,fn:De(U=>[Ee(H.$slots,te,kt({ref_for:!0},U))])}))]),1040,["validate-time","onUpdate:hours","onUpdate:minutes","onUpdate:seconds"])),[[To,j===0?!0:se.value]])),128))],2)),!H.timePicker&&!H.timePickerInline?Br((W(),re("button",{key:2,ref_key:"closeTimePickerBtn",ref:F,type:"button",class:Fe({...T.value,"dp--hidden-el":Q.value}),"aria-label":(M=P(c))==null?void 0:M.closeTimePicker,tabindex:"0",onKeydown:R[3]||(R[3]=L=>P(Tn)(L,()=>_(!1))),onClick:R[4]||(R[4]=L=>_(!1))},[H.$slots["calendar-icon"]?Ee(H.$slots,"calendar-icon",{key:0}):de("",!0),H.$slots["calendar-icon"]?de("",!0):(W(),et(P(Si),{key:1}))],42,sS)),[[To,!P(A)(H.hideNavigation,"time")]]):de("",!0)],2)],14,rS)):de("",!0)]}),_:3},8,["name","css"])],8,tS)}}}),Ig=(n,t,e,r)=>{const{defaultedRange:s}=St(n),i=(B,Q)=>Array.isArray(t[B])?t[B][Q]:t[B],a=B=>n.enableSeconds?Array.isArray(t.seconds)?t.seconds[B]:t.seconds:0,l=(B,Q)=>B?Q!==void 0?zr(B,i("hours",Q),i("minutes",Q),a(Q)):zr(B,t.hours,t.minutes,a()):og(fe(),a(Q)),u=(B,Q)=>{t[B]=Q},c=ie(()=>n.modelAuto&&s.value.enabled?Array.isArray(e.value)?e.value.length>1:!1:s.value.enabled),d=(B,Q)=>{const se=Object.fromEntries(Object.keys(t).map(J=>J===B?[J,Q]:[J,t[J]].slice()));if(c.value&&!s.value.disableTimeRangeValidation){const J=y=>e.value?zr(e.value[y],se.hours[y],se.minutes[y],se.seconds[y]):null,k=y=>ag(e.value[y],0);return!(Xe(J(0),J(1))&&(As(J(0),k(1))||di(J(1),k(0))))}return!0},f=(B,Q)=>{d(B,Q)&&(u(B,Q),r&&r())},g=B=>{f("hours",B)},b=B=>{f("minutes",B)},v=B=>{f("seconds",B)},A=(B,Q,se,J)=>{Q&&g(B),!Q&&!se&&b(B),se&&v(B),e.value&&J(e.value)},S=B=>{if(B){const Q=Array.isArray(B),se=Q?[+B[0].hours,+B[1].hours]:+B.hours,J=Q?[+B[0].minutes,+B[1].minutes]:+B.minutes,k=Q?[+B[0].seconds,+B[1].seconds]:+B.seconds;u("hours",se),u("minutes",J),n.enableSeconds&&u("seconds",k)}},F=(B,Q)=>{const se={hours:Array.isArray(t.hours)?t.hours[B]:t.hours,disabledArr:[]};return(Q||Q===0)&&(se.hours=Q),Array.isArray(n.disabledTimes)&&(se.disabledArr=s.value.enabled&&Array.isArray(n.disabledTimes[B])?n.disabledTimes[B]:n.disabledTimes),se},q=ie(()=>(B,Q)=>{var se;if(Array.isArray(n.disabledTimes)){const{disabledArr:J,hours:k}=F(B,Q),y=J.filter(_=>+_.hours===k);return((se=y[0])==null?void 0:se.minutes)==="*"?{hours:[k],minutes:void 0,seconds:void 0}:{hours:[],minutes:(y==null?void 0:y.map(_=>+_.minutes))??[],seconds:(y==null?void 0:y.map(_=>_.seconds?+_.seconds:void 0))??[]}}return{hours:[],minutes:[],seconds:[]}});return{setTime:u,updateHours:g,updateMinutes:b,updateSeconds:v,getSetDateTime:l,updateTimeValues:A,getSecondsValue:a,assignStartTime:S,validateTime:d,disabledTimesConfig:q}},iS=(n,t)=>{const e=()=>{n.isTextInputDate&&Q()},{modelValue:r,time:s}=Ya(n,t,e),{defaultedStartTime:i,defaultedRange:a,defaultedTz:l}=St(n),{updateTimeValues:u,getSetDateTime:c,setTime:d,assignStartTime:f,disabledTimesConfig:g,validateTime:b}=Ig(n,s,r,v);function v(){t("update-flow-step")}const A=J=>{const{hours:k,minutes:y,seconds:_}=J;return{hours:+k,minutes:+y,seconds:_?+_:0}},S=()=>{if(n.startTime){if(Array.isArray(n.startTime)){const k=A(n.startTime[0]),y=A(n.startTime[1]);return[ht(fe(),k),ht(fe(),y)]}const J=A(n.startTime);return ht(fe(),J)}return a.value.enabled?[null,null]:null},F=()=>{if(a.value.enabled){const[J,k]=S();r.value=[Rn(c(J,0),l.value.timezone),Rn(c(k,1),l.value.timezone)]}else r.value=Rn(c(S()),l.value.timezone)},q=J=>Array.isArray(J)?[Ts(fe(J[0])),Ts(fe(J[1]))]:[Ts(J??fe())],B=(J,k,y)=>{d("hours",J),d("minutes",k),d("seconds",n.enableSeconds?y:0)},Q=()=>{const[J,k]=q(r.value);return a.value.enabled?B([J.hours,k.hours],[J.minutes,k.minutes],[J.seconds,k.seconds]):B(J.hours,J.minutes,J.seconds)};Zt(()=>{if(!n.shadow)return f(i.value),r.value?Q():F()});const se=()=>{Array.isArray(r.value)?r.value=r.value.map((J,k)=>J&&c(J,k)):r.value=c(r.value),t("time-update")};return{modelValue:r,time:s,disabledTimesConfig:g,updateTime:(J,k=!0,y=!1)=>{u(J,k,y,se)},validateTime:b}},aS=vt({compatConfig:{MODE:3},__name:"TimePickerSolo",props:{...Qn},emits:["update:internal-model-value","time-update","am-pm-change","mount","reset-flow","update-flow-step","overlay-toggle"],setup(n,{expose:t,emit:e}){const r=e,s=n,i=Rs(),a=Cn(i,"timePicker"),l=he(null),{time:u,modelValue:c,disabledTimesConfig:d,updateTime:f,validateTime:g}=iS(s,r);return Zt(()=>{s.shadow||r("mount",null)}),t({getSidebarProps:()=>({modelValue:c,time:u,updateTime:f}),toggleTimePicker:(b,v=!1,A="")=>{var S;(S=l.value)==null||S.toggleTimePicker(b,v,A)}}),(b,v)=>(W(),et(dl,{"multi-calendars":0,stretch:"","is-mobile":b.isMobile},{default:De(()=>[$e(Rg,kt({ref_key:"tpRef",ref:l},b.$props,{hours:P(u).hours,minutes:P(u).minutes,seconds:P(u).seconds,"internal-model-value":b.internalModelValue,"disabled-times-config":P(d),"validate-time":P(g),"onUpdate:hours":v[0]||(v[0]=A=>P(f)(A)),"onUpdate:minutes":v[1]||(v[1]=A=>P(f)(A,!1)),"onUpdate:seconds":v[2]||(v[2]=A=>P(f)(A,!1,!0)),onAmPmChange:v[3]||(v[3]=A=>b.$emit("am-pm-change",A)),onResetFlow:v[4]||(v[4]=A=>b.$emit("reset-flow")),onOverlayClosed:v[5]||(v[5]=A=>b.$emit("overlay-toggle",{open:!1,overlay:A})),onOverlayOpened:v[6]||(v[6]=A=>b.$emit("overlay-toggle",{open:!0,overlay:A}))}),gn({_:2},[pt(P(a),(A,S)=>({name:A,fn:De(F=>[Ee(b.$slots,A,Gt(Sn(F)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"])]),_:3},8,["is-mobile"]))}}),oS={class:"dp--header-wrap"},lS={key:0,class:"dp__month_year_wrap"},uS={key:0},cS={class:"dp__month_year_wrap"},hS=["data-dp-element","aria-label","data-test-id","onClick","onKeydown"],dS=vt({compatConfig:{MODE:3},__name:"DpHeader",props:{month:{type:Number,default:0},year:{type:Number,default:0},instance:{type:Number,default:0},years:{type:Array,default:()=>[]},months:{type:Array,default:()=>[]},...Qn},emits:["update-month-year","mount","reset-flow","overlay-closed","overlay-opened"],setup(n,{expose:t,emit:e}){const r=e,s=n,{defaultedTransitions:i,defaultedAriaLabels:a,defaultedMultiCalendars:l,defaultedFilters:u,defaultedConfig:c,defaultedHighlight:d,propDates:f,defaultedUI:g}=St(s),{transitionName:b,showTransition:v}=za(i),{buildMatrix:A}=ls(),{handleMonthYearChange:S,isDisabled:F,updateMonthYear:q}=Mk(s,r),{showLeftIcon:B,showRightIcon:Q}=ml(),se=he(!1),J=he(!1),k=he(!1),y=he([null,null,null,null]);Zt(()=>{r("mount")});const _=M=>({get:()=>s[M],set:L=>{const j=M===Un.month?Un.year:Un.month;r("update-month-year",{[M]:L,[j]:s[j]}),M===Un.month?z(!0):X(!0)}}),T=ie(_(Un.month)),I=ie(_(Un.year)),O=ie(()=>M=>({month:s.month,year:s.year,items:M===Un.month?s.months:s.years,instance:s.instance,updateMonthYear:q,toggle:M===Un.month?z:X})),x=ie(()=>s.months.find(L=>L.value===s.month)||{text:"",value:0}),V=ie(()=>mi(s.months,M=>{const L=s.month===M.value,j=xa(M.value,gg(s.year,f.value.minDate),vg(s.year,f.value.maxDate))||u.value.months.includes(M.value),te=Tg(d.value,M.value,s.year);return{active:L,disabled:j,highlighted:te}})),N=ie(()=>mi(s.years,M=>{const L=s.year===M.value,j=xa(M.value,pi(f.value.minDate),pi(f.value.maxDate))||u.value.years.includes(M.value),te=Fc(d.value,M.value);return{active:L,disabled:j,highlighted:te}})),D=(M,L,j)=>{j!==void 0?M.value=j:M.value=!M.value,M.value?(k.value=!0,r("overlay-opened",L)):(k.value=!1,r("overlay-closed",L))},z=(M=!1,L)=>{H(M),D(se,mn.month,L)},X=(M=!1,L)=>{H(M),D(J,mn.year,L)},H=M=>{M||r("reset-flow")},R=(M,L)=>{s.arrowNavigation&&(y.value[L]=Ut(M),A(y.value,"monthYear"))},w=ie(()=>{var M,L,j,te,p,U;return[{type:Un.month,index:1,toggle:z,modelValue:T.value,updateModelValue:le=>T.value=le,text:x.value.text,showSelectionGrid:se.value,items:V.value,ariaLabel:(M=a.value)==null?void 0:M.openMonthsOverlay,overlayLabel:((j=(L=a.value).monthPicker)==null?void 0:j.call(L,!0))??void 0},{type:Un.year,index:2,toggle:X,modelValue:I.value,updateModelValue:le=>I.value=le,text:fg(s.year,s.locale),showSelectionGrid:J.value,items:N.value,ariaLabel:(te=a.value)==null?void 0:te.openYearsOverlay,overlayLabel:((U=(p=a.value).yearPicker)==null?void 0:U.call(p,!0))??void 0}]}),ee=ie(()=>s.disableYearSelect?[w.value[0]]:s.yearFirst?[...w.value].reverse():w.value);return t({toggleMonthPicker:z,toggleYearPicker:X,handleMonthYearChange:S}),(M,L)=>{var j,te,p,U,le,Ae;return W(),re("div",oS,[M.$slots["month-year"]?(W(),re("div",lS,[Ee(M.$slots,"month-year",Gt(Sn({month:n.month,year:n.year,months:n.months,years:n.years,updateMonthYear:P(q),handleMonthYearChange:P(S),instance:n.instance,isDisabled:P(F)})))])):(W(),re(He,{key:1},[M.$slots["top-extra"]?(W(),re("div",uS,[Ee(M.$slots,"top-extra",{value:M.internalModelValue})])):de("",!0),Se("div",cS,[P(B)(P(l),n.instance)&&!M.vertical?(W(),et(ha,{key:0,"aria-label":(j=P(a))==null?void 0:j.prevMonth,disabled:P(F)(!1),class:Fe((te=P(g))==null?void 0:te.navBtnPrev),"el-name":"action-prev",onActivate:L[0]||(L[0]=Y=>P(S)(!1,!0)),onSetRef:L[1]||(L[1]=Y=>R(Y,0))},{default:De(()=>[M.$slots["arrow-left"]?Ee(M.$slots,"arrow-left",{key:0}):de("",!0),M.$slots["arrow-left"]?de("",!0):(W(),et(P(Ic),{key:1}))]),_:3},8,["aria-label","disabled","class"])):de("",!0),Se("div",{class:Fe(["dp__month_year_wrap",{dp__year_disable_select:M.disableYearSelect}])},[(W(!0),re(He,null,pt(ee.value,(Y,ke)=>(W(),re(He,{key:Y.type},[Se("button",{ref_for:!0,ref:ae=>R(ae,ke+1),type:"button","data-dp-element":`overlay-${Y.type}`,class:Fe(["dp__btn dp__month_year_select",{"dp--hidden-el":k.value}]),"aria-label":`${Y.text}-${Y.ariaLabel}`,"data-test-id":`${Y.type}-toggle-overlay-${n.instance}`,onClick:Y.toggle,onKeydown:ae=>P(Tn)(ae,()=>Y.toggle(),!0)},[M.$slots[Y.type]?Ee(M.$slots,Y.type,{key:0,text:Y.text,value:s[Y.type]}):de("",!0),M.$slots[Y.type]?de("",!0):(W(),re(He,{key:1},[Fn($t(Y.text),1)],64))],42,hS),$e(Qr,{name:P(b)(Y.showSelectionGrid),css:P(v)},{default:De(()=>[Y.showSelectionGrid?(W(),et(ja,{key:0,items:Y.items,"arrow-navigation":M.arrowNavigation,"hide-navigation":M.hideNavigation,"is-last":M.autoApply&&!P(c).keepActionRow,"skip-button-ref":!1,config:M.config,type:Y.type,"header-refs":[],"esc-close":M.escClose,"menu-wrap-ref":M.menuWrapRef,"text-input":M.textInput,"aria-labels":M.ariaLabels,"overlay-label":Y.overlayLabel,onSelected:Y.updateModelValue,onToggle:Y.toggle},gn({"button-icon":De(()=>[M.$slots["calendar-icon"]?Ee(M.$slots,"calendar-icon",{key:0}):de("",!0),M.$slots["calendar-icon"]?de("",!0):(W(),et(P(Si),{key:1}))]),_:2},[M.$slots[`${Y.type}-overlay-value`]?{name:"item",fn:De(({item:ae})=>[Ee(M.$slots,`${Y.type}-overlay-value`,{text:ae.text,value:ae.value})]),key:"0"}:void 0,M.$slots[`${Y.type}-overlay`]?{name:"overlay",fn:De(()=>[Ee(M.$slots,`${Y.type}-overlay`,kt({ref_for:!0},O.value(Y.type)))]),key:"1"}:void 0,M.$slots[`${Y.type}-overlay-header`]?{name:"header",fn:De(()=>[Ee(M.$slots,`${Y.type}-overlay-header`,{toggle:Y.toggle})]),key:"2"}:void 0]),1032,["items","arrow-navigation","hide-navigation","is-last","config","type","esc-close","menu-wrap-ref","text-input","aria-labels","overlay-label","onSelected","onToggle"])):de("",!0)]),_:2},1032,["name","css"])],64))),128))],2),P(B)(P(l),n.instance)&&M.vertical?(W(),et(ha,{key:1,"aria-label":(p=P(a))==null?void 0:p.prevMonth,"el-name":"action-prev",disabled:P(F)(!1),class:Fe((U=P(g))==null?void 0:U.navBtnPrev),onActivate:L[2]||(L[2]=Y=>P(S)(!1,!0))},{default:De(()=>[M.$slots["arrow-up"]?Ee(M.$slots,"arrow-up",{key:0}):de("",!0),M.$slots["arrow-up"]?de("",!0):(W(),et(P(Mc),{key:1}))]),_:3},8,["aria-label","disabled","class"])):de("",!0),P(Q)(P(l),n.instance)?(W(),et(ha,{key:2,ref:"rightIcon","el-name":"action-next",disabled:P(F)(!0),"aria-label":(le=P(a))==null?void 0:le.nextMonth,class:Fe((Ae=P(g))==null?void 0:Ae.navBtnNext),onActivate:L[3]||(L[3]=Y=>P(S)(!0,!0)),onSetRef:L[4]||(L[4]=Y=>R(Y,M.disableYearSelect?2:3))},{default:De(()=>[M.$slots[M.vertical?"arrow-down":"arrow-right"]?Ee(M.$slots,M.vertical?"arrow-down":"arrow-right",{key:0}):de("",!0),M.$slots[M.vertical?"arrow-down":"arrow-right"]?de("",!0):(W(),et(sl(M.vertical?P(Dc):P(Cc)),{key:1}))]),_:3},8,["disabled","aria-label","class"])):de("",!0)])],64))])}}}),fS={class:"dp__calendar_header",role:"row"},mS={key:0,class:"dp__calendar_header_item",role:"gridcell"},pS=["aria-label"],gS={key:0,class:"dp__calendar_item dp__week_num",role:"gridcell"},vS={class:"dp__cell_inner"},yS=["id","aria-pressed","aria-disabled","aria-label","tabindex","data-test-id","onClick","onTouchend","onKeydown","onMouseenter","onMouseleave","onMousedown"],_S=vt({compatConfig:{MODE:3},__name:"DpCalendar",props:{mappedDates:{type:Array,default:()=>[]},instance:{type:Number,default:0},month:{type:Number,default:0},year:{type:Number,default:0},...Qn},emits:["select-date","set-hover-date","handle-scroll","mount","handle-swipe","handle-space","tooltip-open","tooltip-close"],setup(n,{expose:t,emit:e}){const r=e,s=n,{buildMultiLevelMatrix:i}=ls(),{defaultedTransitions:a,defaultedConfig:l,defaultedAriaLabels:u,defaultedMultiCalendars:c,defaultedWeekNumbers:d,defaultedMultiDates:f,defaultedUI:g}=St(s),b=he(null),v=he({bottom:"",left:"",transform:""}),A=he([]),S=he(null),F=he(!0),q=he(""),B=he({startX:0,endX:0,startY:0,endY:0}),Q=he([]),se=he({left:"50%"}),J=he(!1),k=ie(()=>s.calendar?s.calendar(s.mappedDates):s.mappedDates),y=ie(()=>s.dayNames?Array.isArray(s.dayNames)?s.dayNames:s.dayNames(s.locale,+s.weekStart):XA(s.formatLocale,s.locale,+s.weekStart));Zt(()=>{r("mount",{cmp:"calendar",refs:A}),l.value.noSwipe||S.value&&(S.value.addEventListener("touchstart",R,{passive:!1}),S.value.addEventListener("touchend",w,{passive:!1}),S.value.addEventListener("touchmove",ee,{passive:!1})),s.monthChangeOnScroll&&S.value&&S.value.addEventListener("wheel",j,{passive:!1})}),Pi(()=>{l.value.noSwipe||S.value&&(S.value.removeEventListener("touchstart",R),S.value.removeEventListener("touchend",w),S.value.removeEventListener("touchmove",ee)),s.monthChangeOnScroll&&S.value&&S.value.removeEventListener("wheel",j)});const _=Y=>Y?s.vertical?"vNext":"next":s.vertical?"vPrevious":"previous",T=(Y,ke)=>{if(s.transitions){const ae=Xt(vr(fe(),s.month,s.year));q.value=Vt(Xt(vr(fe(),Y,ke)),ae)?a.value[_(!0)]:a.value[_(!1)],F.value=!1,vn(()=>{F.value=!0})}},I=ie(()=>({...g.value.calendar??{}})),O=ie(()=>Y=>{const ke=ek(Y);return{dp__marker_dot:ke.type==="dot",dp__marker_line:ke.type==="line"}}),x=ie(()=>Y=>Xe(Y,b.value)),V=ie(()=>({dp__calendar:!0,dp__calendar_next:c.value.count>0&&s.instance!==0})),N=ie(()=>Y=>s.hideOffsetDates?Y.current:!0),D=async(Y,ke)=>{const{width:ae,height:oe}=Y.getBoundingClientRect();b.value=ke.value;let C={left:`${ae/2}px`},me=-50;if(await vn(),Q.value[0]){const{left:ge,width:ve}=Q.value[0].getBoundingClientRect();ge<0&&(C={left:"0"},me=0,se.value.left=`${ae/2}px`),window.innerWidth<ge+ve&&(C={right:"0"},me=0,se.value.left=`${ve-ae/2}px`)}v.value={bottom:`${oe}px`,...C,transform:`translateX(${me}%)`}},z=async(Y,ke,ae)=>{var oe,C,me;const ge=Ut(A.value[ke][ae]);ge&&((oe=Y.marker)!=null&&oe.customPosition&&(me=(C=Y.marker)==null?void 0:C.tooltip)!=null&&me.length?v.value=Y.marker.customPosition(ge):await D(ge,Y),r("tooltip-open",Y.marker))},X=async(Y,ke,ae)=>{var oe,C;if(J.value&&f.value.enabled&&f.value.dragSelect)return r("select-date",Y);if(r("set-hover-date",Y),(C=(oe=Y.marker)==null?void 0:oe.tooltip)!=null&&C.length){if(s.hideOffsetDates&&!Y.current)return;await z(Y,ke,ae)}},H=Y=>{b.value&&(b.value=null,v.value=JSON.parse(JSON.stringify({bottom:"",left:"",transform:""})),r("tooltip-close",Y.marker))},R=Y=>{B.value.startX=Y.changedTouches[0].screenX,B.value.startY=Y.changedTouches[0].screenY},w=Y=>{B.value.endX=Y.changedTouches[0].screenX,B.value.endY=Y.changedTouches[0].screenY,M()},ee=Y=>{s.vertical&&!s.inline&&Y.preventDefault()},M=()=>{const Y=s.vertical?"Y":"X";Math.abs(B.value[`start${Y}`]-B.value[`end${Y}`])>10&&r("handle-swipe",B.value[`start${Y}`]>B.value[`end${Y}`]?"right":"left")},L=(Y,ke,ae)=>{Y&&(Array.isArray(A.value[ke])?A.value[ke][ae]=Y:A.value[ke]=[Y]),s.arrowNavigation&&i(A.value,"calendar")},j=Y=>{s.monthChangeOnScroll&&(Y.preventDefault(),r("handle-scroll",Y))},te=Y=>d.value.type==="local"?kc(Y.value,{weekStartsOn:+s.weekStart}):d.value.type==="iso"?Ec(Y.value):typeof d.value.type=="function"?d.value.type(Y.value):"",p=Y=>{const ke=Y[0];return d.value.hideOnOffsetDates?Y.some(ae=>ae.current)?te(ke):"":te(ke)},U=(Y,ke,ae=!0)=>{!ae&&ik()||(!f.value.enabled||l.value.allowPreventDefault)&&(jr(Y,l.value),r("select-date",ke))},le=Y=>{jr(Y,l.value)},Ae=Y=>{f.value.enabled&&f.value.dragSelect?(J.value=!0,r("select-date",Y)):f.value.enabled&&r("select-date",Y)};return t({triggerTransition:T}),(Y,ke)=>(W(),re("div",{class:Fe(V.value)},[Se("div",{ref_key:"calendarWrapRef",ref:S,class:Fe(I.value),role:"grid"},[Se("div",fS,[Y.weekNumbers?(W(),re("div",mS,$t(Y.weekNumName),1)):de("",!0),(W(!0),re(He,null,pt(y.value,(ae,oe)=>{var C,me;return W(),re("div",{key:oe,class:"dp__calendar_header_item",role:"gridcell","data-test-id":"calendar-header","aria-label":(me=(C=P(u))==null?void 0:C.weekDay)==null?void 0:me.call(C,oe)},[Y.$slots["calendar-header"]?Ee(Y.$slots,"calendar-header",{key:0,day:ae,index:oe}):de("",!0),Y.$slots["calendar-header"]?de("",!0):(W(),re(He,{key:1},[Fn($t(ae),1)],64))],8,pS)}),128))]),ke[2]||(ke[2]=Se("div",{class:"dp__calendar_header_separator"},null,-1)),$e(Qr,{name:q.value,css:!!Y.transitions},{default:De(()=>[F.value?(W(),re("div",{key:0,class:"dp__calendar",role:"rowgroup",onMouseleave:ke[1]||(ke[1]=ae=>J.value=!1)},[(W(!0),re(He,null,pt(k.value,(ae,oe)=>(W(),re("div",{key:oe,class:"dp__calendar_row",role:"row"},[Y.weekNumbers?(W(),re("div",gS,[Se("div",vS,$t(p(ae.days)),1)])):de("",!0),(W(!0),re(He,null,pt(ae.days,(C,me)=>{var ge,ve,Ue;return W(),re("div",{id:P(Uu)(C.value),ref_for:!0,ref:Ve=>L(Ve,oe,me),key:me+oe,role:"gridcell",class:"dp__calendar_item","aria-pressed":(C.classData.dp__active_date||C.classData.dp__range_start||C.classData.dp__range_start)??void 0,"aria-disabled":C.classData.dp__cell_disabled||void 0,"aria-label":(ve=(ge=P(u))==null?void 0:ge.day)==null?void 0:ve.call(ge,C),tabindex:!C.current&&Y.hideOffsetDates?void 0:0,"data-test-id":P(Uu)(C.value),onClick:_a(Ve=>U(Ve,C),["prevent"]),onTouchend:Ve=>U(Ve,C,!1),onKeydown:Ve=>P(Tn)(Ve,()=>Y.$emit("select-date",C)),onMouseenter:Ve=>X(C,oe,me),onMouseleave:Ve=>H(C),onMousedown:Ve=>Ae(C),onMouseup:ke[0]||(ke[0]=Ve=>J.value=!1)},[Se("div",{class:Fe(["dp__cell_inner",C.classData])},[Y.$slots.day&&N.value(C)?Ee(Y.$slots,"day",{key:0,day:+C.text,date:C.value}):de("",!0),Y.$slots.day?de("",!0):(W(),re(He,{key:1},[Fn($t(C.text),1)],64)),C.marker&&N.value(C)?(W(),re(He,{key:2},[Y.$slots.marker?Ee(Y.$slots,"marker",{key:0,marker:C.marker,day:+C.text,date:C.value}):(W(),re("div",{key:1,class:Fe(O.value(C.marker)),style:kn(C.marker.color?{backgroundColor:C.marker.color}:{})},null,6))],64)):de("",!0),x.value(C.value)?(W(),re("div",{key:3,ref_for:!0,ref_key:"activeTooltip",ref:Q,class:"dp__marker_tooltip",style:kn(v.value)},[(Ue=C.marker)!=null&&Ue.tooltip?(W(),re("div",{key:0,class:"dp__tooltip_content",onClick:le},[(W(!0),re(He,null,pt(C.marker.tooltip,(Ve,tt)=>(W(),re("div",{key:tt,class:"dp__tooltip_text"},[Y.$slots["marker-tooltip"]?Ee(Y.$slots,"marker-tooltip",{key:0,tooltip:Ve,day:C.value}):de("",!0),Y.$slots["marker-tooltip"]?de("",!0):(W(),re(He,{key:1},[Se("div",{class:"dp__tooltip_mark",style:kn(Ve.color?{backgroundColor:Ve.color}:{})},null,4),Se("div",null,$t(Ve.text),1)],64))]))),128)),Se("div",{class:"dp__arrow_bottom_tp",style:kn(se.value)},null,4)])):de("",!0)],4)):de("",!0)],2)],40,yS)}),128))]))),128))],32)):de("",!0)]),_:3},8,["name","css"])],2)],2))}}),Pf=n=>Array.isArray(n),wS=(n,t,e,r)=>{const s=he([]),i=he(new Date),a=he(),l=()=>w(n.isTextInputDate),{modelValue:u,calendars:c,time:d,today:f}=Ya(n,t,l),{defaultedMultiCalendars:g,defaultedStartTime:b,defaultedRange:v,defaultedConfig:A,defaultedTz:S,propDates:F,defaultedMultiDates:q}=St(n),{validateMonthYearInRange:B,isDisabled:Q,isDateRangeAllowed:se,checkMinMaxRange:J}=us(n),{updateTimeValues:k,getSetDateTime:y,setTime:_,assignStartTime:T,validateTime:I,disabledTimesConfig:O}=Ig(n,d,u,r),x=ie(()=>Z=>c.value[Z]?c.value[Z].month:0),V=ie(()=>Z=>c.value[Z]?c.value[Z].year:0),N=Z=>!A.value.keepViewOnOffsetClick||Z?!0:!a.value,D=(Z,_e,Oe,ze=!1)=>{var ue,Te;N(ze)&&(c.value[Z]||(c.value[Z]={month:0,year:0}),c.value[Z].month=vf(_e)?(ue=c.value[Z])==null?void 0:ue.month:_e,c.value[Z].year=vf(Oe)?(Te=c.value[Z])==null?void 0:Te.year:Oe)},z=()=>{n.autoApply&&t("select-date")},X=()=>{b.value&&T(b.value)};Zt(()=>{n.shadow||(u.value||(ke(),X()),w(!0),n.focusStartDate&&n.startDate&&ke())});const H=ie(()=>{var Z;return(Z=n.flow)!=null&&Z.length&&!n.partialFlow?n.flowStep===n.flow.length:!0}),R=()=>{n.autoApply&&H.value&&t("auto-apply",n.partialFlow?n.flowStep!==n.flow.length:!1)},w=(Z=!1)=>{if(u.value)return Array.isArray(u.value)?(s.value=u.value,U(Z)):L(u.value,Z);if(g.value.count&&Z&&!n.startDate)return M(fe(),Z)},ee=()=>Array.isArray(u.value)&&v.value.enabled?Je(u.value[0])===Je(u.value[1]??u.value[0]):!1,M=(Z=new Date,_e=!1)=>{if((!g.value.count||!g.value.static||_e)&&D(0,Je(Z),je(Z)),g.value.count&&(!u.value||ee()||!g.value.solo)&&(!g.value.solo||_e))for(let Oe=1;Oe<g.value.count;Oe++){const ze=ht(fe(),{month:x.value(Oe-1),year:V.value(Oe-1)}),ue=qp(ze,{months:1});c.value[Oe]={month:Je(ue),year:je(ue)}}},L=(Z,_e)=>{M(Z),_("hours",br(Z)),_("minutes",es(Z)),_("seconds",hi(Z)),g.value.count&&_e&&Y()},j=Z=>{if(g.value.count){if(g.value.solo)return 0;const _e=Je(Z[0]),Oe=Je(Z[1]);return Math.abs(Oe-_e)<g.value.count?0:1}return 1},te=(Z,_e)=>{Z[1]&&v.value.showLastInRange?M(Z[j(Z)],_e):M(Z[0],_e);const Oe=(ze,ue)=>[ze(Z[0]),Z[1]?ze(Z[1]):d[ue][1]];_("hours",Oe(br,"hours")),_("minutes",Oe(es,"minutes")),_("seconds",Oe(hi,"seconds"))},p=(Z,_e)=>{if((v.value.enabled||n.weekPicker)&&!q.value.enabled)return te(Z,_e);if(q.value.enabled&&_e){const Oe=Z[Z.length-1];return L(Oe,_e)}},U=Z=>{const _e=u.value;p(_e,Z),g.value.count&&g.value.solo&&Y()},le=(Z,_e)=>{const Oe=ht(fe(),{month:x.value(_e),year:V.value(_e)}),ze=Z<0?Hn(Oe,1):fi(Oe,1);B(Je(ze),je(ze),Z<0,n.preventMinMaxNavigation)&&(D(_e,Je(ze),je(ze)),t("update-month-year",{instance:_e,month:Je(ze),year:je(ze)}),g.value.count&&!g.value.solo&&Ae(_e),e())},Ae=Z=>{for(let _e=Z-1;_e>=0;_e--){const Oe=fi(ht(fe(),{month:x.value(_e+1),year:V.value(_e+1)}),1);D(_e,Je(Oe),je(Oe))}for(let _e=Z+1;_e<=g.value.count-1;_e++){const Oe=Hn(ht(fe(),{month:x.value(_e-1),year:V.value(_e-1)}),1);D(_e,Je(Oe),je(Oe))}},Y=()=>{if(Array.isArray(u.value)&&u.value.length===2){const Z=fe(fe(u.value[1]?u.value[1]:Hn(u.value[0],1))),[_e,Oe]=[Je(u.value[0]),je(u.value[0])],[ze,ue]=[Je(u.value[1]),je(u.value[1])];(_e!==ze||_e===ze&&Oe!==ue)&&g.value.solo&&D(1,Je(Z),je(Z))}else u.value&&!Array.isArray(u.value)&&(D(0,Je(u.value),je(u.value)),M(fe()))},ke=()=>{n.startDate&&(D(0,Je(fe(n.startDate)),je(fe(n.startDate))),g.value.count&&Ae(0))},ae=(Z,_e)=>{if(n.monthChangeOnScroll){const Oe=new Date().getTime()-i.value.getTime(),ze=Math.abs(Z.deltaY);let ue=500;ze>1&&(ue=100),ze>100&&(ue=0),Oe>ue&&(i.value=new Date,le(n.monthChangeOnScroll!=="inverse"?-Z.deltaY:Z.deltaY,_e))}},oe=(Z,_e,Oe=!1)=>{n.monthChangeOnArrows&&n.vertical===Oe&&C(Z,_e)},C=(Z,_e)=>{le(Z==="right"?-1:1,_e)},me=Z=>{if(F.value.markers)return Bo(Z.value,F.value.markers)},ge=(Z,_e)=>{switch(n.sixWeeks===!0?"append":n.sixWeeks){case"prepend":return[!0,!1];case"center":return[Z==0,!0];case"fair":return[Z==0||_e>Z,!0];case"append":return[!1,!1];default:return[!1,!1]}},ve=(Z,_e,Oe,ze)=>{if(n.sixWeeks&&Z.length<6){const ue=6-Z.length,Te=(_e.getDay()+7-ze)%7,Ie=6-(Oe.getDay()+7-ze)%7,[Dn,_n]=ge(Te,Ie);for(let Jn=1;Jn<=ue;Jn++)if(_n?!!(Jn%2)==Dn:Dn){const Pn=Z[0].days[0],Bs=Ue(Vn(Pn.value,-7),Je(_e));Z.unshift({days:Bs})}else{const Pn=Z[Z.length-1],Bs=Pn.days[Pn.days.length-1],en=Ue(Vn(Bs.value,1),Je(_e));Z.push({days:en})}}return Z},Ue=(Z,_e)=>{const Oe=fe(Z),ze=[];for(let ue=0;ue<7;ue++){const Te=Vn(Oe,ue),Ie=Je(Te)!==_e;ze.push({text:n.hideOffsetDates&&Ie?"":Te.getDate(),value:Te,current:!Ie,classData:{}})}return ze},Ve=(Z,_e)=>{const Oe=[],ze=new Date(_e,Z),ue=new Date(_e,Z+1,0),Te=n.weekStart,Ie=Kn(ze,{weekStartsOn:Te}),Dn=_n=>{const Jn=Ue(_n,Z);if(Oe.push({days:Jn}),!Oe[Oe.length-1].days.some(Pn=>Xe(Xt(Pn.value),Xt(ue)))){const Pn=Vn(_n,7);Dn(Pn)}};return Dn(Ie),ve(Oe,ze,ue,Te)},tt=Z=>{const _e=zr(fe(Z.value),d.hours,d.minutes,Ce());t("date-update",_e),q.value.enabled?Lc(_e,u,q.value.limit):u.value=_e,r(),vn().then(()=>{R()})},yt=Z=>v.value.noDisabledRange?yg(s.value[0],Z).some(_e=>Q(_e)):!1,G=()=>{s.value=u.value?u.value.slice():[],s.value.length===2&&!(v.value.fixedStart||v.value.fixedEnd)&&(s.value=[])},we=(Z,_e)=>{const Oe=[fe(Z.value),Vn(fe(Z.value),+v.value.autoRange)];se(Oe)?(_e&&Qe(Z.value),s.value=Oe):t("invalid-date",Z.value)},Qe=Z=>{const _e=Je(fe(Z)),Oe=je(fe(Z));if(D(0,_e,Oe),g.value.count>0)for(let ze=1;ze<g.value.count;ze++){const ue=lk(ht(fe(Z),{year:V.value(ze-1),month:x.value(ze-1)}));D(ze,ue.month,ue.year)}},Ke=Z=>{if(yt(Z.value)||!J(Z.value,u.value,v.value.fixedStart?0:1))return t("invalid-date",Z.value);s.value=kg(fe(Z.value),u,t,v)},ct=(Z,_e)=>{if(G(),v.value.autoRange)return we(Z,_e);if(v.value.fixedStart||v.value.fixedEnd)return Ke(Z);s.value[0]?J(fe(Z.value),u.value)&&!yt(Z.value)?xt(fe(Z.value),fe(s.value[0]))?(s.value.unshift(fe(Z.value)),t("range-end",s.value[0])):(s.value[1]=fe(Z.value),t("range-end",s.value[1])):(n.autoApply&&t("auto-apply-invalid",Z.value),t("invalid-date",Z.value)):(s.value[0]=fe(Z.value),t("range-start",s.value[0]))},Ce=(Z=!0)=>n.enableSeconds?Array.isArray(d.seconds)?Z?d.seconds[0]:d.seconds[1]:d.seconds:0,Pt=Z=>{s.value[Z]=zr(s.value[Z],d.hours[Z],d.minutes[Z],Ce(Z!==1))},on=()=>{var Z,_e;s.value[0]&&s.value[1]&&+((Z=s.value)==null?void 0:Z[0])>+((_e=s.value)==null?void 0:_e[1])&&(s.value.reverse(),t("range-start",s.value[0]),t("range-end",s.value[1]))},cr=()=>{s.value.length&&(s.value[0]&&!s.value[1]?Pt(0):(Pt(0),Pt(1),r()),on(),u.value=s.value.slice(),fl(s.value,t,n.autoApply,n.modelAuto))},Mn=(Z,_e=!1)=>{if(Q(Z.value)||!Z.current&&n.hideOffsetDates)return t("invalid-date",Z.value);if(a.value=JSON.parse(JSON.stringify(Z)),!v.value.enabled)return tt(Z);Pf(d.hours)&&Pf(d.minutes)&&!q.value.enabled&&(ct(Z,_e),cr())},Ir=(Z,_e)=>{var Oe;D(Z,_e.month,_e.year,!0),g.value.count&&!g.value.solo&&Ae(Z),t("update-month-year",{instance:Z,month:_e.month,year:_e.year}),e(g.value.solo?Z:void 0);const ze=(Oe=n.flow)!=null&&Oe.length?n.flow[n.flowStep]:void 0;!_e.fromNav&&(ze===mn.month||ze===mn.year)&&r()},Ls=(Z,_e)=>{Ag({value:Z,modelValue:u,range:v.value.enabled,timezone:_e?void 0:S.value.timezone}),z(),n.multiCalendars&&vn().then(()=>w(!0))},cs=()=>{const Z=Oc(fe(),S.value);!v.value.enabled&&!q.value.enabled?u.value=Z:u.value&&Array.isArray(u.value)&&u.value[0]?q.value.enabled?u.value=[...u.value,Z]:u.value=xt(Z,u.value[0])?[Z,u.value[0]]:[u.value[0],Z]:u.value=[Z],z()},Di=()=>{if(Array.isArray(u.value))if(q.value.enabled){const Z=Oi();u.value[u.value.length-1]=y(Z)}else u.value=u.value.map((Z,_e)=>Z&&y(Z,_e));else u.value=y(u.value);t("time-update")},Oi=()=>Array.isArray(u.value)&&u.value.length?u.value[u.value.length-1]:null;return{calendars:c,modelValue:u,month:x,year:V,time:d,disabledTimesConfig:O,today:f,validateTime:I,getCalendarDays:Ve,getMarker:me,handleScroll:ae,handleSwipe:C,handleArrow:oe,selectDate:Mn,updateMonthYear:Ir,presetDate:Ls,selectCurrentDate:cs,updateTime:(Z,_e=!0,Oe=!1)=>{k(Z,_e,Oe,Di)},assignMonthAndYear:M,setStartTime:X}},bS={key:0},TS=vt({__name:"DatePicker",props:{...Qn},emits:["tooltip-open","tooltip-close","mount","update:internal-model-value","update-flow-step","reset-flow","auto-apply","focus-menu","select-date","range-start","range-end","invalid-fixed-range","time-update","am-pm-change","time-picker-open","time-picker-close","recalculate-position","update-month-year","auto-apply-invalid","date-update","invalid-date","overlay-toggle"],setup(n,{expose:t,emit:e}){const r=e,s=n,{calendars:i,month:a,year:l,modelValue:u,time:c,disabledTimesConfig:d,today:f,validateTime:g,getCalendarDays:b,getMarker:v,handleArrow:A,handleScroll:S,handleSwipe:F,selectDate:q,updateMonthYear:B,presetDate:Q,selectCurrentDate:se,updateTime:J,assignMonthAndYear:k,setStartTime:y}=wS(s,r,ee,M),_=Rs(),{setHoverDate:T,getDayClassData:I,clearHoverDate:O}=LS(u,s),{defaultedMultiCalendars:x}=St(s),V=he([]),N=he([]),D=he(null),z=Cn(_,"calendar"),X=Cn(_,"monthYear"),H=Cn(_,"timePicker"),R=ae=>{s.shadow||r("mount",ae)};qt(i,()=>{s.shadow||setTimeout(()=>{r("recalculate-position")},0)},{deep:!0}),qt(x,(ae,oe)=>{ae.count-oe.count>0&&k()},{deep:!0});const w=ie(()=>ae=>b(a.value(ae),l.value(ae)).map(oe=>({...oe,days:oe.days.map(C=>(C.marker=v(C),C.classData=I(C),C))})));function ee(ae){var oe;ae||ae===0?(oe=N.value[ae])==null||oe.triggerTransition(a.value(ae),l.value(ae)):N.value.forEach((C,me)=>C.triggerTransition(a.value(me),l.value(me)))}function M(){r("update-flow-step")}const L=(ae,oe=!1)=>{q(ae,oe),s.spaceConfirm&&r("select-date")},j=(ae,oe,C=0)=>{var me;(me=V.value[C])==null||me.toggleMonthPicker(ae,oe)},te=(ae,oe,C=0)=>{var me;(me=V.value[C])==null||me.toggleYearPicker(ae,oe)},p=(ae,oe,C)=>{var me;(me=D.value)==null||me.toggleTimePicker(ae,oe,C)},U=(ae,oe)=>{var C;if(!s.range){const me=u.value?u.value:f,ge=oe?new Date(oe):me,ve=ae?Kn(ge,{weekStartsOn:1}):Gp(ge,{weekStartsOn:1});q({value:ve,current:Je(ge)===a.value(0),text:"",classData:{}}),(C=document.getElementById(Uu(ve)))==null||C.focus()}},le=ae=>{var oe;(oe=V.value[0])==null||oe.handleMonthYearChange(ae,!0)},Ae=ae=>{B(0,{month:a.value(0),year:l.value(0)+(ae?1:-1),fromNav:!0})},Y=(ae,oe)=>{ae===mn.time&&r(`time-picker-${oe?"open":"close"}`),r("overlay-toggle",{open:oe,overlay:ae})},ke=ae=>{r("overlay-toggle",{open:!1,overlay:ae}),r("focus-menu")};return t({clearHoverDate:O,presetDate:Q,selectCurrentDate:se,toggleMonthPicker:j,toggleYearPicker:te,toggleTimePicker:p,handleArrow:A,updateMonthYear:B,getSidebarProps:()=>({modelValue:u,month:a,year:l,time:c,updateTime:J,updateMonthYear:B,selectDate:q,presetDate:Q}),changeMonth:le,changeYear:Ae,selectWeekDate:U,setStartTime:y}),(ae,oe)=>(W(),re(He,null,[$e(dl,{"multi-calendars":P(x).count,collapse:ae.collapse,"is-mobile":ae.isMobile},{default:De(({instance:C,index:me})=>[ae.disableMonthYearSelect?de("",!0):(W(),et(dS,kt({key:0,ref:ge=>{ge&&(V.value[me]=ge)},months:P(cg)(ae.formatLocale,ae.locale,ae.monthNameFormat),years:P(Vc)(ae.yearRange,ae.locale,ae.reverseYears),month:P(a)(C),year:P(l)(C),instance:C},ae.$props,{onMount:oe[0]||(oe[0]=ge=>R(P(bs).header)),onResetFlow:oe[1]||(oe[1]=ge=>ae.$emit("reset-flow")),onUpdateMonthYear:ge=>P(B)(C,ge),onOverlayClosed:ke,onOverlayOpened:oe[2]||(oe[2]=ge=>ae.$emit("overlay-toggle",{open:!0,overlay:ge}))}),gn({_:2},[pt(P(X),(ge,ve)=>({name:ge,fn:De(Ue=>[Ee(ae.$slots,ge,Gt(Sn(Ue)))])}))]),1040,["months","years","month","year","instance","onUpdateMonthYear"])),$e(_S,kt({ref:ge=>{ge&&(N.value[me]=ge)},"mapped-dates":w.value(C),month:P(a)(C),year:P(l)(C),instance:C},ae.$props,{onSelectDate:ge=>P(q)(ge,C!==1),onHandleSpace:ge=>L(ge,C!==1),onSetHoverDate:oe[3]||(oe[3]=ge=>P(T)(ge)),onHandleScroll:ge=>P(S)(ge,C),onHandleSwipe:ge=>P(F)(ge,C),onMount:oe[4]||(oe[4]=ge=>R(P(bs).calendar)),onResetFlow:oe[5]||(oe[5]=ge=>ae.$emit("reset-flow")),onTooltipOpen:oe[6]||(oe[6]=ge=>ae.$emit("tooltip-open",ge)),onTooltipClose:oe[7]||(oe[7]=ge=>ae.$emit("tooltip-close",ge))}),gn({_:2},[pt(P(z),(ge,ve)=>({name:ge,fn:De(Ue=>[Ee(ae.$slots,ge,Gt(Sn({...Ue})))])}))]),1040,["mapped-dates","month","year","instance","onSelectDate","onHandleSpace","onHandleScroll","onHandleSwipe"])]),_:3},8,["multi-calendars","collapse","is-mobile"]),ae.enableTimePicker?(W(),re("div",bS,[ae.$slots["time-picker"]?Ee(ae.$slots,"time-picker",Gt(kt({key:0},{time:P(c),updateTime:P(J)}))):(W(),et(Rg,kt({key:1,ref_key:"timePickerRef",ref:D},ae.$props,{hours:P(c).hours,minutes:P(c).minutes,seconds:P(c).seconds,"internal-model-value":ae.internalModelValue,"disabled-times-config":P(d),"validate-time":P(g),onMount:oe[8]||(oe[8]=C=>R(P(bs).timePicker)),"onUpdate:hours":oe[9]||(oe[9]=C=>P(J)(C)),"onUpdate:minutes":oe[10]||(oe[10]=C=>P(J)(C,!1)),"onUpdate:seconds":oe[11]||(oe[11]=C=>P(J)(C,!1,!0)),onResetFlow:oe[12]||(oe[12]=C=>ae.$emit("reset-flow")),onOverlayClosed:oe[13]||(oe[13]=C=>Y(C,!1)),onOverlayOpened:oe[14]||(oe[14]=C=>Y(C,!0)),onAmPmChange:oe[15]||(oe[15]=C=>ae.$emit("am-pm-change",C))}),gn({_:2},[pt(P(H),(C,me)=>({name:C,fn:De(ge=>[Ee(ae.$slots,C,Gt(Sn(ge)))])}))]),1040,["hours","minutes","seconds","internal-model-value","disabled-times-config","validate-time"]))])):de("",!0)],64))}}),PS=(n,t)=>{const e=he(),{defaultedMultiCalendars:r,defaultedConfig:s,defaultedHighlight:i,defaultedRange:a,propDates:l,defaultedFilters:u,defaultedMultiDates:c}=St(n),{modelValue:d,year:f,month:g,calendars:b}=Ya(n,t),{isDisabled:v}=us(n),{selectYear:A,groupedYears:S,showYearPicker:F,isDisabled:q,toggleYearPicker:B,handleYearSelect:Q,handleYear:se}=Sg({modelValue:d,multiCalendars:r,range:a,highlight:i,calendars:b,propDates:l,month:g,year:f,filters:u,props:n,emit:t}),J=(N,D)=>[N,D].map(z=>rr(z,"MMMM",{locale:n.formatLocale})).join("-"),k=ie(()=>N=>d.value?Array.isArray(d.value)?d.value.some(D=>mf(N,D)):mf(d.value,N):!1),y=N=>{if(a.value.enabled){if(Array.isArray(d.value)){const D=Xe(N,d.value[0])||Xe(N,d.value[1]);return Ma(d.value,e.value,N)&&!D}return!1}return!1},_=(N,D)=>N.quarter===lf(D)&&N.year===je(D),T=N=>typeof i.value=="function"?i.value({quarter:lf(N),year:je(N)}):!!i.value.quarters.find(D=>_(D,N)),I=ie(()=>N=>{const D=ht(new Date,{year:f.value(N)});return XP({start:Ca(D),end:Kp(D)}).map(z=>{const X=ys(z),H=uf(z),R=v(z),w=y(X),ee=T(X);return{text:J(X,H),value:X,active:k.value(X),highlighted:ee,disabled:R,isBetween:w}})}),O=N=>{Lc(N,d,c.value.limit),t("auto-apply",!0)},x=N=>{d.value=Bc(d,N,t),fl(d.value,t,n.autoApply,n.modelAuto)},V=N=>{d.value=N,t("auto-apply")};return{defaultedConfig:s,defaultedMultiCalendars:r,groupedYears:S,year:f,isDisabled:q,quarters:I,showYearPicker:F,modelValue:d,setHoverDate:N=>{e.value=N},selectYear:A,selectQuarter:(N,D,z)=>{if(!z)return b.value[D].month=Je(uf(N)),c.value.enabled?O(N):a.value.enabled?x(N):V(N)},toggleYearPicker:B,handleYearSelect:Q,handleYear:se}},ES={class:"dp--quarter-items"},AS=["data-test-id","disabled","onClick","onMouseover"],kS=vt({compatConfig:{MODE:3},__name:"QuarterPicker",props:{...Qn},emits:["update:internal-model-value","reset-flow","overlay-closed","auto-apply","range-start","range-end","overlay-toggle","update-month-year"],setup(n,{expose:t,emit:e}){const r=e,s=n,i=Rs(),a=Cn(i,"yearMode"),{defaultedMultiCalendars:l,defaultedConfig:u,groupedYears:c,year:d,isDisabled:f,quarters:g,modelValue:b,showYearPicker:v,setHoverDate:A,selectQuarter:S,toggleYearPicker:F,handleYearSelect:q,handleYear:B}=PS(s,r);return t({getSidebarProps:()=>({modelValue:b,year:d,selectQuarter:S,handleYearSelect:q,handleYear:B})}),(Q,se)=>(W(),et(dl,{"multi-calendars":P(l).count,collapse:Q.collapse,stretch:"","is-mobile":Q.isMobile},{default:De(({instance:J})=>[Se("div",{class:"dp-quarter-picker-wrap",style:kn({minHeight:`${P(u).modeHeight}px`})},[Q.$slots["top-extra"]?Ee(Q.$slots,"top-extra",{key:0,value:Q.internalModelValue}):de("",!0),Se("div",null,[$e(Eg,kt(Q.$props,{items:P(c)(J),instance:J,"show-year-picker":P(v)[J],year:P(d)(J),"is-disabled":k=>P(f)(J,k),onHandleYear:k=>P(B)(J,k),onYearSelect:k=>P(q)(k,J),onToggleYearPicker:k=>P(F)(J,k==null?void 0:k.flow,k==null?void 0:k.show)}),gn({_:2},[pt(P(a),(k,y)=>({name:k,fn:De(_=>[Ee(Q.$slots,k,Gt(Sn(_)))])}))]),1040,["items","instance","show-year-picker","year","is-disabled","onHandleYear","onYearSelect","onToggleYearPicker"])]),Se("div",ES,[(W(!0),re(He,null,pt(P(g)(J),(k,y)=>(W(),re("div",{key:y},[Se("button",{type:"button",class:Fe(["dp--qr-btn",{"dp--qr-btn-active":k.active,"dp--qr-btn-between":k.isBetween,"dp--qr-btn-disabled":k.disabled,"dp--highlighted":k.highlighted}]),"data-test-id":k.value,disabled:k.disabled,onClick:_=>P(S)(k.value,J,k.disabled),onMouseover:_=>P(A)(k.value)},[Q.$slots.quarter?Ee(Q.$slots,"quarter",{key:0,value:k.value,text:k.text}):(W(),re(He,{key:1},[Fn($t(k.text),1)],64))],42,AS)]))),128))])],4)]),_:3},8,["multi-calendars","collapse","is-mobile"]))}}),Cg=(n,t)=>{const e=he(0);Zt(()=>{r(),window.addEventListener("resize",r,{passive:!0})}),Pi(()=>{window.removeEventListener("resize",r)});const r=()=>{e.value=window.document.documentElement.clientWidth};return{isMobile:ie(()=>e.value<=n.value.mobileBreakpoint&&!t?!0:void 0)}},SS=["id","tabindex","role","aria-label"],RS={key:0,class:"dp--menu-load-container"},IS={key:1,class:"dp--menu-header"},CS=["data-dp-mobile"],xS={key:0,class:"dp__sidebar_left"},MS=["data-dp-mobile"],DS=["data-test-id","data-dp-mobile","onClick","onKeydown"],OS={key:2,class:"dp__sidebar_right"},VS={key:3,class:"dp__action_extra"},Ef=vt({compatConfig:{MODE:3},__name:"DatepickerMenu",props:{...hl,shadow:{type:Boolean,default:!1},openOnTop:{type:Boolean,default:!1},internalModelValue:{type:[Date,Array],default:null},noOverlayFocus:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},getInputRect:{type:Function,default:()=>({})},isTextInputDate:{type:Boolean,default:!1}},emits:["close-picker","select-date","auto-apply","time-update","flow-step","update-month-year","invalid-select","update:internal-model-value","recalculate-position","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","auto-apply-invalid","date-update","invalid-date","overlay-toggle","menu-blur"],setup(n,{expose:t,emit:e}){const r=e,s=n,i=he(null),a=ie(()=>{const{openOnTop:G,...we}=s;return{...we,isMobile:S.value,flowStep:x.value,menuWrapRef:i.value}}),{setMenuFocused:l,setShiftKey:u,control:c}=Pg(),d=Rs(),{defaultedTextInput:f,defaultedInline:g,defaultedConfig:b,defaultedUI:v,handleEventPropagation:A}=St(s),{isMobile:S}=Cg(b,s.shadow),F=he(null),q=he(0),B=he(null),Q=he(!1),se=he(null),J=he(!1),k=G=>{J.value=!0,b.value.allowPreventDefault&&G.preventDefault(),jr(G,b.value,!0)};Zt(()=>{if(!s.shadow){Q.value=!0,y(),window.addEventListener("resize",y);const G=Ut(i);G&&!f.value.enabled&&!g.value.enabled&&(l(!0),R()),G&&(G.addEventListener("pointerdown",k),G.addEventListener("mousedown",k))}document.addEventListener("mousedown",yt)}),Pi(()=>{window.removeEventListener("resize",y),document.removeEventListener("mousedown",yt);const G=Ut(i);G&&(G.removeEventListener("pointerdown",k),G.removeEventListener("mousedown",k))});const y=()=>{const G=Ut(B);G&&(q.value=G.getBoundingClientRect().width)},{arrowRight:_,arrowLeft:T,arrowDown:I,arrowUp:O}=ls(),{flowStep:x,updateFlowStep:V,childMount:N,resetFlow:D,handleFlow:z}=BS(s,r,se),X=ie(()=>s.monthPicker?zk:s.yearPicker?Hk:s.timePicker?aS:s.quarterPicker?kS:TS),H=ie(()=>{var G;if(b.value.arrowLeft)return b.value.arrowLeft;const we=(G=i.value)==null?void 0:G.getBoundingClientRect(),Qe=s.getInputRect();return(Qe==null?void 0:Qe.width)<(q==null?void 0:q.value)&&(Qe==null?void 0:Qe.left)<=((we==null?void 0:we.left)??0)?`${(Qe==null?void 0:Qe.width)/2}px`:(Qe==null?void 0:Qe.right)>=((we==null?void 0:we.right)??0)&&(Qe==null?void 0:Qe.width)<(q==null?void 0:q.value)?`${(q==null?void 0:q.value)-(Qe==null?void 0:Qe.width)/2}px`:"50%"}),R=()=>{const G=Ut(i);G&&G.focus({preventScroll:!0})},w=ie(()=>{var G;return((G=se.value)==null?void 0:G.getSidebarProps())||{}}),ee=()=>{s.openOnTop&&r("recalculate-position")},M=Cn(d,"action"),L=ie(()=>s.monthPicker||s.yearPicker?Cn(d,"monthYear"):s.timePicker?Cn(d,"timePicker"):Cn(d,"shared")),j=ie(()=>s.openOnTop?"dp__arrow_bottom":"dp__arrow_top"),te=ie(()=>({dp__menu_disabled:s.disabled,dp__menu_readonly:s.readonly,"dp-menu-loading":s.loading})),p=ie(()=>({dp__menu:!0,dp__menu_index:!g.value.enabled,dp__relative:g.value.enabled,...v.value.menu??{}})),U=G=>{jr(G,b.value,!0)},le=G=>{s.escClose&&(r("close-picker"),A(G))},Ae=G=>{if(s.arrowNavigation){if(G===wn.up)return O();if(G===wn.down)return I();if(G===wn.left)return T();if(G===wn.right)return _()}else G===wn.left||G===wn.up?C("handleArrow",wn.left,0,G===wn.up):C("handleArrow",wn.right,0,G===wn.down)},Y=G=>{u(G.shiftKey),!s.disableMonthYearSelect&&G.code===Tt.tab&&G.target.classList.contains("dp__menu")&&c.value.shiftKeyInMenu&&(G.preventDefault(),jr(G,b.value,!0),r("close-picker"))},ke=()=>{R(),r("time-picker-close")},ae=G=>{var we,Qe,Ke;(we=se.value)==null||we.toggleTimePicker(!1,!1),(Qe=se.value)==null||Qe.toggleMonthPicker(!1,!1,G),(Ke=se.value)==null||Ke.toggleYearPicker(!1,!1,G)},oe=(G,we=0)=>{var Qe,Ke,ct;return G==="month"?(Qe=se.value)==null?void 0:Qe.toggleMonthPicker(!1,!0,we):G==="year"?(Ke=se.value)==null?void 0:Ke.toggleYearPicker(!1,!0,we):G==="time"?(ct=se.value)==null?void 0:ct.toggleTimePicker(!0,!1):ae(we)},C=(G,...we)=>{var Qe,Ke;(Qe=se.value)!=null&&Qe[G]&&((Ke=se.value)==null||Ke[G](...we))},me=()=>{C("selectCurrentDate")},ge=(G,we)=>{C("presetDate",Zy(G),we)},ve=()=>{C("clearHoverDate")},Ue=(G,we)=>{C("updateMonthYear",G,we)},Ve=(G,we)=>{G.preventDefault(),Ae(we)},tt=G=>{var we,Qe,Ke;if(Y(G),G.key===Tt.home||G.key===Tt.end)return C("selectWeekDate",G.key===Tt.home,G.target.getAttribute("id"));switch((G.key===Tt.pageUp||G.key===Tt.pageDown)&&(G.shiftKey?(C("changeYear",G.key===Tt.pageUp),(we=Lu(i.value,"overlay-year"))==null||we.focus()):(C("changeMonth",G.key===Tt.pageUp),(Qe=Lu(i.value,G.key===Tt.pageUp?"action-prev":"action-next"))==null||Qe.focus()),G.target.getAttribute("id")&&((Ke=i.value)==null||Ke.focus({preventScroll:!0}))),G.key){case Tt.esc:return le(G);case Tt.arrowLeft:return Ve(G,wn.left);case Tt.arrowRight:return Ve(G,wn.right);case Tt.arrowUp:return Ve(G,wn.up);case Tt.arrowDown:return Ve(G,wn.down);default:return}},yt=G=>{var we;g.value.enabled&&!g.value.input&&!((we=i.value)!=null&&we.contains(G.target))&&J.value&&(J.value=!1,r("menu-blur"))};return t({updateMonthYear:Ue,switchView:oe,handleFlow:z,onValueCleared:()=>{var G,we;(we=(G=se.value)==null?void 0:G.setStartTime)==null||we.call(G)}}),(G,we)=>{var Qe,Ke,ct;return W(),re("div",{id:G.uid?`dp-menu-${G.uid}`:void 0,ref_key:"dpMenuRef",ref:i,tabindex:P(g).enabled?void 0:"0",role:P(g).enabled?void 0:"dialog","aria-label":(Qe=G.ariaLabels)==null?void 0:Qe.menu,class:Fe(p.value),style:kn({"--dp-arrow-left":H.value}),onMouseleave:ve,onClick:U,onKeydown:tt},[(G.disabled||G.readonly)&&P(g).enabled||G.loading?(W(),re("div",{key:0,class:Fe(te.value)},[G.loading?(W(),re("div",RS,we[19]||(we[19]=[Se("span",{class:"dp--menu-loader"},null,-1)]))):de("",!0)],2)):de("",!0),G.$slots["menu-header"]?(W(),re("div",IS,[Ee(G.$slots,"menu-header")])):de("",!0),!P(g).enabled&&!G.teleportCenter?(W(),re("div",{key:2,class:Fe(j.value)},null,2)):de("",!0),Se("div",{ref_key:"innerMenuRef",ref:B,class:Fe({dp__menu_content_wrapper:((Ke=G.presetDates)==null?void 0:Ke.length)||!!G.$slots["left-sidebar"]||!!G.$slots["right-sidebar"],"dp--menu-content-wrapper-collapsed":n.collapse&&(((ct=G.presetDates)==null?void 0:ct.length)||!!G.$slots["left-sidebar"]||!!G.$slots["right-sidebar"])}),"data-dp-mobile":P(S),style:kn({"--dp-menu-width":`${q.value}px`})},[G.$slots["left-sidebar"]?(W(),re("div",xS,[Ee(G.$slots,"left-sidebar",Gt(Sn(w.value)))])):de("",!0),G.presetDates.length?(W(),re("div",{key:1,class:Fe({"dp--preset-dates-collapsed":n.collapse,"dp--preset-dates":!0}),"data-dp-mobile":P(S)},[(W(!0),re(He,null,pt(G.presetDates,(Ce,Pt)=>(W(),re(He,{key:Pt},[Ce.slot?Ee(G.$slots,Ce.slot,{key:0,presetDate:ge,label:Ce.label,value:Ce.value}):(W(),re("button",{key:1,type:"button",style:kn(Ce.style||{}),class:Fe(["dp__btn dp--preset-range",{"dp--preset-range-collapsed":n.collapse}]),"data-test-id":Ce.testId??void 0,"data-dp-mobile":P(S),onClick:_a(on=>ge(Ce.value,Ce.noTz),["prevent"]),onKeydown:on=>P(Tn)(on,()=>ge(Ce.value,Ce.noTz),!0)},$t(Ce.label),47,DS))],64))),128))],10,MS)):de("",!0),Se("div",{ref_key:"calendarWrapperRef",ref:F,class:"dp__instance_calendar",role:"document"},[(W(),et(sl(X.value),kt({ref_key:"dynCmpRef",ref:se},a.value,{"flow-step":P(x),onMount:P(N),onUpdateFlowStep:P(V),onResetFlow:P(D),onFocusMenu:R,onSelectDate:we[0]||(we[0]=Ce=>G.$emit("select-date")),onDateUpdate:we[1]||(we[1]=Ce=>G.$emit("date-update",Ce)),onTooltipOpen:we[2]||(we[2]=Ce=>G.$emit("tooltip-open",Ce)),onTooltipClose:we[3]||(we[3]=Ce=>G.$emit("tooltip-close",Ce)),onAutoApply:we[4]||(we[4]=Ce=>G.$emit("auto-apply",Ce)),onRangeStart:we[5]||(we[5]=Ce=>G.$emit("range-start",Ce)),onRangeEnd:we[6]||(we[6]=Ce=>G.$emit("range-end",Ce)),onInvalidFixedRange:we[7]||(we[7]=Ce=>G.$emit("invalid-fixed-range",Ce)),onTimeUpdate:we[8]||(we[8]=Ce=>G.$emit("time-update")),onAmPmChange:we[9]||(we[9]=Ce=>G.$emit("am-pm-change",Ce)),onTimePickerOpen:we[10]||(we[10]=Ce=>G.$emit("time-picker-open",Ce)),onTimePickerClose:ke,onRecalculatePosition:ee,onUpdateMonthYear:we[11]||(we[11]=Ce=>G.$emit("update-month-year",Ce)),onAutoApplyInvalid:we[12]||(we[12]=Ce=>G.$emit("auto-apply-invalid",Ce)),onInvalidDate:we[13]||(we[13]=Ce=>G.$emit("invalid-date",Ce)),onOverlayToggle:we[14]||(we[14]=Ce=>G.$emit("overlay-toggle",Ce)),"onUpdate:internalModelValue":we[15]||(we[15]=Ce=>G.$emit("update:internal-model-value",Ce))}),gn({_:2},[pt(L.value,(Ce,Pt)=>({name:Ce,fn:De(on=>[Ee(G.$slots,Ce,Gt(Sn({...on})))])}))]),1040,["flow-step","onMount","onUpdateFlowStep","onResetFlow"]))],512),G.$slots["right-sidebar"]?(W(),re("div",OS,[Ee(G.$slots,"right-sidebar",Gt(Sn(w.value)))])):de("",!0),G.$slots["action-extra"]?(W(),re("div",VS,[G.$slots["action-extra"]?Ee(G.$slots,"action-extra",{key:0,selectCurrentDate:me}):de("",!0)])):de("",!0)],14,CS),!G.autoApply||P(b).keepActionRow?(W(),et(Vk,kt({key:3,"menu-mount":Q.value},a.value,{"calendar-width":q.value,onClosePicker:we[16]||(we[16]=Ce=>G.$emit("close-picker")),onSelectDate:we[17]||(we[17]=Ce=>G.$emit("select-date")),onInvalidSelect:we[18]||(we[18]=Ce=>G.$emit("invalid-select")),onSelectNow:me}),gn({_:2},[pt(P(M),(Ce,Pt)=>({name:Ce,fn:De(on=>[Ee(G.$slots,Ce,Gt(Sn({...on})))])}))]),1040,["menu-mount","calendar-width"])):de("",!0)],46,SS)}}});var Js=(n=>(n.center="center",n.left="left",n.right="right",n))(Js||{});const NS=({menuRef:n,menuRefInner:t,inputRef:e,pickerWrapperRef:r,inline:s,emit:i,props:a,slots:l})=>{const{defaultedConfig:u}=St(a),c=he({}),d=he(!1),f=he({top:"0",left:"0"}),g=he(!1),b=ya(a,"teleportCenter");qt(b,()=>{f.value=JSON.parse(JSON.stringify({})),se()});const v=D=>{if(a.teleport){const z=D.getBoundingClientRect();return{left:z.left+window.scrollX,top:z.top+window.scrollY}}return{top:0,left:0}},A=(D,z)=>{f.value.left=`${D+z-c.value.width}px`},S=D=>{f.value.left=`${D}px`},F=(D,z)=>{a.position===Js.left&&S(D),a.position===Js.right&&A(D,z),a.position===Js.center&&(f.value.left=`${D+z/2-c.value.width/2}px`)},q=D=>{const{width:z,height:X}=D.getBoundingClientRect(),{top:H,left:R}=v(D);return{top:+H,left:+R,width:z,height:X}},B=()=>{f.value.left="50%",f.value.top="50%",f.value.transform="translate(-50%, -50%)",f.value.position="fixed",delete f.value.opacity},Q=()=>{const D=Ut(e);f.value=a.altPosition(D)},se=(D=!0)=>{var z;if(!s.value.enabled){if(b.value)return B();if(a.altPosition!==null)return Q();if(D){const X=a.teleport?(z=t.value)==null?void 0:z.$el:n.value;X&&(c.value=X.getBoundingClientRect()),i("recalculate-position")}return O()}},J=({inputEl:D,left:z,width:X})=>{window.screen.width>768&&!d.value&&F(z,X),_(D)},k=D=>{const{top:z,left:X,height:H,width:R}=q(D);f.value.top=`${H+z+ +a.offset}px`,g.value=!1,d.value||(f.value.left=`${X+R/2-c.value.width/2}px`),J({inputEl:D,left:X,width:R})},y=D=>{const{top:z,left:X,width:H}=q(D);f.value.top=`${z-+a.offset-c.value.height}px`,g.value=!0,J({inputEl:D,left:X,width:H})},_=D=>{if(a.autoPosition){const{left:z,width:X}=q(D),{left:H,right:R}=c.value;if(!d.value){if(Math.abs(H)!==Math.abs(R)){if(H<=0)return d.value=!0,S(z);if(R>=document.documentElement.clientWidth)return d.value=!0,A(z,X)}return F(z,X)}}},T=()=>{const D=Ut(e);if(D){if(a.autoPosition===qn.top)return qn.top;if(a.autoPosition===qn.bottom)return qn.bottom;const{height:z}=c.value,{top:X,height:H}=D.getBoundingClientRect(),R=window.innerHeight-X-H,w=X;return z<=R?qn.bottom:z>R&&z<=w?qn.top:R>=w?qn.bottom:qn.top}return qn.bottom},I=D=>T()===qn.bottom?k(D):y(D),O=()=>{const D=Ut(e);if(D)return a.autoPosition?I(D):k(D)},x=function(D){if(D){const z=D.scrollHeight>D.clientHeight,X=window.getComputedStyle(D).overflowY.indexOf("hidden")!==-1;return z&&!X}return!0},V=function(D){return!D||D===document.body||D.nodeType===Node.DOCUMENT_FRAGMENT_NODE?window:x(D)?D:V(D.assignedSlot&&u.value.shadowDom?D.assignedSlot.parentNode:D.parentNode)},N=D=>{if(D)switch(a.position){case Js.left:return{left:0,transform:"translateX(0)"};case Js.right:return{left:`${D.width}px`,transform:"translateX(-100%)"};default:return{left:`${D.width/2}px`,transform:"translateX(-50%)"}}return{}};return{openOnTop:g,menuStyle:f,xCorrect:d,setMenuPosition:se,getScrollableParent:V,shadowRender:(D,z,X)=>{var H,R,w;const ee=document.createElement("div"),M=(H=Ut(e))==null?void 0:H.getBoundingClientRect();ee.setAttribute("id","dp--temp-container");const L=(R=r.value)!=null&&R.clientWidth?r.value:document.body;L.append(ee);const j=N(M),te=u.value.shadowDom?Object.keys(l).filter(U=>["right-sidebar","left-sidebar","top-extra","action-extra"].includes(U)):Object.keys(l),p=Xy(z,{...X,shadow:!0,style:{opacity:0,position:"absolute",...j}},Object.fromEntries(te.map(U=>[U,l[U]])));D!=null&&(p.appContext=D.appContext),ld(p,ee),c.value=(w=p.el)==null?void 0:w.getBoundingClientRect(),ld(null,ee),L.removeChild(ee)}}},Or=[{name:"clock-icon",use:["time","calendar","shared"]},{name:"arrow-left",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-right",use:["month-year","calendar","shared","year-mode"]},{name:"arrow-up",use:["time","calendar","month-year","shared"]},{name:"arrow-down",use:["time","calendar","month-year","shared"]},{name:"calendar-icon",use:["month-year","time","calendar","shared","year-mode"]},{name:"day",use:["calendar","shared"]},{name:"month-overlay-value",use:["calendar","month-year","shared"]},{name:"year-overlay-value",use:["calendar","month-year","shared","year-mode"]},{name:"year-overlay",use:["month-year","shared"]},{name:"month-overlay",use:["month-year","shared"]},{name:"month-overlay-header",use:["month-year","shared"]},{name:"year-overlay-header",use:["month-year","shared"]},{name:"hours-overlay-value",use:["calendar","time","shared"]},{name:"hours-overlay-header",use:["calendar","time","shared"]},{name:"minutes-overlay-value",use:["calendar","time","shared"]},{name:"minutes-overlay-header",use:["calendar","time","shared"]},{name:"seconds-overlay-value",use:["calendar","time","shared"]},{name:"seconds-overlay-header",use:["calendar","time","shared"]},{name:"hours",use:["calendar","time","shared"]},{name:"minutes",use:["calendar","time","shared"]},{name:"month",use:["calendar","month-year","shared"]},{name:"year",use:["calendar","month-year","shared","year-mode"]},{name:"action-buttons",use:["action"]},{name:"action-preview",use:["action"]},{name:"calendar-header",use:["calendar","shared"]},{name:"marker-tooltip",use:["calendar","shared"]},{name:"action-extra",use:["menu"]},{name:"time-picker-overlay",use:["calendar","time","shared"]},{name:"am-pm-button",use:["calendar","time","shared"]},{name:"left-sidebar",use:["menu"]},{name:"right-sidebar",use:["menu"]},{name:"month-year",use:["month-year","shared"]},{name:"time-picker",use:["menu","shared"]},{name:"action-row",use:["action"]},{name:"marker",use:["calendar","shared"]},{name:"quarter",use:["shared"]},{name:"top-extra",use:["shared","month-year"]},{name:"tp-inline-arrow-up",use:["shared","time"]},{name:"tp-inline-arrow-down",use:["shared","time"]},{name:"menu-header",use:["menu"]}],$S=[{name:"trigger"},{name:"input-icon"},{name:"clear-icon"},{name:"dp-input"}],FS={all:()=>Or,monthYear:()=>Or.filter(n=>n.use.includes("month-year")),input:()=>$S,timePicker:()=>Or.filter(n=>n.use.includes("time")),action:()=>Or.filter(n=>n.use.includes("action")),calendar:()=>Or.filter(n=>n.use.includes("calendar")),menu:()=>Or.filter(n=>n.use.includes("menu")),shared:()=>Or.filter(n=>n.use.includes("shared")),yearMode:()=>Or.filter(n=>n.use.includes("year-mode"))},Cn=(n,t,e)=>{const r=[];return FS[t]().forEach(s=>{n[s.name]&&r.push(s.name)}),e!=null&&e.length&&e.forEach(s=>{s.slot&&r.push(s.slot)}),r},za=n=>{const t=ie(()=>r=>n.value?r?n.value.open:n.value.close:""),e=ie(()=>r=>n.value?r?n.value.menuAppearTop:n.value.menuAppearBottom:"");return{transitionName:t,showTransition:!!n.value,menuTransition:e}},Ya=(n,t,e)=>{const{defaultedRange:r,defaultedTz:s}=St(n),i=fe(Rn(fe(),s.value.timezone)),a=he([{month:Je(i),year:je(i)}]),l=g=>{const b={hours:br(i),minutes:es(i),seconds:0};return r.value.enabled?[b[g],b[g]]:b[g]},u=Ar({hours:l("hours"),minutes:l("minutes"),seconds:l("seconds")});qt(r,(g,b)=>{g.enabled!==b.enabled&&(u.hours=l("hours"),u.minutes=l("minutes"),u.seconds=l("seconds"))},{deep:!0});const c=ie({get:()=>n.internalModelValue,set:g=>{!n.readonly&&!n.disabled&&t("update:internal-model-value",g)}}),d=ie(()=>g=>a.value[g]?a.value[g].month:0),f=ie(()=>g=>a.value[g]?a.value[g].year:0);return qt(c,(g,b)=>{e&&JSON.stringify(g??{})!==JSON.stringify(b??{})&&e()},{deep:!0}),{calendars:a,time:u,modelValue:c,month:d,year:f,today:i}},LS=(n,t)=>{const{defaultedMultiCalendars:e,defaultedMultiDates:r,defaultedUI:s,defaultedHighlight:i,defaultedTz:a,propDates:l,defaultedRange:u}=St(t),{isDisabled:c}=us(t),d=he(null),f=he(Rn(new Date,a.value.timezone)),g=p=>{!p.current&&t.hideOffsetDates||(d.value=p.value)},b=()=>{d.value=null},v=p=>Array.isArray(n.value)&&u.value.enabled&&n.value[0]&&d.value?p?Vt(d.value,n.value[0]):xt(d.value,n.value[0]):!0,A=(p,U)=>{const le=()=>n.value?U?n.value[0]||null:n.value[1]:null,Ae=n.value&&Array.isArray(n.value)?le():null;return Xe(fe(p.value),Ae)},S=p=>{const U=Array.isArray(n.value)?n.value[0]:null;return p?!xt(d.value??null,U):!0},F=(p,U=!0)=>(u.value.enabled||t.weekPicker)&&Array.isArray(n.value)&&n.value.length===2?t.hideOffsetDates&&!p.current?!1:Xe(fe(p.value),n.value[U?0:1]):u.value.enabled?A(p,U)&&S(U)||Xe(p.value,Array.isArray(n.value)?n.value[0]:null)&&v(U):!1,q=(p,U)=>{if(Array.isArray(n.value)&&n.value[0]&&n.value.length===1){const le=Xe(p.value,d.value);return U?Vt(n.value[0],p.value)&&le:xt(n.value[0],p.value)&&le}return!1},B=p=>!n.value||t.hideOffsetDates&&!p.current?!1:u.value.enabled?t.modelAuto&&Array.isArray(n.value)?Xe(p.value,n.value[0]?n.value[0]:f.value):!1:r.value.enabled&&Array.isArray(n.value)?n.value.some(U=>Xe(U,p.value)):Xe(p.value,n.value?n.value:f.value),Q=p=>{if(u.value.autoRange||t.weekPicker){if(d.value){if(t.hideOffsetDates&&!p.current)return!1;const U=Vn(d.value,+u.value.autoRange),le=gr(fe(d.value),t.weekStart);return t.weekPicker?Xe(le[1],fe(p.value)):Xe(U,fe(p.value))}return!1}return!1},se=p=>{if(u.value.autoRange||t.weekPicker){if(d.value){const U=Vn(d.value,+u.value.autoRange);if(t.hideOffsetDates&&!p.current)return!1;const le=gr(fe(d.value),t.weekStart);return t.weekPicker?Vt(p.value,le[0])&&xt(p.value,le[1]):Vt(p.value,d.value)&&xt(p.value,U)}return!1}return!1},J=p=>{if(u.value.autoRange||t.weekPicker){if(d.value){if(t.hideOffsetDates&&!p.current)return!1;const U=gr(fe(d.value),t.weekStart);return t.weekPicker?Xe(U[0],p.value):Xe(d.value,p.value)}return!1}return!1},k=p=>Ma(n.value,d.value,p.value),y=()=>t.modelAuto&&Array.isArray(t.internalModelValue)?!!t.internalModelValue[0]:!1,_=()=>t.modelAuto?hg(t.internalModelValue):!0,T=p=>{if(t.weekPicker)return!1;const U=u.value.enabled?!F(p)&&!F(p,!1):!0;return!c(p.value)&&!B(p)&&!(!p.current&&t.hideOffsetDates)&&U},I=p=>u.value.enabled?t.modelAuto?y()&&B(p):!1:B(p),O=p=>i.value?sk(p.value,l.value.highlight):!1,x=p=>{const U=c(p.value);return U&&(typeof i.value=="function"?!i.value(p.value,U):!i.value.options.highlightDisabled)},V=p=>{var U;return typeof i.value=="function"?i.value(p.value):(U=i.value.weekdays)==null?void 0:U.includes(p.value.getDay())},N=p=>(u.value.enabled||t.weekPicker)&&(!(e.value.count>0)||p.current)&&_()&&!(!p.current&&t.hideOffsetDates)&&!B(p)?k(p):!1,D=p=>{if(Array.isArray(n.value)&&n.value.length===1){const{before:U,after:le}=wf(+u.value.maxRange,n.value[0]);return di(p.value,U)||As(p.value,le)}return!1},z=p=>{if(Array.isArray(n.value)&&n.value.length===1){const{before:U,after:le}=wf(+u.value.minRange,n.value[0]);return Ma([U,le],n.value[0],p.value)}return!1},X=p=>u.value.enabled&&(u.value.maxRange||u.value.minRange)?u.value.maxRange&&u.value.minRange?D(p)||z(p):u.value.maxRange?D(p):z(p):!1,H=p=>{const{isRangeStart:U,isRangeEnd:le}=M(p),Ae=u.value.enabled?U||le:!1;return{dp__cell_offset:!p.current,dp__pointer:!t.disabled&&!(!p.current&&t.hideOffsetDates)&&!c(p.value)&&!X(p),dp__cell_disabled:c(p.value)||X(p),dp__cell_highlight:!x(p)&&(O(p)||V(p))&&!I(p)&&!Ae&&!J(p)&&!(N(p)&&t.weekPicker)&&!le,dp__cell_highlight_active:!x(p)&&(O(p)||V(p))&&I(p),dp__today:!t.noToday&&Xe(p.value,f.value)&&p.current,"dp--past":xt(p.value,f.value),"dp--future":Vt(p.value,f.value)}},R=p=>({dp__active_date:I(p),dp__date_hover:T(p)}),w=p=>{if(n.value&&!Array.isArray(n.value)){const U=gr(n.value,t.weekStart);return{...j(p),dp__range_start:Xe(U[0],p.value),dp__range_end:Xe(U[1],p.value),dp__range_between_week:Vt(p.value,U[0])&&xt(p.value,U[1])}}return{...j(p)}},ee=p=>{if(n.value&&Array.isArray(n.value)){const U=gr(n.value[0],t.weekStart),le=n.value[1]?gr(n.value[1],t.weekStart):[];return{...j(p),dp__range_start:Xe(U[0],p.value)||Xe(le[0],p.value),dp__range_end:Xe(U[1],p.value)||Xe(le[1],p.value),dp__range_between_week:Vt(p.value,U[0])&&xt(p.value,U[1])||Vt(p.value,le[0])&&xt(p.value,le[1]),dp__range_between:Vt(p.value,U[1])&&xt(p.value,le[0])}}return{...j(p)}},M=p=>{const U=e.value.count>0?p.current&&F(p)&&_():F(p)&&_(),le=e.value.count>0?p.current&&F(p,!1)&&_():F(p,!1)&&_();return{isRangeStart:U,isRangeEnd:le}},L=p=>{const{isRangeStart:U,isRangeEnd:le}=M(p);return{dp__range_start:U,dp__range_end:le,dp__range_between:N(p),dp__date_hover:Xe(p.value,d.value)&&!U&&!le&&!t.weekPicker,dp__date_hover_start:q(p,!0),dp__date_hover_end:q(p,!1)}},j=p=>({...L(p),dp__cell_auto_range:se(p),dp__cell_auto_range_start:J(p),dp__cell_auto_range_end:Q(p)}),te=p=>u.value.enabled?u.value.autoRange?j(p):t.modelAuto?{...R(p),...L(p)}:t.weekPicker?ee(p):L(p):t.weekPicker?w(p):R(p);return{setHoverDate:g,clearHoverDate:b,getDayClassData:p=>t.hideOffsetDates&&!p.current?{}:{...H(p),...te(p),[t.dayClass?t.dayClass(p.value,t.internalModelValue):""]:!0,...s.value.calendarCell??{}}}},us=n=>{const{defaultedFilters:t,defaultedRange:e,propDates:r,defaultedMultiDates:s}=St(n),i=V=>r.value.disabledDates?typeof r.value.disabledDates=="function"?r.value.disabledDates(fe(V)):!!Bo(V,r.value.disabledDates):!1,a=V=>r.value.maxDate?n.yearPicker?je(V)>je(r.value.maxDate):Vt(V,r.value.maxDate):!1,l=V=>r.value.minDate?n.yearPicker?je(V)<je(r.value.minDate):xt(V,r.value.minDate):!1,u=V=>{const N=a(V),D=l(V),z=i(V),X=t.value.months.map(M=>+M).includes(Je(V)),H=n.disabledWeekDays.length?n.disabledWeekDays.some(M=>+M===YE(V)):!1,R=b(V),w=je(V),ee=w<+n.yearRange[0]||w>+n.yearRange[1];return!(N||D||z||X||ee||H||R)},c=(V,N)=>xt(...Fr(r.value.minDate,V,N))||Xe(...Fr(r.value.minDate,V,N)),d=(V,N)=>Vt(...Fr(r.value.maxDate,V,N))||Xe(...Fr(r.value.maxDate,V,N)),f=(V,N,D)=>{let z=!1;return r.value.maxDate&&D&&d(V,N)&&(z=!0),r.value.minDate&&!D&&c(V,N)&&(z=!0),z},g=(V,N,D,z)=>{let X=!1;return z&&(r.value.minDate||r.value.maxDate)?r.value.minDate&&r.value.maxDate?X=f(V,N,D):(r.value.minDate&&c(V,N)||r.value.maxDate&&d(V,N))&&(X=!0):X=!0,X},b=V=>Array.isArray(r.value.allowedDates)&&!r.value.allowedDates.length?!0:r.value.allowedDates?!Bo(V,r.value.allowedDates,mg(n.monthPicker,n.yearPicker)):!1,v=V=>!u(V),A=V=>e.value.noDisabledRange?!Wp({start:V[0],end:V[1]}).some(N=>v(N)):!0,S=V=>{if(V){const N=je(V);return N>=+n.yearRange[0]&&N<=n.yearRange[1]}return!0},F=(V,N)=>!!(Array.isArray(V)&&V[N]&&(e.value.maxRange||e.value.minRange)&&S(V[N])),q=(V,N,D=0)=>{if(F(N,D)&&S(V)){const z=zp(V,N[D]),X=yg(N[D],V),H=X.length===1?0:X.filter(w=>v(w)).length,R=Math.abs(z)-(e.value.minMaxRawRange?0:H);if(e.value.minRange&&e.value.maxRange)return R>=+e.value.minRange&&R<=+e.value.maxRange;if(e.value.minRange)return R>=+e.value.minRange;if(e.value.maxRange)return R<=+e.value.maxRange}return!0},B=()=>!n.enableTimePicker||n.monthPicker||n.yearPicker||n.ignoreTimeValidation,Q=V=>Array.isArray(V)?[V[0]?iu(V[0]):null,V[1]?iu(V[1]):null]:iu(V),se=(V,N,D)=>V.find(z=>+z.hours===br(N)&&z.minutes==="*"?!0:+z.minutes===es(N)&&+z.hours===br(N))&&D,J=(V,N,D)=>{const[z,X]=V,[H,R]=N;return!se(z,H,D)&&!se(X,R,D)&&D},k=(V,N)=>{const D=Array.isArray(N)?N:[N];return Array.isArray(n.disabledTimes)?Array.isArray(n.disabledTimes[0])?J(n.disabledTimes,D,V):!D.some(z=>se(n.disabledTimes,z,V)):V},y=(V,N)=>{const D=Array.isArray(N)?[Ts(N[0]),N[1]?Ts(N[1]):void 0]:Ts(N),z=!n.disabledTimes(D);return V&&z},_=(V,N)=>n.disabledTimes?Array.isArray(n.disabledTimes)?k(N,V):y(N,V):N,T=V=>{let N=!0;if(!V||B())return!0;const D=!r.value.minDate&&!r.value.maxDate?Q(V):V;return(n.maxTime||r.value.maxDate)&&(N=_f(n.maxTime,r.value.maxDate,"max",Wt(D),N)),(n.minTime||r.value.minDate)&&(N=_f(n.minTime,r.value.minDate,"min",Wt(D),N)),_(V,N)},I=V=>{if(!n.monthPicker)return!0;let N=!0;const D=fe(zn(V));if(r.value.minDate&&r.value.maxDate){const z=fe(zn(r.value.minDate)),X=fe(zn(r.value.maxDate));return Vt(D,z)&&xt(D,X)||Xe(D,z)||Xe(D,X)}if(r.value.minDate){const z=fe(zn(r.value.minDate));N=Vt(D,z)||Xe(D,z)}if(r.value.maxDate){const z=fe(zn(r.value.maxDate));N=xt(D,z)||Xe(D,z)}return N},O=ie(()=>V=>!n.enableTimePicker||n.ignoreTimeValidation?!0:T(V)),x=ie(()=>V=>n.monthPicker?Array.isArray(V)&&(e.value.enabled||s.value.enabled)?!V.filter(N=>!I(N)).length:I(V):!0);return{isDisabled:v,validateDate:u,validateMonthYearInRange:g,isDateRangeAllowed:A,checkMinMaxRange:q,isValidTime:T,isTimeValid:O,isMonthValid:x}},ml=()=>{const n=ie(()=>(r,s)=>r==null?void 0:r.includes(s)),t=ie(()=>(r,s)=>r.count?r.solo?!0:s===0:!0),e=ie(()=>(r,s)=>r.count?r.solo?!0:s===r.count-1:!0);return{hideNavigationButtons:n,showLeftIcon:t,showRightIcon:e}},BS=(n,t,e)=>{const r=he(0),s=Ar({[bs.timePicker]:!n.enableTimePicker||n.timePicker||n.monthPicker,[bs.calendar]:!1,[bs.header]:!1}),i=ie(()=>n.monthPicker||n.timePicker),a=f=>{var g;if((g=n.flow)!=null&&g.length){if(!f&&i.value)return d();s[f]=!0,Object.keys(s).filter(b=>!s[b]).length||d()}},l=()=>{var f,g;(f=n.flow)!=null&&f.length&&r.value!==-1&&(r.value+=1,t("flow-step",r.value),d()),((g=n.flow)==null?void 0:g.length)===r.value&&vn().then(()=>u())},u=()=>{r.value=-1},c=(f,g,...b)=>{var v,A;n.flow[r.value]===f&&e.value&&((A=(v=e.value)[g])==null||A.call(v,...b))},d=(f=0)=>{f&&(r.value+=f),c(mn.month,"toggleMonthPicker",!0),c(mn.year,"toggleYearPicker",!0),c(mn.calendar,"toggleTimePicker",!1,!0),c(mn.time,"toggleTimePicker",!0,!0);const g=n.flow[r.value];(g===mn.hours||g===mn.minutes||g===mn.seconds)&&c(g,"toggleTimePicker",!0,!0,g)};return{childMount:a,updateFlowStep:l,resetFlow:u,handleFlow:d,flowStep:r}},US={key:1,class:"dp__input_wrap"},qS=["id","name","inputmode","placeholder","disabled","readonly","required","value","autocomplete","aria-label","aria-disabled","aria-invalid"],jS={key:2,class:"dp--clear-btn"},zS=["aria-label"],YS=vt({compatConfig:{MODE:3},__name:"DatepickerInput",props:{isMenuOpen:{type:Boolean,default:!1},inputValue:{type:String,default:""},...hl},emits:["clear","open","update:input-value","set-input-date","close","select-date","set-empty-date","toggle","focus-prev","focus","blur","real-blur","text-input"],setup(n,{expose:t,emit:e}){const r=e,s=n,{defaultedTextInput:i,defaultedAriaLabels:a,defaultedInline:l,defaultedConfig:u,defaultedRange:c,defaultedMultiDates:d,defaultedUI:f,getDefaultPattern:g,getDefaultStartTime:b}=St(s),{checkMinMaxRange:v}=us(s),A=he(),S=he(null),F=he(!1),q=he(!1),B=ie(()=>({dp__pointer:!s.disabled&&!s.readonly&&!i.value.enabled,dp__disabled:s.disabled,dp__input_readonly:!i.value.enabled,dp__input:!0,dp__input_icon_pad:!s.hideInputIcon,dp__input_valid:typeof s.state=="boolean"?s.state:!1,dp__input_invalid:typeof s.state=="boolean"?!s.state:!1,dp__input_focus:F.value||s.isMenuOpen,dp__input_reg:!i.value.enabled,...f.value.input??{}})),Q=()=>{r("set-input-date",null),s.clearable&&s.autoApply&&(r("set-empty-date"),A.value=null)},se=w=>{const ee=b();return ak(w,i.value.format??g(),ee??_g({},s.enableSeconds),s.inputValue,q.value,s.formatLocale)},J=w=>{const{rangeSeparator:ee}=i.value,[M,L]=w.split(`${ee}`);if(M){const j=se(M.trim()),te=L?se(L.trim()):void 0;if(As(j,te))return;const p=j&&te?[j,te]:[j];v(te,p,0)&&(A.value=j?p:null)}},k=()=>{q.value=!0},y=w=>{if(c.value.enabled)J(w);else if(d.value.enabled){const ee=w.split(";");A.value=ee.map(M=>se(M.trim())).filter(M=>M)}else A.value=se(w)},_=w=>{var ee;const M=typeof w=="string"?w:(ee=w.target)==null?void 0:ee.value;M!==""?(i.value.openMenu&&!s.isMenuOpen&&r("open"),y(M),r("set-input-date",A.value)):Q(),q.value=!1,r("update:input-value",M),r("text-input",w,A.value)},T=w=>{i.value.enabled?(y(w.target.value),i.value.enterSubmit&&Bu(A.value)&&s.inputValue!==""?(r("set-input-date",A.value,!0),A.value=null):i.value.enterSubmit&&s.inputValue===""&&(A.value=null,r("clear"))):x(w)},I=(w,ee)=>{i.value.enabled&&i.value.tabSubmit&&!ee&&y(w.target.value),i.value.tabSubmit&&Bu(A.value)&&s.inputValue!==""?(r("set-input-date",A.value,!0,!0),A.value=null):i.value.tabSubmit&&s.inputValue===""&&(A.value=null,r("clear",!0))},O=()=>{F.value=!0,r("focus"),vn().then(()=>{var w;i.value.enabled&&i.value.selectOnFocus&&((w=S.value)==null||w.select())})},x=w=>{if(jr(w,u.value,!0),i.value.enabled&&i.value.openMenu&&!l.value.input){if(i.value.openMenu==="open"&&!s.isMenuOpen)return r("open");if(i.value.openMenu==="toggle")return r("toggle")}else i.value.enabled||r("toggle")},V=()=>{r("real-blur"),F.value=!1,(!s.isMenuOpen||l.value.enabled&&l.value.input)&&r("blur"),s.autoApply&&i.value.enabled&&A.value&&!s.isMenuOpen&&(r("set-input-date",A.value),r("select-date"),A.value=null)},N=w=>{jr(w,u.value,!0),r("clear")},D=()=>{r("close")},z=w=>{if(w.key==="Tab"&&I(w),w.key==="Enter"&&T(w),w.key==="Escape"&&i.value.escClose&&D(),!i.value.enabled){if(w.code==="Tab")return;w.preventDefault()}},X=()=>{var w;(w=S.value)==null||w.focus({preventScroll:!0})},H=w=>{A.value=w},R=w=>{w.key===Tt.tab&&I(w,!0)};return t({focusInput:X,setParsedDate:H}),(w,ee)=>{var M,L,j;return W(),re("div",{onClick:x},[w.$slots.trigger&&!w.$slots["dp-input"]&&!P(l).enabled?Ee(w.$slots,"trigger",{key:0}):de("",!0),!w.$slots.trigger&&(!P(l).enabled||P(l).input)?(W(),re("div",US,[w.$slots["dp-input"]&&!w.$slots.trigger&&(!P(l).enabled||P(l).enabled&&P(l).input)?Ee(w.$slots,"dp-input",{key:0,value:n.inputValue,isMenuOpen:n.isMenuOpen,onInput:_,onEnter:T,onTab:I,onClear:N,onBlur:V,onKeypress:z,onPaste:k,onFocus:O,openMenu:()=>w.$emit("open"),closeMenu:()=>w.$emit("close"),toggleMenu:()=>w.$emit("toggle")}):de("",!0),w.$slots["dp-input"]?de("",!0):(W(),re("input",{key:1,id:w.uid?`dp-input-${w.uid}`:void 0,ref_key:"inputRef",ref:S,"data-test-id":"dp-input",name:w.name,class:Fe(B.value),inputmode:P(i).enabled?"text":"none",placeholder:w.placeholder,disabled:w.disabled,readonly:w.readonly,required:w.required,value:n.inputValue,autocomplete:w.autocomplete,"aria-label":(M=P(a))==null?void 0:M.input,"aria-disabled":w.disabled||void 0,"aria-invalid":w.state===!1?!0:void 0,onInput:_,onBlur:V,onFocus:O,onKeypress:z,onKeydown:ee[0]||(ee[0]=te=>z(te)),onPaste:k},null,42,qS)),Se("div",{onClick:ee[3]||(ee[3]=te=>r("toggle"))},[w.$slots["input-icon"]&&!w.hideInputIcon?(W(),re("span",{key:0,class:"dp__input_icon",onClick:ee[1]||(ee[1]=te=>r("toggle"))},[Ee(w.$slots,"input-icon")])):de("",!0),!w.$slots["input-icon"]&&!w.hideInputIcon&&!w.$slots["dp-input"]?(W(),et(P(Si),{key:1,"aria-label":(L=P(a))==null?void 0:L.calendarIcon,class:"dp__input_icon dp__input_icons",onClick:ee[2]||(ee[2]=te=>r("toggle"))},null,8,["aria-label"])):de("",!0)]),w.$slots["clear-icon"]&&(w.alwaysClearable||n.inputValue&&w.clearable&&!w.disabled&&!w.readonly)?(W(),re("span",jS,[Ee(w.$slots,"clear-icon",{clear:N})])):de("",!0),!w.$slots["clear-icon"]&&(w.alwaysClearable||w.clearable&&n.inputValue&&!w.disabled&&!w.readonly)?(W(),re("button",{key:3,"aria-label":(j=P(a))==null?void 0:j.clearInput,class:"dp--clear-btn",type:"button",onKeydown:ee[4]||(ee[4]=te=>P(Tn)(te,()=>N(te),!0,R)),onClick:ee[5]||(ee[5]=_a(te=>N(te),["prevent"]))},[$e(P(ug),{class:"dp__input_icons","data-test-id":"clear-icon"})],40,zS)):de("",!0)])):de("",!0)])}}}),HS=typeof window<"u"?window:void 0,hu=()=>{},WS=n=>t_()?(n_(n),!0):!1,KS=(n,t,e,r)=>{if(!n)return hu;let s=hu;const i=qt(()=>P(n),l=>{s(),l&&(l.removeEventListener(t,e),l.addEventListener(t,e,r),s=()=>{l.removeEventListener(t,e,r),s=hu})},{immediate:!0,flush:"post"}),a=()=>{i(),s()};return WS(a),a},GS=(n,t,e,r={})=>{const{window:s=HS,event:i="pointerdown"}=r;return s?KS(s,i,a=>{const l=Ut(n),u=Ut(t);!l||!u||l===a.target||a.composedPath().includes(l)||a.composedPath().includes(u)||e(a)},{passive:!0}):void 0},QS=["data-dp-mobile"],JS=vt({compatConfig:{MODE:3},__name:"VueDatePicker",props:{...hl},emits:["update:model-value","update:model-timezone-value","text-submit","closed","cleared","open","focus","blur","internal-model-change","recalculate-position","flow-step","update-month-year","invalid-select","invalid-fixed-range","tooltip-open","tooltip-close","time-picker-open","time-picker-close","am-pm-change","range-start","range-end","date-update","invalid-date","overlay-toggle","text-input"],setup(n,{expose:t,emit:e}){const r=e,s=n,i=Rs(),a=he(!1),l=ya(s,"modelValue"),u=ya(s,"timezone"),c=he(null),d=he(null),f=he(null),g=he(!1),b=he(null),v=he(!1),A=he(!1),S=he(!1),F=he(!1),{setMenuFocused:q,setShiftKey:B}=Pg(),{clearArrowNav:Q}=ls(),{validateDate:se,isValidTime:J}=us(s),{defaultedTransitions:k,defaultedTextInput:y,defaultedInline:_,defaultedConfig:T,defaultedRange:I,defaultedMultiDates:O}=St(s),{menuTransition:x,showTransition:V}=za(k),{isMobile:N}=Cg(T),D=$m();Zt(()=>{p(s.modelValue),vn().then(()=>{if(!_.value.enabled){const ue=M(b.value);ue==null||ue.addEventListener("scroll",ge),window==null||window.addEventListener("resize",ve)}}),_.value.enabled&&(a.value=!0),window==null||window.addEventListener("keyup",Ue),window==null||window.addEventListener("keydown",Ve)}),Pi(()=>{if(!_.value.enabled){const ue=M(b.value);ue==null||ue.removeEventListener("scroll",ge),window==null||window.removeEventListener("resize",ve)}window==null||window.removeEventListener("keyup",Ue),window==null||window.removeEventListener("keydown",Ve)});const z=Cn(i,"all",s.presetDates),X=Cn(i,"input");qt([l,u],()=>{p(l.value)},{deep:!0});const{openOnTop:H,menuStyle:R,xCorrect:w,setMenuPosition:ee,getScrollableParent:M,shadowRender:L}=NS({menuRef:c,menuRefInner:d,inputRef:f,pickerWrapperRef:b,inline:_,emit:r,props:s,slots:i}),{inputValue:j,internalModelValue:te,parseExternalModelValue:p,emitModelValue:U,formatInputValue:le,checkBeforeEmit:Ae}=xk(r,s,g),Y=ie(()=>({dp__main:!0,dp__theme_dark:s.dark,dp__theme_light:!s.dark,dp__flex_display:_.value.enabled,"dp--flex-display-collapsed":S.value,dp__flex_display_with_input:_.value.input})),ke=ie(()=>s.dark?"dp__theme_dark":"dp__theme_light"),ae=ie(()=>s.teleport?{to:typeof s.teleport=="boolean"?"body":s.teleport,disabled:!s.teleport||_.value.enabled}:{}),oe=ie(()=>({class:"dp__outer_menu_wrap"})),C=ie(()=>_.value.enabled&&(s.timePicker||s.monthPicker||s.yearPicker||s.quarterPicker)),me=()=>{var ue,Te;return((Te=(ue=f.value)==null?void 0:ue.$el)==null?void 0:Te.getBoundingClientRect())??{width:0,left:0,right:0}},ge=()=>{a.value&&(T.value.closeOnScroll?Pt():ee())},ve=()=>{var ue;a.value&&ee();const Te=((ue=d.value)==null?void 0:ue.$el.getBoundingClientRect().width)??0;S.value=document.body.offsetWidth<=Te},Ue=ue=>{ue.key==="Tab"&&!_.value.enabled&&!s.teleport&&T.value.tabOutClosesMenu&&(b.value.contains(document.activeElement)||Pt()),A.value=ue.shiftKey},Ve=ue=>{A.value=ue.shiftKey},tt=()=>{!s.disabled&&!s.readonly&&(L(D,Ef,s),ee(!1),a.value=!0,a.value&&r("open"),a.value||Ce(),p(s.modelValue))},yt=()=>{var ue,Te;j.value="",Ce(),(ue=d.value)==null||ue.onValueCleared(),(Te=f.value)==null||Te.setParsedDate(null),r("update:model-value",null),r("update:model-timezone-value",null),r("cleared"),T.value.closeOnClearValue&&Pt()},G=()=>{const ue=te.value;return!ue||!Array.isArray(ue)&&se(ue)?!0:Array.isArray(ue)?O.value.enabled||ue.length===2&&se(ue[0])&&se(ue[1])?!0:I.value.partialRange&&!s.timePicker?se(ue[0]):!1:!1},we=()=>{Ae()&&G()?(U(),Pt()):r("invalid-select",te.value)},Qe=ue=>{Ke(),U(),T.value.closeOnAutoApply&&!ue&&Pt()},Ke=()=>{f.value&&y.value.enabled&&f.value.setParsedDate(te.value)},ct=(ue=!1)=>{s.autoApply&&J(te.value)&&G()&&(I.value.enabled&&Array.isArray(te.value)?(I.value.partialRange||te.value.length===2)&&Qe(ue):Qe(ue))},Ce=()=>{y.value.enabled||(te.value=null)},Pt=(ue=!1)=>{var Te,Ie;ue&&te.value&&T.value.setDateOnMenuClose&&we(),_.value.enabled||(a.value&&(a.value=!1,w.value=!1,q(!1),B(!1),Q(),r("closed"),j.value&&p(l.value)),Ce(),r("blur"),(Ie=(Te=d.value)==null?void 0:Te.$el)==null||Ie.remove())},on=(ue,Te,Ie=!1)=>{if(!ue){te.value=null;return}const Dn=Array.isArray(ue)?!ue.some(Jn=>!se(Jn)):se(ue),_n=J(ue);Dn&&_n?(F.value=!0,te.value=ue,Te?(v.value=Ie,we(),r("text-submit")):s.autoApply&&ct(),vn().then(()=>{F.value=!1})):r("invalid-date",ue)},cr=()=>{s.autoApply&&J(te.value)&&U(),Ke()},Mn=()=>a.value?Pt():tt(),Ir=ue=>{te.value=ue},Ls=()=>{y.value.enabled&&(g.value=!0,le()),r("focus")},cs=()=>{if(y.value.enabled&&(g.value=!1,p(s.modelValue),v.value)){const ue=rk(b.value,A.value);ue==null||ue.focus()}r("blur")},Di=ue=>{d.value&&d.value.updateMonthYear(0,{month:gf(ue.month),year:gf(ue.year)})},Oi=ue=>{p(ue??s.modelValue)},Z=(ue,Te)=>{var Ie;(Ie=d.value)==null||Ie.switchView(ue,Te)},_e=(ue,Te)=>T.value.onClickOutside?T.value.onClickOutside(ue,Te):Pt(!0),Oe=(ue=0)=>{var Te;(Te=d.value)==null||Te.handleFlow(ue)},ze=()=>c;return GS(c,f,ue=>_e(G,ue)),t({closeMenu:Pt,selectDate:we,clearValue:yt,openMenu:tt,onScroll:ge,formatInputValue:le,updateInternalModelValue:Ir,setMonthYear:Di,parseModel:Oi,switchView:Z,toggleMenu:Mn,handleFlow:Oe,getDpWrapMenuRef:ze}),(ue,Te)=>(W(),re("div",{ref_key:"pickerWrapperRef",ref:b,class:Fe(Y.value),"data-datepicker-instance":"","data-dp-mobile":P(N)},[$e(YS,kt({ref_key:"inputRef",ref:f,"input-value":P(j),"onUpdate:inputValue":Te[0]||(Te[0]=Ie=>va(j)?j.value=Ie:null),"is-menu-open":a.value},ue.$props,{onClear:yt,onOpen:tt,onSetInputDate:on,onSetEmptyDate:P(U),onSelectDate:we,onToggle:Mn,onClose:Pt,onFocus:Ls,onBlur:cs,onRealBlur:Te[1]||(Te[1]=Ie=>g.value=!1),onTextInput:Te[2]||(Te[2]=Ie=>ue.$emit("text-input",Ie))}),gn({_:2},[pt(P(X),(Ie,Dn)=>({name:Ie,fn:De(_n=>[Ee(ue.$slots,Ie,Gt(Sn(_n)))])}))]),1040,["input-value","is-menu-open","onSetEmptyDate"]),(W(),et(sl(ue.teleport?Jy:"div"),Gt(Sn(ae.value)),{default:De(()=>[$e(Qr,{name:P(x)(P(H)),css:P(V)&&!P(_).enabled},{default:De(()=>[a.value?(W(),re("div",kt({key:0,ref_key:"dpWrapMenuRef",ref:c},oe.value,{class:{"dp--menu-wrapper":!P(_).enabled},style:P(_).enabled?void 0:P(R)}),[$e(Ef,kt({ref_key:"dpMenuRef",ref:d},ue.$props,{"internal-model-value":P(te),"onUpdate:internalModelValue":Te[3]||(Te[3]=Ie=>va(te)?te.value=Ie:null),class:{[ke.value]:!0,"dp--menu-wrapper":ue.teleport},"open-on-top":P(H),"no-overlay-focus":C.value,collapse:S.value,"get-input-rect":me,"is-text-input-date":F.value,onClosePicker:Pt,onSelectDate:we,onAutoApply:ct,onTimeUpdate:cr,onFlowStep:Te[4]||(Te[4]=Ie=>ue.$emit("flow-step",Ie)),onUpdateMonthYear:Te[5]||(Te[5]=Ie=>ue.$emit("update-month-year",Ie)),onInvalidSelect:Te[6]||(Te[6]=Ie=>ue.$emit("invalid-select",P(te))),onAutoApplyInvalid:Te[7]||(Te[7]=Ie=>ue.$emit("invalid-select",Ie)),onInvalidFixedRange:Te[8]||(Te[8]=Ie=>ue.$emit("invalid-fixed-range",Ie)),onRecalculatePosition:P(ee),onTooltipOpen:Te[9]||(Te[9]=Ie=>ue.$emit("tooltip-open",Ie)),onTooltipClose:Te[10]||(Te[10]=Ie=>ue.$emit("tooltip-close",Ie)),onTimePickerOpen:Te[11]||(Te[11]=Ie=>ue.$emit("time-picker-open",Ie)),onTimePickerClose:Te[12]||(Te[12]=Ie=>ue.$emit("time-picker-close",Ie)),onAmPmChange:Te[13]||(Te[13]=Ie=>ue.$emit("am-pm-change",Ie)),onRangeStart:Te[14]||(Te[14]=Ie=>ue.$emit("range-start",Ie)),onRangeEnd:Te[15]||(Te[15]=Ie=>ue.$emit("range-end",Ie)),onDateUpdate:Te[16]||(Te[16]=Ie=>ue.$emit("date-update",Ie)),onInvalidDate:Te[17]||(Te[17]=Ie=>ue.$emit("invalid-date",Ie)),onOverlayToggle:Te[18]||(Te[18]=Ie=>ue.$emit("overlay-toggle",Ie)),onMenuBlur:Te[19]||(Te[19]=Ie=>ue.$emit("blur"))}),gn({_:2},[pt(P(z),(Ie,Dn)=>({name:Ie,fn:De(_n=>[Ee(ue.$slots,Ie,Gt(Sn({..._n})))])}))]),1040,["internal-model-value","class","open-on-top","no-overlay-focus","collapse","is-text-input-date","onRecalculatePosition"])],16)):de("",!0)]),_:3},8,["name","css"])]),_:3},16))],10,QS))}}),Uc=(()=>{const n=JS;return n.install=t=>{t.component("Vue3DatePicker",n)},n})(),XS=Object.freeze(Object.defineProperty({__proto__:null,default:Uc},Symbol.toStringTag,{value:"Module"}));Object.entries(XS).forEach(([n,t])=>{n!=="default"&&(Uc[n]=t)});const ZS={class:"c-date-picker relative w-full h-[42px]"},eR={class:"relative"},tR={key:0,class:"bg-gray-12 flex items-center rounded-r-lg justify-center absolute h-9 top-1/2 w-10 -translate-y-1/2 right-0.5"},nR=vt({__name:"BaseDatepicker",props:{modelValue:{},error:{type:Boolean},maxDate:{},minDate:{},placeholder:{},disabled:{type:Boolean}},emits:["blur","update:modelValue"],setup(n,{emit:t}){const e=n,r=t,s=he(),i=he(),a=he(!1),l=u=>{r("update:modelValue",u),a.value=!1};return qt(()=>e.modelValue,()=>{s.value=e.modelValue},{immediate:!0}),(u,c)=>{const d=i_("maska");return W(),re("div",ZS,[$e(P(Uc),{ref_key:"datePicker",ref:i,modelValue:s.value,"onUpdate:modelValue":[c[1]||(c[1]=f=>s.value=f),l],disabled:u.disabled,"hide-navigation":["month","year","calendar","time","minutes","hours","seconds"],"max-date":u.maxDate||"","min-date":u.minDate,"month-change-on-scroll":!1,"text-input-options":{enterSubmit:!0,openMenu:!1,format:"dd.MM.yyyy"},"auto-apply":"",class:"h-full",format:"dd.MM.yyyy"},{"dp-input":De(({value:f})=>[Se("div",eR,[Br($e(Nr,kt({disabled:u.disabled,"model-value":f,placeholder:u.placeholder,class:"absolute w-full h-full !rounded-[10px] top-0 left-0 pr-[14px] !text-dark-400","input-class":"!text-dark-400 !rounded-[10px]"},{error:u.error},{onBlur:c[0]||(c[0]=g=>r("blur")),icon:"icon-calendar","onUpdate:modelValue":g=>f.start=g}),null,16,["disabled","model-value","placeholder","onUpdate:modelValue"]),[[d,"##.##.####"]]),f?de("",!0):(W(),re("div",tR,c[2]||(c[2]=[Se("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[Se("path",{d:"M16 3V7M8 3V7M4 11H20M11 15H12V18M4 7C4 6.46957 4.21071 5.96086 4.58579 5.58579C4.96086 5.21071 5.46957 5 6 5H18C18.5304 5 19.0391 5.21071 19.4142 5.58579C19.7893 5.96086 20 6.46957 20 7V19C20 19.5304 19.7893 20.0391 19.4142 20.4142C19.0391 20.7893 18.5304 21 18 21H6C5.46957 21 4.96086 20.7893 4.58579 20.4142C4.21071 20.0391 4 19.5304 4 19V7Z",stroke:"#0D0A01","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))),c[3]||(c[3]=Se("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[Se("path",{d:"M16 3V7M8 3V7M4 11H20M11 15H12V18M4 7C4 6.46957 4.21071 5.96086 4.58579 5.58579C4.96086 5.21071 5.46957 5 6 5H18C18.5304 5 19.0391 5.21071 19.4142 5.58579C19.7893 5.96086 20 6.46957 20 7V19C20 19.5304 19.7893 20.0391 19.4142 20.4142C19.0391 20.7893 18.5304 21 18 21H6C5.46957 21 4.96086 20.7893 4.58579 20.4142C4.21071 20.0391 4 19.5304 4 19V7Z",stroke:"#0D0A01","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))])]),_:1},8,["modelValue","disabled","max-date","min-date"])])}}}),rR=a_.global.t;rR("menu.sidebar.main");var xg={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(o_,function(){var e=1e3,r=6e4,s=36e5,i="millisecond",a="second",l="minute",u="hour",c="day",d="week",f="month",g="quarter",b="year",v="date",A="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(V){var N=["th","st","nd","rd"],D=V%100;return"["+V+(N[(D-20)%10]||N[D]||N[0])+"]"}},B=function(V,N,D){var z=String(V);return!z||z.length>=N?V:""+Array(N+1-z.length).join(D)+V},Q={s:B,z:function(V){var N=-V.utcOffset(),D=Math.abs(N),z=Math.floor(D/60),X=D%60;return(N<=0?"+":"-")+B(z,2,"0")+":"+B(X,2,"0")},m:function V(N,D){if(N.date()<D.date())return-V(D,N);var z=12*(D.year()-N.year())+(D.month()-N.month()),X=N.clone().add(z,f),H=D-X<0,R=N.clone().add(z+(H?-1:1),f);return+(-(z+(D-X)/(H?X-R:R-X))||0)},a:function(V){return V<0?Math.ceil(V)||0:Math.floor(V)},p:function(V){return{M:f,y:b,w:d,d:c,D:v,h:u,m:l,s:a,ms:i,Q:g}[V]||String(V||"").toLowerCase().replace(/s$/,"")},u:function(V){return V===void 0}},se="en",J={};J[se]=q;var k="$isDayjsObject",y=function(V){return V instanceof O||!(!V||!V[k])},_=function V(N,D,z){var X;if(!N)return se;if(typeof N=="string"){var H=N.toLowerCase();J[H]&&(X=H),D&&(J[H]=D,X=H);var R=N.split("-");if(!X&&R.length>1)return V(R[0])}else{var w=N.name;J[w]=N,X=w}return!z&&X&&(se=X),X||!z&&se},T=function(V,N){if(y(V))return V.clone();var D=typeof N=="object"?N:{};return D.date=V,D.args=arguments,new O(D)},I=Q;I.l=_,I.i=y,I.w=function(V,N){return T(V,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var O=function(){function V(D){this.$L=_(D.locale,null,!0),this.parse(D),this.$x=this.$x||D.x||{},this[k]=!0}var N=V.prototype;return N.parse=function(D){this.$d=function(z){var X=z.date,H=z.utc;if(X===null)return new Date(NaN);if(I.u(X))return new Date;if(X instanceof Date)return new Date(X);if(typeof X=="string"&&!/Z$/i.test(X)){var R=X.match(S);if(R){var w=R[2]-1||0,ee=(R[7]||"0").substring(0,3);return H?new Date(Date.UTC(R[1],w,R[3]||1,R[4]||0,R[5]||0,R[6]||0,ee)):new Date(R[1],w,R[3]||1,R[4]||0,R[5]||0,R[6]||0,ee)}}return new Date(X)}(D),this.init()},N.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},N.$utils=function(){return I},N.isValid=function(){return this.$d.toString()!==A},N.isSame=function(D,z){var X=T(D);return this.startOf(z)<=X&&X<=this.endOf(z)},N.isAfter=function(D,z){return T(D)<this.startOf(z)},N.isBefore=function(D,z){return this.endOf(z)<T(D)},N.$g=function(D,z,X){return I.u(D)?this[z]:this.set(X,D)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(D,z){var X=this,H=!!I.u(z)||z,R=I.p(D),w=function(le,Ae){var Y=I.w(X.$u?Date.UTC(X.$y,Ae,le):new Date(X.$y,Ae,le),X);return H?Y:Y.endOf(c)},ee=function(le,Ae){return I.w(X.toDate()[le].apply(X.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(Ae)),X)},M=this.$W,L=this.$M,j=this.$D,te="set"+(this.$u?"UTC":"");switch(R){case b:return H?w(1,0):w(31,11);case f:return H?w(1,L):w(0,L+1);case d:var p=this.$locale().weekStart||0,U=(M<p?M+7:M)-p;return w(H?j-U:j+(6-U),L);case c:case v:return ee(te+"Hours",0);case u:return ee(te+"Minutes",1);case l:return ee(te+"Seconds",2);case a:return ee(te+"Milliseconds",3);default:return this.clone()}},N.endOf=function(D){return this.startOf(D,!1)},N.$set=function(D,z){var X,H=I.p(D),R="set"+(this.$u?"UTC":""),w=(X={},X[c]=R+"Date",X[v]=R+"Date",X[f]=R+"Month",X[b]=R+"FullYear",X[u]=R+"Hours",X[l]=R+"Minutes",X[a]=R+"Seconds",X[i]=R+"Milliseconds",X)[H],ee=H===c?this.$D+(z-this.$W):z;if(H===f||H===b){var M=this.clone().set(v,1);M.$d[w](ee),M.init(),this.$d=M.set(v,Math.min(this.$D,M.daysInMonth())).$d}else w&&this.$d[w](ee);return this.init(),this},N.set=function(D,z){return this.clone().$set(D,z)},N.get=function(D){return this[I.p(D)]()},N.add=function(D,z){var X,H=this;D=Number(D);var R=I.p(z),w=function(L){var j=T(H);return I.w(j.date(j.date()+Math.round(L*D)),H)};if(R===f)return this.set(f,this.$M+D);if(R===b)return this.set(b,this.$y+D);if(R===c)return w(1);if(R===d)return w(7);var ee=(X={},X[l]=r,X[u]=s,X[a]=e,X)[R]||1,M=this.$d.getTime()+D*ee;return I.w(M,this)},N.subtract=function(D,z){return this.add(-1*D,z)},N.format=function(D){var z=this,X=this.$locale();if(!this.isValid())return X.invalidDate||A;var H=D||"YYYY-MM-DDTHH:mm:ssZ",R=I.z(this),w=this.$H,ee=this.$m,M=this.$M,L=X.weekdays,j=X.months,te=X.meridiem,p=function(Ae,Y,ke,ae){return Ae&&(Ae[Y]||Ae(z,H))||ke[Y].slice(0,ae)},U=function(Ae){return I.s(w%12||12,Ae,"0")},le=te||function(Ae,Y,ke){var ae=Ae<12?"AM":"PM";return ke?ae.toLowerCase():ae};return H.replace(F,function(Ae,Y){return Y||function(ke){switch(ke){case"YY":return String(z.$y).slice(-2);case"YYYY":return I.s(z.$y,4,"0");case"M":return M+1;case"MM":return I.s(M+1,2,"0");case"MMM":return p(X.monthsShort,M,j,3);case"MMMM":return p(j,M);case"D":return z.$D;case"DD":return I.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return p(X.weekdaysMin,z.$W,L,2);case"ddd":return p(X.weekdaysShort,z.$W,L,3);case"dddd":return L[z.$W];case"H":return String(w);case"HH":return I.s(w,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return le(w,ee,!0);case"A":return le(w,ee,!1);case"m":return String(ee);case"mm":return I.s(ee,2,"0");case"s":return String(z.$s);case"ss":return I.s(z.$s,2,"0");case"SSS":return I.s(z.$ms,3,"0");case"Z":return R}return null}(Ae)||R.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(D,z,X){var H,R=this,w=I.p(z),ee=T(D),M=(ee.utcOffset()-this.utcOffset())*r,L=this-ee,j=function(){return I.m(R,ee)};switch(w){case b:H=j()/12;break;case f:H=j();break;case g:H=j()/3;break;case d:H=(L-M)/6048e5;break;case c:H=(L-M)/864e5;break;case u:H=L/s;break;case l:H=L/r;break;case a:H=L/e;break;default:H=L}return X?H:I.a(H)},N.daysInMonth=function(){return this.endOf(f).$D},N.$locale=function(){return J[this.$L]},N.locale=function(D,z){if(!D)return this.$L;var X=this.clone(),H=_(D,z,!0);return H&&(X.$L=H),X},N.clone=function(){return I.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},V}(),x=O.prototype;return T.prototype=x,[["$ms",i],["$s",a],["$m",l],["$H",u],["$W",c],["$M",f],["$y",b],["$D",v]].forEach(function(V){x[V[1]]=function(N){return this.$g(N,V[0],V[1])}}),T.extend=function(V,N){return V.$i||(V(N,O,T),V.$i=!0),T},T.locale=_,T.isDayjs=y,T.unix=function(V){return T(1e3*V)},T.en=J[se],T.Ls=J,T.p={},T})})(xg);var sR=xg.exports;const iR=l_(sR);var aR=Object.defineProperty,oR=(n,t,e)=>t in n?aR(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,da=(n,t,e)=>oR(n,typeof t!="symbol"?t+"":t,e);const Af={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},kf=(n,t,e)=>n.replaceAll(t,"").replace(e,".").replace("..",".").replace(/[^.\d]/g,""),Sf=(n,t,e)=>{var r;return new Intl.NumberFormat(((r=e.number)==null?void 0:r.locale)??"en",{minimumFractionDigits:n,maximumFractionDigits:t,roundingMode:"trunc"})},lR=(n,t=!0,e)=>{var r,s,i,a;const l=((r=e.number)==null?void 0:r.unsigned)!==!0&&n.startsWith("-")?"-":"",u=((s=e.number)==null?void 0:s.fraction)??0;let c=Sf(0,u,e);const d=c.formatToParts(1000.12),f=((i=d.find(S=>S.type==="group"))==null?void 0:i.value)??" ",g=((a=d.find(S=>S.type==="decimal"))==null?void 0:a.value)??".",b=kf(n,f,g);if(Number.isNaN(parseFloat(b)))return l;const v=b.split(".");if(v[1]!=null&&v[1].length>=1){const S=v[1].length<=u?v[1].length:u;c=Sf(S,u,e)}let A=c.format(parseFloat(b));return t?u>0&&b.endsWith(".")&&!b.slice(0,-1).includes(".")&&(A+=g):A=kf(A,f,g),l+A};let uR=class{constructor(t={}){da(this,"opts",{}),da(this,"memo",new Map);const e={...t};if(e.tokens!=null){e.tokens=e.tokensReplace?{...e.tokens}:{...Af,...e.tokens};for(const r of Object.values(e.tokens))typeof r.pattern=="string"&&(r.pattern=new RegExp(r.pattern))}else e.tokens=Af;Array.isArray(e.mask)&&(e.mask.length>1?e.mask=[...e.mask].sort((r,s)=>r.length-s.length):e.mask=e.mask[0]??""),e.mask===""&&(e.mask=null),this.opts=e}masked(t){return this.process(String(t),this.findMask(String(t)))}unmasked(t){return this.process(String(t),this.findMask(String(t)),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(t){const e=this.findMask(String(t));if(this.opts.mask==null||e==null)return!1;const r=this.process(String(t),e).length;return typeof this.opts.mask=="string"?r>=this.opts.mask.length:r>=e.length}findMask(t){const e=this.opts.mask;if(e==null)return null;if(typeof e=="string")return e;if(typeof e=="function")return e(t);const r=this.process(t,e.slice(-1).pop()??"",!1);return e.find(s=>this.process(t,s,!1).length>=r.length)??""}escapeMask(t){const e=[],r=[];return t.split("").forEach((s,i)=>{s==="!"&&t[i-1]!=="!"?r.push(i-r.length):e.push(s)}),{mask:e.join(""),escaped:r}}process(t,e,r=!0){if(this.opts.number!=null)return lR(t,r,this.opts);if(e==null)return t;const s=`v=${t},mr=${e},m=${r?1:0}`;if(this.memo.has(s))return this.memo.get(s);const{mask:i,escaped:a}=this.escapeMask(e),l=[],u=this.opts.tokens!=null?this.opts.tokens:{},c=this.isReversed()?-1:1,d=this.isReversed()?"unshift":"push",f=this.isReversed()?0:i.length-1,g=this.isReversed()?()=>S>-1&&F>-1:()=>S<i.length&&F<t.length,b=B=>!this.isReversed()&&B<=f||this.isReversed()&&B>=f;let v,A=-1,S=this.isReversed()?i.length-1:0,F=this.isReversed()?t.length-1:0,q=!1;for(;g();){const B=i.charAt(S),Q=u[B],se=(Q==null?void 0:Q.transform)!=null?Q.transform(t.charAt(F)):t.charAt(F);if(!a.includes(S)&&Q!=null?(se.match(Q.pattern)!=null?(l[d](se),Q.repeated?(A===-1?A=S:S===f&&S!==A&&(S=A-c),f===A&&(S-=c)):Q.multiple&&(q=!0,S-=c),S+=c):Q.multiple?q&&(S+=c,F-=c,q=!1):se===v?v=void 0:Q.optional&&(S+=c,F-=c),F+=c):(r&&!this.isEager()&&l[d](B),se===B&&!this.isEager()?F+=c:v=B,this.isEager()||(S+=c)),this.isEager())for(;b(S)&&(u[i.charAt(S)]==null||a.includes(S));){if(r){if(l[d](i.charAt(S)),t.charAt(F)===i.charAt(S)){S+=c,F+=c;continue}}else i.charAt(S)===t.charAt(F)&&(F+=c);S+=c}}return this.memo.set(s,l.join("")),this.memo.get(s)}};const Mg=n=>JSON.parse(n.replaceAll("'",'"')),cR=(n,t={})=>{const e={...t};n.dataset.maska!=null&&n.dataset.maska!==""&&(e.mask=hR(n.dataset.maska)),n.dataset.maskaEager!=null&&(e.eager=po(n.dataset.maskaEager)),n.dataset.maskaReversed!=null&&(e.reversed=po(n.dataset.maskaReversed)),n.dataset.maskaTokensReplace!=null&&(e.tokensReplace=po(n.dataset.maskaTokensReplace)),n.dataset.maskaTokens!=null&&(e.tokens=dR(n.dataset.maskaTokens));const r={};return n.dataset.maskaNumberLocale!=null&&(r.locale=n.dataset.maskaNumberLocale),n.dataset.maskaNumberFraction!=null&&(r.fraction=parseInt(n.dataset.maskaNumberFraction)),n.dataset.maskaNumberUnsigned!=null&&(r.unsigned=po(n.dataset.maskaNumberUnsigned)),(n.dataset.maskaNumber!=null||Object.values(r).length>0)&&(e.number=r),e},po=n=>n!==""?!!JSON.parse(n):!0,hR=n=>n.startsWith("[")&&n.endsWith("]")?Mg(n):n,dR=n=>{if(n.startsWith("{")&&n.endsWith("}"))return Mg(n);const t={};return n.split("|").forEach(e=>{const r=e.split(":");t[r[0]]={pattern:new RegExp(r[1]),optional:r[2]==="optional",multiple:r[2]==="multiple",repeated:r[2]==="repeated"}}),t};class fR{constructor(t,e={}){da(this,"items",new Map),da(this,"eventAbortController"),da(this,"onInput",r=>{if(r instanceof CustomEvent&&r.type==="input"&&!r.isTrusted&&!r.bubbles)return;const s=r.target,i=this.items.get(s);if(i===void 0)return;const a="inputType"in r&&r.inputType.startsWith("delete"),l=i.isEager(),u=a&&l&&i.unmasked(s.value)===""?"":s.value;this.fixCursor(s,a,()=>this.setValue(s,u))}),this.options=e,this.eventAbortController=new AbortController,this.init(this.getInputs(t))}update(t={}){this.options={...t},this.init(Array.from(this.items.keys()))}updateValue(t){var e;t.value!==""&&t.value!==((e=this.processInput(t))==null?void 0:e.masked)&&this.setValue(t,t.value)}destroy(){this.eventAbortController.abort(),this.items.clear()}init(t){const e=this.getOptions(this.options);for(const r of t){if(!this.items.has(r)){const{signal:i}=this.eventAbortController;r.addEventListener("input",this.onInput,{capture:!0,signal:i})}const s=new uR(cR(r,e));this.items.set(r,s),queueMicrotask(()=>this.updateValue(r)),r.selectionStart===null&&s.isEager()&&console.warn("Maska: input of `%s` type is not supported",r.type)}}getInputs(t){return typeof t=="string"?Array.from(document.querySelectorAll(t)):"length"in t?Array.from(t):[t]}getOptions(t){const{onMaska:e,preProcess:r,postProcess:s,...i}=t;return i}fixCursor(t,e,r){var s,i;const a=t.selectionStart,l=t.value;if(r(),a===null||a===l.length&&!e)return;const u=t.value,c=l.slice(0,a),d=u.slice(0,a),f=(s=this.processInput(t,c))==null?void 0:s.unmasked,g=(i=this.processInput(t,d))==null?void 0:i.unmasked;if(f===void 0||g===void 0)return;let b=a;c!==d&&(b+=e?u.length-l.length:f.length-g.length),t.setSelectionRange(b,b)}setValue(t,e){const r=this.processInput(t,e);r!==void 0&&(t.value=r.masked,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(s=>s(r)):this.options.onMaska(r)),t.dispatchEvent(new CustomEvent("maska",{detail:r})),t.dispatchEvent(new CustomEvent("input",{detail:r.masked})))}processInput(t,e){const r=this.items.get(t);if(r===void 0)return;let s=e??t.value;this.options.preProcess!=null&&(s=this.options.preProcess(s));let i=r.masked(s);return this.options.postProcess!=null&&(i=this.options.postProcess(i)),{masked:i,unmasked:r.unmasked(s),completed:r.completed(s)}}}const du=new WeakMap,mR=(n,t)=>{if(n.arg==null||n.instance==null)return;const e="setup"in n.instance.$.type;n.arg in n.instance?n.instance[n.arg]=t:e&&console.warn("Maska: please expose `%s` using defineExpose",n.arg)},Rf=(n,t)=>{var e;const r=n instanceof HTMLInputElement?n:n.querySelector("input");if(r==null||(r==null?void 0:r.type)==="file")return;let s={};if(t.value!=null&&(s=typeof t.value=="string"?{mask:t.value}:{...t.value}),t.arg!=null){const i=a=>{const l=t.modifiers.unmasked?a.unmasked:t.modifiers.completed?a.completed:a.masked;mR(t,l)};s.onMaska=s.onMaska==null?i:Array.isArray(s.onMaska)?[...s.onMaska,i]:[s.onMaska,i]}du.has(r)?(e=du.get(r))==null||e.update(s):du.set(r,new fR(r,s))},pR=()=>{};var If={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?t[e++]=s:s<2048?(t[e++]=s>>6|192,t[e++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=s>>18|240,t[e++]=s>>12&63|128,t[e++]=s>>6&63|128,t[e++]=s&63|128):(t[e++]=s>>12|224,t[e++]=s>>6&63|128,t[e++]=s&63|128)}return t},gR=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const s=n[e++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[e++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[e++],a=n[e++],l=n[e++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=n[e++],a=n[e++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Og={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,l=a?n[s+1]:0,u=s+2<n.length,c=u?n[s+2]:0,d=i>>2,f=(i&3)<<4|l>>4;let g=(l&15)<<2|c>>6,b=c&63;u||(b=64,a||(g=64)),r.push(e[d],e[f],e[g],e[b])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Dg(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):gR(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=e[n.charAt(s++)],l=s<n.length?e[n.charAt(s)]:0;++s;const c=s<n.length?e[n.charAt(s)]:64;++s;const f=s<n.length?e[n.charAt(s)]:64;if(++s,i==null||l==null||c==null||f==null)throw new vR;const g=i<<2|l>>4;if(r.push(g),c!==64){const b=l<<4&240|c>>2;if(r.push(b),f!==64){const v=c<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class vR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yR=function(n){const t=Dg(n);return Og.encodeByteArray(t,!0)},Uo=function(n){return yR(n).replace(/\./g,"")},_R=function(n){try{return Og.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=()=>wR().__FIREBASE_DEFAULTS__,TR=()=>{if(typeof process>"u"||typeof If>"u")return;const n=If.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&_R(n[1]);return t&&JSON.parse(t)},qc=()=>{try{return pR()||bR()||TR()||PR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ER=n=>{var t,e;return(e=(t=qc())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},AR=n=>{const t=ER(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},Vg=()=>{var n;return(n=qc())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Uo(JSON.stringify(e)),Uo(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IR(){var n;const t=(n=qc())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CR(){return!IR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xR(){try{return typeof indexedDB=="object"}catch{return!1}}function MR(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{e=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="FirebaseError";class Ri extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=DR,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ng.prototype.create)}}class Ng{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?OR(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ri(s,l,r)}}function OR(n,t){return n.replace(VR,(e,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const VR=/\{\$([^}]+)}/g;function qo(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const s of e){if(!r.includes(s))return!1;const i=n[s],a=t[s];if(Cf(i)&&Cf(a)){if(!qo(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!e.includes(s))return!1;return!0}function Cf(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(n){return n&&n._delegate?n._delegate:n}class Oa{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new kR;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(FR(t))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=vs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=vs){return this.instances.has(t)}getOptions(t=vs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,e){var r;const s=this.normalizeInstanceIdentifier(e),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const s of r)try{s(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$R(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=vs){return this.component?this.component.multipleInstances?t:vs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $R(n){return n===vs?void 0:n}function FR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new NR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rt||(rt={}));const BR={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},UR=rt.INFO,qR={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},jR=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),s=qR[t];if(s)console[s](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class $g{constructor(t){this.name=t,this._logLevel=UR,this._logHandler=jR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in rt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?BR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...t),this._logHandler(this,rt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...t),this._logHandler(this,rt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...t),this._logHandler(this,rt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...t),this._logHandler(this,rt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...t),this._logHandler(this,rt.ERROR,...t)}}const zR=(n,t)=>t.some(e=>n instanceof e);let xf,Mf;function YR(){return xf||(xf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HR(){return Mf||(Mf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fg=new WeakMap,qu=new WeakMap,Lg=new WeakMap,fu=new WeakMap,jc=new WeakMap;function WR(n){const t=new Promise((e,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{e(Yr(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&Fg.set(e,n)}).catch(()=>{}),jc.set(t,n),t}function KR(n){if(qu.has(n))return;const t=new Promise((e,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{e(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});qu.set(n,t)}let ju={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return qu.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Lg.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Yr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function GR(n){ju=n(ju)}function QR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(mu(this),t,...e);return Lg.set(r,t.sort?t.sort():[t]),Yr(r)}:HR().includes(n)?function(...t){return n.apply(mu(this),t),Yr(Fg.get(this))}:function(...t){return Yr(n.apply(mu(this),t))}}function JR(n){return typeof n=="function"?QR(n):(n instanceof IDBTransaction&&KR(n),zR(n,YR())?new Proxy(n,ju):n)}function Yr(n){if(n instanceof IDBRequest)return WR(n);if(fu.has(n))return fu.get(n);const t=JR(n);return t!==n&&(fu.set(n,t),jc.set(t,n)),t}const mu=n=>jc.get(n);function XR(n,t,{blocked:e,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,t),l=Yr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Yr(a.result),u.oldVersion,u.newVersion,Yr(a.transaction),u)}),e&&a.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const ZR=["get","getKey","getAll","getAllKeys","count"],eI=["put","add","delete","clear"],pu=new Map;function Df(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(pu.get(t))return pu.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,s=eI.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ZR.includes(e)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[e](...l),s&&u.done]))[0]};return pu.set(t,i),i}GR(n=>({...n,get:(t,e,r)=>Df(t,e)||n.get(t,e,r),has:(t,e)=>!!Df(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(nI(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function nI(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const zu="@firebase/app",Of="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new $g("@firebase/app"),rI="@firebase/app-compat",sI="@firebase/analytics-compat",iI="@firebase/analytics",aI="@firebase/app-check-compat",oI="@firebase/app-check",lI="@firebase/auth",uI="@firebase/auth-compat",cI="@firebase/database",hI="@firebase/data-connect",dI="@firebase/database-compat",fI="@firebase/functions",mI="@firebase/functions-compat",pI="@firebase/installations",gI="@firebase/installations-compat",vI="@firebase/messaging",yI="@firebase/messaging-compat",_I="@firebase/performance",wI="@firebase/performance-compat",bI="@firebase/remote-config",TI="@firebase/remote-config-compat",PI="@firebase/storage",EI="@firebase/storage-compat",AI="@firebase/firestore",kI="@firebase/vertexai",SI="@firebase/firestore-compat",RI="firebase",II="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="[DEFAULT]",CI={[zu]:"fire-core",[rI]:"fire-core-compat",[iI]:"fire-analytics",[sI]:"fire-analytics-compat",[oI]:"fire-app-check",[aI]:"fire-app-check-compat",[lI]:"fire-auth",[uI]:"fire-auth-compat",[cI]:"fire-rtdb",[hI]:"fire-data-connect",[dI]:"fire-rtdb-compat",[fI]:"fire-fn",[mI]:"fire-fn-compat",[pI]:"fire-iid",[gI]:"fire-iid-compat",[vI]:"fire-fcm",[yI]:"fire-fcm-compat",[_I]:"fire-perf",[wI]:"fire-perf-compat",[bI]:"fire-rc",[TI]:"fire-rc-compat",[PI]:"fire-gcs",[EI]:"fire-gcs-compat",[AI]:"fire-fst",[SI]:"fire-fst-compat",[kI]:"fire-vertex","fire-js":"fire-js",[RI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=new Map,xI=new Map,Hu=new Map;function Vf(n,t){try{n.container.addComponent(t)}catch(e){Tr.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function zo(n){const t=n.name;if(Hu.has(t))return Tr.debug(`There were multiple attempts to register component ${t}.`),!1;Hu.set(t,n);for(const e of jo.values())Vf(e,n);for(const e of xI.values())Vf(e,n);return!0}function MI(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function DI(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new Ng("app","Firebase",OI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=II;function Bg(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Yu,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw Hr.create("bad-app-name",{appName:String(s)});if(e||(e=Vg()),!e)throw Hr.create("no-options");const i=jo.get(s);if(i){if(qo(e,i.options)&&qo(r,i.config))return i;throw Hr.create("duplicate-app",{appName:s})}const a=new LR(s);for(const u of Hu.values())a.addComponent(u);const l=new VI(e,r,a);return jo.set(s,l),l}function $I(n=Yu){const t=jo.get(n);if(!t&&n===Yu&&Vg())return Bg();if(!t)throw Hr.create("no-app",{appName:n});return t}function ai(n,t,e){var r;let s=(r=CI[n])!==null&&r!==void 0?r:n;e&&(s+=`-${e}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Tr.warn(l.join(" "));return}zo(new Oa(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="firebase-heartbeat-database",LI=1,Va="firebase-heartbeat-store";let gu=null;function Ug(){return gu||(gu=XR(FI,LI,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Va)}catch(e){console.warn(e)}}}}).catch(n=>{throw Hr.create("idb-open",{originalErrorMessage:n.message})})),gu}async function BI(n){try{const e=(await Ug()).transaction(Va),r=await e.objectStore(Va).get(qg(n));return await e.done,r}catch(t){if(t instanceof Ri)Tr.warn(t.message);else{const e=Hr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Tr.warn(e.message)}}}async function Nf(n,t){try{const r=(await Ug()).transaction(Va,"readwrite");await r.objectStore(Va).put(t,qg(n)),await r.done}catch(e){if(e instanceof Ri)Tr.warn(e.message);else{const r=Hr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(r.message)}}}function qg(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=1024,qI=30;class jI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new YI(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$f();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>qI){const a=HI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=$f(),{heartbeatsToSend:r,unsentEntries:s}=zI(this._heartbeatsCache.heartbeats),i=Uo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Tr.warn(e),""}}}function $f(){return new Date().toISOString().substring(0,10)}function zI(n,t=UI){const e=[];let r=n.slice();for(const s of n){const i=e.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Ff(e)>t){i.dates.pop();break}}else if(e.push({agent:s.agent,dates:[s.date]}),Ff(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class YI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xR()?MR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await BI(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nf(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nf(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Ff(n){return Uo(JSON.stringify({version:2,heartbeats:n})).length}function HI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(n){zo(new Oa("platform-logger",t=>new tI(t),"PRIVATE")),zo(new Oa("heartbeat",t=>new jI(t),"PRIVATE")),ai(zu,Of,n),ai(zu,Of,"esm2017"),ai("fire-js","")}WI("");var KI="firebase",GI="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai(KI,GI,"app");var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,jg;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(k,y){function _(){}_.prototype=y.prototype,k.D=y.prototype,k.prototype=new _,k.prototype.constructor=k,k.C=function(T,I,O){for(var x=Array(arguments.length-2),V=2;V<arguments.length;V++)x[V-2]=arguments[V];return y.prototype[I].apply(T,x)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,y,_){_||(_=0);var T=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)T[I]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(I=0;16>I;++I)T[I]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=k.g[0],_=k.g[1],I=k.g[2];var O=k.g[3],x=y+(O^_&(I^O))+T[0]+3614090360&4294967295;y=_+(x<<7&4294967295|x>>>25),x=O+(I^y&(_^I))+T[1]+3905402710&4294967295,O=y+(x<<12&4294967295|x>>>20),x=I+(_^O&(y^_))+T[2]+606105819&4294967295,I=O+(x<<17&4294967295|x>>>15),x=_+(y^I&(O^y))+T[3]+3250441966&4294967295,_=I+(x<<22&4294967295|x>>>10),x=y+(O^_&(I^O))+T[4]+4118548399&4294967295,y=_+(x<<7&4294967295|x>>>25),x=O+(I^y&(_^I))+T[5]+1200080426&4294967295,O=y+(x<<12&4294967295|x>>>20),x=I+(_^O&(y^_))+T[6]+2821735955&4294967295,I=O+(x<<17&4294967295|x>>>15),x=_+(y^I&(O^y))+T[7]+4249261313&4294967295,_=I+(x<<22&4294967295|x>>>10),x=y+(O^_&(I^O))+T[8]+1770035416&4294967295,y=_+(x<<7&4294967295|x>>>25),x=O+(I^y&(_^I))+T[9]+2336552879&4294967295,O=y+(x<<12&4294967295|x>>>20),x=I+(_^O&(y^_))+T[10]+4294925233&4294967295,I=O+(x<<17&4294967295|x>>>15),x=_+(y^I&(O^y))+T[11]+2304563134&4294967295,_=I+(x<<22&4294967295|x>>>10),x=y+(O^_&(I^O))+T[12]+1804603682&4294967295,y=_+(x<<7&4294967295|x>>>25),x=O+(I^y&(_^I))+T[13]+4254626195&4294967295,O=y+(x<<12&4294967295|x>>>20),x=I+(_^O&(y^_))+T[14]+2792965006&4294967295,I=O+(x<<17&4294967295|x>>>15),x=_+(y^I&(O^y))+T[15]+1236535329&4294967295,_=I+(x<<22&4294967295|x>>>10),x=y+(I^O&(_^I))+T[1]+4129170786&4294967295,y=_+(x<<5&4294967295|x>>>27),x=O+(_^I&(y^_))+T[6]+3225465664&4294967295,O=y+(x<<9&4294967295|x>>>23),x=I+(y^_&(O^y))+T[11]+643717713&4294967295,I=O+(x<<14&4294967295|x>>>18),x=_+(O^y&(I^O))+T[0]+3921069994&4294967295,_=I+(x<<20&4294967295|x>>>12),x=y+(I^O&(_^I))+T[5]+3593408605&4294967295,y=_+(x<<5&4294967295|x>>>27),x=O+(_^I&(y^_))+T[10]+38016083&4294967295,O=y+(x<<9&4294967295|x>>>23),x=I+(y^_&(O^y))+T[15]+3634488961&4294967295,I=O+(x<<14&4294967295|x>>>18),x=_+(O^y&(I^O))+T[4]+3889429448&4294967295,_=I+(x<<20&4294967295|x>>>12),x=y+(I^O&(_^I))+T[9]+568446438&4294967295,y=_+(x<<5&4294967295|x>>>27),x=O+(_^I&(y^_))+T[14]+3275163606&4294967295,O=y+(x<<9&4294967295|x>>>23),x=I+(y^_&(O^y))+T[3]+4107603335&4294967295,I=O+(x<<14&4294967295|x>>>18),x=_+(O^y&(I^O))+T[8]+1163531501&4294967295,_=I+(x<<20&4294967295|x>>>12),x=y+(I^O&(_^I))+T[13]+2850285829&4294967295,y=_+(x<<5&4294967295|x>>>27),x=O+(_^I&(y^_))+T[2]+4243563512&4294967295,O=y+(x<<9&4294967295|x>>>23),x=I+(y^_&(O^y))+T[7]+1735328473&4294967295,I=O+(x<<14&4294967295|x>>>18),x=_+(O^y&(I^O))+T[12]+2368359562&4294967295,_=I+(x<<20&4294967295|x>>>12),x=y+(_^I^O)+T[5]+4294588738&4294967295,y=_+(x<<4&4294967295|x>>>28),x=O+(y^_^I)+T[8]+2272392833&4294967295,O=y+(x<<11&4294967295|x>>>21),x=I+(O^y^_)+T[11]+1839030562&4294967295,I=O+(x<<16&4294967295|x>>>16),x=_+(I^O^y)+T[14]+4259657740&4294967295,_=I+(x<<23&4294967295|x>>>9),x=y+(_^I^O)+T[1]+2763975236&4294967295,y=_+(x<<4&4294967295|x>>>28),x=O+(y^_^I)+T[4]+1272893353&4294967295,O=y+(x<<11&4294967295|x>>>21),x=I+(O^y^_)+T[7]+4139469664&4294967295,I=O+(x<<16&4294967295|x>>>16),x=_+(I^O^y)+T[10]+3200236656&4294967295,_=I+(x<<23&4294967295|x>>>9),x=y+(_^I^O)+T[13]+681279174&4294967295,y=_+(x<<4&4294967295|x>>>28),x=O+(y^_^I)+T[0]+3936430074&4294967295,O=y+(x<<11&4294967295|x>>>21),x=I+(O^y^_)+T[3]+3572445317&4294967295,I=O+(x<<16&4294967295|x>>>16),x=_+(I^O^y)+T[6]+76029189&4294967295,_=I+(x<<23&4294967295|x>>>9),x=y+(_^I^O)+T[9]+3654602809&4294967295,y=_+(x<<4&4294967295|x>>>28),x=O+(y^_^I)+T[12]+3873151461&4294967295,O=y+(x<<11&4294967295|x>>>21),x=I+(O^y^_)+T[15]+530742520&4294967295,I=O+(x<<16&4294967295|x>>>16),x=_+(I^O^y)+T[2]+3299628645&4294967295,_=I+(x<<23&4294967295|x>>>9),x=y+(I^(_|~O))+T[0]+4096336452&4294967295,y=_+(x<<6&4294967295|x>>>26),x=O+(_^(y|~I))+T[7]+1126891415&4294967295,O=y+(x<<10&4294967295|x>>>22),x=I+(y^(O|~_))+T[14]+2878612391&4294967295,I=O+(x<<15&4294967295|x>>>17),x=_+(O^(I|~y))+T[5]+4237533241&4294967295,_=I+(x<<21&4294967295|x>>>11),x=y+(I^(_|~O))+T[12]+1700485571&4294967295,y=_+(x<<6&4294967295|x>>>26),x=O+(_^(y|~I))+T[3]+2399980690&4294967295,O=y+(x<<10&4294967295|x>>>22),x=I+(y^(O|~_))+T[10]+4293915773&4294967295,I=O+(x<<15&4294967295|x>>>17),x=_+(O^(I|~y))+T[1]+2240044497&4294967295,_=I+(x<<21&4294967295|x>>>11),x=y+(I^(_|~O))+T[8]+1873313359&4294967295,y=_+(x<<6&4294967295|x>>>26),x=O+(_^(y|~I))+T[15]+4264355552&4294967295,O=y+(x<<10&4294967295|x>>>22),x=I+(y^(O|~_))+T[6]+2734768916&4294967295,I=O+(x<<15&4294967295|x>>>17),x=_+(O^(I|~y))+T[13]+1309151649&4294967295,_=I+(x<<21&4294967295|x>>>11),x=y+(I^(_|~O))+T[4]+4149444226&4294967295,y=_+(x<<6&4294967295|x>>>26),x=O+(_^(y|~I))+T[11]+3174756917&4294967295,O=y+(x<<10&4294967295|x>>>22),x=I+(y^(O|~_))+T[2]+718787259&4294967295,I=O+(x<<15&4294967295|x>>>17),x=_+(O^(I|~y))+T[9]+3951481745&4294967295,k.g[0]=k.g[0]+y&4294967295,k.g[1]=k.g[1]+(I+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+I&4294967295,k.g[3]=k.g[3]+O&4294967295}r.prototype.u=function(k,y){y===void 0&&(y=k.length);for(var _=y-this.blockSize,T=this.B,I=this.h,O=0;O<y;){if(I==0)for(;O<=_;)s(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<y;)if(T[I++]=k.charCodeAt(O++),I==this.blockSize){s(this,T),I=0;break}}else for(;O<y;)if(T[I++]=k[O++],I==this.blockSize){s(this,T),I=0;break}}this.h=I,this.o+=y},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var y=1;y<k.length-8;++y)k[y]=0;var _=8*this.o;for(y=k.length-8;y<k.length;++y)k[y]=_&255,_/=256;for(this.u(k),k=Array(16),y=_=0;4>y;++y)for(var T=0;32>T;T+=8)k[_++]=this.g[y]>>>T&255;return k};function i(k,y){var _=l;return Object.prototype.hasOwnProperty.call(_,k)?_[k]:_[k]=y(k)}function a(k,y){this.h=y;for(var _=[],T=!0,I=k.length-1;0<=I;I--){var O=k[I]|0;T&&O==y||(_[I]=O,T=!1)}this.g=_}var l={};function u(k){return-128<=k&&128>k?i(k,function(y){return new a([y|0],0>y?-1:0)}):new a([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return S(c(-k));for(var y=[],_=1,T=0;k>=_;T++)y[T]=k/_|0,_*=4294967296;return new a(y,0)}function d(k,y){if(k.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(k.charAt(0)=="-")return S(d(k.substring(1),y));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(y,8)),T=f,I=0;I<k.length;I+=8){var O=Math.min(8,k.length-I),x=parseInt(k.substring(I,I+O),y);8>O?(O=c(Math.pow(y,O)),T=T.j(O).add(c(x))):(T=T.j(_),T=T.add(c(x)))}return T}var f=u(0),g=u(1),b=u(16777216);n=a.prototype,n.m=function(){if(A(this))return-S(this).m();for(var k=0,y=1,_=0;_<this.g.length;_++){var T=this.i(_);k+=(0<=T?T:4294967296+T)*y,y*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(v(this))return"0";if(A(this))return"-"+S(this).toString(k);for(var y=c(Math.pow(k,6)),_=this,T="";;){var I=Q(_,y).g;_=F(_,I.j(y));var O=((0<_.g.length?_.g[0]:_.h)>>>0).toString(k);if(_=I,v(_))return O+T;for(;6>O.length;)O="0"+O;T=O+T}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function v(k){if(k.h!=0)return!1;for(var y=0;y<k.g.length;y++)if(k.g[y]!=0)return!1;return!0}function A(k){return k.h==-1}n.l=function(k){return k=F(this,k),A(k)?-1:v(k)?0:1};function S(k){for(var y=k.g.length,_=[],T=0;T<y;T++)_[T]=~k.g[T];return new a(_,~k.h).add(g)}n.abs=function(){return A(this)?S(this):this},n.add=function(k){for(var y=Math.max(this.g.length,k.g.length),_=[],T=0,I=0;I<=y;I++){var O=T+(this.i(I)&65535)+(k.i(I)&65535),x=(O>>>16)+(this.i(I)>>>16)+(k.i(I)>>>16);T=x>>>16,O&=65535,x&=65535,_[I]=x<<16|O}return new a(_,_[_.length-1]&-2147483648?-1:0)};function F(k,y){return k.add(S(y))}n.j=function(k){if(v(this)||v(k))return f;if(A(this))return A(k)?S(this).j(S(k)):S(S(this).j(k));if(A(k))return S(this.j(S(k)));if(0>this.l(b)&&0>k.l(b))return c(this.m()*k.m());for(var y=this.g.length+k.g.length,_=[],T=0;T<2*y;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var I=0;I<k.g.length;I++){var O=this.i(T)>>>16,x=this.i(T)&65535,V=k.i(I)>>>16,N=k.i(I)&65535;_[2*T+2*I]+=x*N,q(_,2*T+2*I),_[2*T+2*I+1]+=O*N,q(_,2*T+2*I+1),_[2*T+2*I+1]+=x*V,q(_,2*T+2*I+1),_[2*T+2*I+2]+=O*V,q(_,2*T+2*I+2)}for(T=0;T<y;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=y;T<2*y;T++)_[T]=0;return new a(_,0)};function q(k,y){for(;(k[y]&65535)!=k[y];)k[y+1]+=k[y]>>>16,k[y]&=65535,y++}function B(k,y){this.g=k,this.h=y}function Q(k,y){if(v(y))throw Error("division by zero");if(v(k))return new B(f,f);if(A(k))return y=Q(S(k),y),new B(S(y.g),S(y.h));if(A(y))return y=Q(k,S(y)),new B(S(y.g),y.h);if(30<k.g.length){if(A(k)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,T=y;0>=T.l(k);)_=se(_),T=se(T);var I=J(_,1),O=J(T,1);for(T=J(T,2),_=J(_,2);!v(T);){var x=O.add(T);0>=x.l(k)&&(I=I.add(_),O=x),T=J(T,1),_=J(_,1)}return y=F(k,I.j(y)),new B(I,y)}for(I=f;0<=k.l(y);){for(_=Math.max(1,Math.floor(k.m()/y.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),O=c(_),x=O.j(y);A(x)||0<x.l(k);)_-=T,O=c(_),x=O.j(y);v(O)&&(O=g),I=I.add(O),k=F(k,x)}return new B(I,k)}n.A=function(k){return Q(this,k).h},n.and=function(k){for(var y=Math.max(this.g.length,k.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)&k.i(T);return new a(_,this.h&k.h)},n.or=function(k){for(var y=Math.max(this.g.length,k.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)|k.i(T);return new a(_,this.h|k.h)},n.xor=function(k){for(var y=Math.max(this.g.length,k.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)^k.i(T);return new a(_,this.h^k.h)};function se(k){for(var y=k.g.length+1,_=[],T=0;T<y;T++)_[T]=k.i(T)<<1|k.i(T-1)>>>31;return new a(_,k.h)}function J(k,y){var _=y>>5;y%=32;for(var T=k.g.length-_,I=[],O=0;O<T;O++)I[O]=0<y?k.i(O+_)>>>y|k.i(O+_+1)<<32-y:k.i(O+_);return new a(I,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jg=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=d,Wr=a}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zg,ta,Yg,Ao,Wu,Hg,Wg,Kg;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,m){return o==Array.prototype||o==Object.prototype||(o[h]=m.value),o};function e(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof go=="object"&&go];for(var h=0;h<o.length;++h){var m=o[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=e(this);function s(o,h){if(h)e:{var m=r;o=o.split(".");for(var E=0;E<o.length-1;E++){var K=o[E];if(!(K in m))break e;m=m[K]}o=o[o.length-1],E=m[o],h=h(E),h!=E&&h!=null&&t(m,o,{configurable:!0,writable:!0,value:h})}}function i(o,h){o instanceof String&&(o+="");var m=0,E=!1,K={next:function(){if(!E&&m<o.length){var ne=m++;return{value:h(ne,o[ne]),done:!1}}return E=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(o){return o||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function c(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function d(o,h,m){return o.call.apply(o.bind,arguments)}function f(o,h,m){if(!o)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,E),o.apply(h,K)}}return function(){return o.apply(h,arguments)}}function g(o,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function b(o,h){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),o.apply(this,E)}}function v(o,h){function m(){}m.prototype=h.prototype,o.aa=h.prototype,o.prototype=new m,o.prototype.constructor=o,o.Qb=function(E,K,ne){for(var be=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)be[dt-2]=arguments[dt];return h.prototype[K].apply(E,be)}}function A(o){const h=o.length;if(0<h){const m=Array(h);for(let E=0;E<h;E++)m[E]=o[E];return m}return[]}function S(o,h){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(u(E)){const K=o.length||0,ne=E.length||0;o.length=K+ne;for(let be=0;be<ne;be++)o[K+be]=E[be]}else o.push(E)}}class F{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(o){return/^[\s\xa0]*$/.test(o)}function B(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function Q(o){return Q[" "](o),o}Q[" "]=function(){};var se=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function J(o,h,m){for(const E in o)h.call(m,o[E],E,o)}function k(o,h){for(const m in o)h.call(void 0,o[m],m,o)}function y(o){const h={};for(const m in o)h[m]=o[m];return h}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,h){let m,E;for(let K=1;K<arguments.length;K++){E=arguments[K];for(m in E)o[m]=E[m];for(let ne=0;ne<_.length;ne++)m=_[ne],Object.prototype.hasOwnProperty.call(E,m)&&(o[m]=E[m])}}function I(o){var h=1;o=o.split(":");const m=[];for(;0<h&&o.length;)m.push(o.shift()),h--;return o.length&&m.push(o.join(":")),m}function O(o){l.setTimeout(()=>{throw o},0)}function x(){var o=H;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class V{constructor(){this.h=this.g=null}add(h,m){const E=N.get();E.set(h,m),this.h?this.h.next=E:this.g=E,this.h=E}}var N=new F(()=>new D,o=>o.reset());class D{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let z,X=!1,H=new V,R=()=>{const o=l.Promise.resolve(void 0);z=()=>{o.then(w)}};var w=()=>{for(var o;o=x();){try{o.h.call(o.g)}catch(m){O(m)}var h=N;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}X=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return o}();function j(o,h){if(M.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var m=this.type=o.type,E=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(se){e:{try{Q(h.nodeName);var K=!0;break e}catch{}K=!1}K||(h=null)}}else m=="mouseover"?h=o.fromElement:m=="mouseout"&&(h=o.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:te[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&j.aa.h.call(this)}}v(j,M);var te={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var p="closure_listenable_"+(1e6*Math.random()|0),U=0;function le(o,h,m,E,K){this.listener=o,this.proxy=null,this.src=h,this.type=m,this.capture=!!E,this.ha=K,this.key=++U,this.da=this.fa=!1}function Ae(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Y(o){this.src=o,this.g={},this.h=0}Y.prototype.add=function(o,h,m,E,K){var ne=o.toString();o=this.g[ne],o||(o=this.g[ne]=[],this.h++);var be=ae(o,h,E,K);return-1<be?(h=o[be],m||(h.fa=!1)):(h=new le(h,this.src,ne,!!E,K),h.fa=m,o.push(h)),h};function ke(o,h){var m=h.type;if(m in o.g){var E=o.g[m],K=Array.prototype.indexOf.call(E,h,void 0),ne;(ne=0<=K)&&Array.prototype.splice.call(E,K,1),ne&&(Ae(h),o.g[m].length==0&&(delete o.g[m],o.h--))}}function ae(o,h,m,E){for(var K=0;K<o.length;++K){var ne=o[K];if(!ne.da&&ne.listener==h&&ne.capture==!!m&&ne.ha==E)return K}return-1}var oe="closure_lm_"+(1e6*Math.random()|0),C={};function me(o,h,m,E,K){if(Array.isArray(h)){for(var ne=0;ne<h.length;ne++)me(o,h[ne],m,E,K);return null}return m=Qe(m),o&&o[p]?o.K(h,m,c(E)?!!E.capture:!1,K):ge(o,h,m,!1,E,K)}function ge(o,h,m,E,K,ne){if(!h)throw Error("Invalid event type");var be=c(K)?!!K.capture:!!K,dt=G(o);if(dt||(o[oe]=dt=new Y(o)),m=dt.add(h,m,E,be,ne),m.proxy)return m;if(E=ve(),m.proxy=E,E.src=o,E.listener=m,o.addEventListener)L||(K=be),K===void 0&&(K=!1),o.addEventListener(h.toString(),E,K);else if(o.attachEvent)o.attachEvent(tt(h.toString()),E);else if(o.addListener&&o.removeListener)o.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ve(){function o(m){return h.call(o.src,o.listener,m)}const h=yt;return o}function Ue(o,h,m,E,K){if(Array.isArray(h))for(var ne=0;ne<h.length;ne++)Ue(o,h[ne],m,E,K);else E=c(E)?!!E.capture:!!E,m=Qe(m),o&&o[p]?(o=o.i,h=String(h).toString(),h in o.g&&(ne=o.g[h],m=ae(ne,m,E,K),-1<m&&(Ae(ne[m]),Array.prototype.splice.call(ne,m,1),ne.length==0&&(delete o.g[h],o.h--)))):o&&(o=G(o))&&(h=o.g[h.toString()],o=-1,h&&(o=ae(h,m,E,K)),(m=-1<o?h[o]:null)&&Ve(m))}function Ve(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[p])ke(h.i,o);else{var m=o.type,E=o.proxy;h.removeEventListener?h.removeEventListener(m,E,o.capture):h.detachEvent?h.detachEvent(tt(m),E):h.addListener&&h.removeListener&&h.removeListener(E),(m=G(h))?(ke(m,o),m.h==0&&(m.src=null,h[oe]=null)):Ae(o)}}}function tt(o){return o in C?C[o]:C[o]="on"+o}function yt(o,h){if(o.da)o=!0;else{h=new j(h,this);var m=o.listener,E=o.ha||o.src;o.fa&&Ve(o),o=m.call(E,h)}return o}function G(o){return o=o[oe],o instanceof Y?o:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qe(o){return typeof o=="function"?o:(o[we]||(o[we]=function(h){return o.handleEvent(h)}),o[we])}function Ke(){ee.call(this),this.i=new Y(this),this.M=this,this.F=null}v(Ke,ee),Ke.prototype[p]=!0,Ke.prototype.removeEventListener=function(o,h,m,E){Ue(this,o,h,m,E)};function ct(o,h){var m,E=o.F;if(E)for(m=[];E;E=E.F)m.push(E);if(o=o.M,E=h.type||h,typeof h=="string")h=new M(h,o);else if(h instanceof M)h.target=h.target||o;else{var K=h;h=new M(E,o),T(h,K)}if(K=!0,m)for(var ne=m.length-1;0<=ne;ne--){var be=h.g=m[ne];K=Ce(be,E,!0,h)&&K}if(be=h.g=o,K=Ce(be,E,!0,h)&&K,K=Ce(be,E,!1,h)&&K,m)for(ne=0;ne<m.length;ne++)be=h.g=m[ne],K=Ce(be,E,!1,h)&&K}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var m=o.g[h],E=0;E<m.length;E++)Ae(m[E]);delete o.g[h],o.h--}}this.F=null},Ke.prototype.K=function(o,h,m,E){return this.i.add(String(o),h,!1,m,E)},Ke.prototype.L=function(o,h,m,E){return this.i.add(String(o),h,!0,m,E)};function Ce(o,h,m,E){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var K=!0,ne=0;ne<h.length;++ne){var be=h[ne];if(be&&!be.da&&be.capture==m){var dt=be.listener,tn=be.ha||be.src;be.fa&&ke(o.i,be),K=dt.call(tn,E)!==!1&&K}}return K&&!E.defaultPrevented}function Pt(o,h,m){if(typeof o=="function")m&&(o=g(o,m));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function on(o){o.g=Pt(()=>{o.g=null,o.i&&(o.i=!1,on(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class cr extends ee{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:on(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(o){ee.call(this),this.h=o,this.g={}}v(Mn,ee);var Ir=[];function Ls(o){J(o.g,function(h,m){this.g.hasOwnProperty(m)&&Ve(h)},o),o.g={}}Mn.prototype.N=function(){Mn.aa.N.call(this),Ls(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=l.JSON.stringify,Di=l.JSON.parse,Oi=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Z(){}Z.prototype.h=null;function _e(o){return o.h||(o.h=o.i())}function Oe(){}var ze={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ue(){M.call(this,"d")}v(ue,M);function Te(){M.call(this,"c")}v(Te,M);var Ie={},Dn=null;function _n(){return Dn=Dn||new Ke}Ie.La="serverreachability";function Jn(o){M.call(this,Ie.La,o)}v(Jn,M);function Pn(o){const h=_n();ct(h,new Jn(h))}Ie.STAT_EVENT="statevent";function Bs(o,h){M.call(this,Ie.STAT_EVENT,o),this.stat=h}v(Bs,M);function en(o){const h=_n();ct(h,new Bs(h,o))}Ie.Ma="timingevent";function _h(o,h){M.call(this,Ie.Ma,o),this.size=h}v(_h,M);function Vi(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Ni(){this.g=!0}Ni.prototype.xa=function(){this.g=!1};function yy(o,h,m,E,K,ne){o.info(function(){if(o.g)if(ne)for(var be="",dt=ne.split("&"),tn=0;tn<dt.length;tn++){var it=dt[tn].split("=");if(1<it.length){var ln=it[0];it=it[1];var un=ln.split("_");be=2<=un.length&&un[1]=="type"?be+(ln+"="+it+"&"):be+(ln+"=redacted&")}}else be=null;else be=ne;return"XMLHTTP REQ ("+E+") [attempt "+K+"]: "+h+`
`+m+`
`+be})}function _y(o,h,m,E,K,ne,be){o.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+K+"]: "+h+`
`+m+`
`+ne+" "+be})}function Us(o,h,m,E){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+by(o,m)+(E?" "+E:"")})}function wy(o,h){o.info(function(){return"TIMEOUT: "+h})}Ni.prototype.info=function(){};function by(o,h){if(!o.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(o=0;o<m.length;o++)if(Array.isArray(m[o])){var E=m[o];if(!(2>E.length)){var K=E[1];if(Array.isArray(K)&&!(1>K.length)){var ne=K[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var be=1;be<K.length;be++)K[be]=""}}}}return cs(m)}catch{return h}}var Qa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Il;function Ja(){}v(Ja,Z),Ja.prototype.g=function(){return new XMLHttpRequest},Ja.prototype.i=function(){return{}},Il=new Ja;function Cr(o,h,m,E){this.j=o,this.i=h,this.l=m,this.R=E||1,this.U=new Mn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bh}function bh(){this.i=null,this.g="",this.h=!1}var Th={},Cl={};function xl(o,h,m){o.L=1,o.v=to(hr(h)),o.m=m,o.P=!0,Ph(o,null)}function Ph(o,h){o.F=Date.now(),Xa(o),o.A=hr(o.v);var m=o.A,E=o.R;Array.isArray(E)||(E=[String(E)]),$h(m.i,"t",E),o.C=0,m=o.j.J,o.h=new bh,o.g=td(o.j,m?h:null,!o.m),0<o.O&&(o.M=new cr(g(o.Y,o,o.g),o.O)),h=o.U,m=o.g,E=o.ca;var K="readystatechange";Array.isArray(K)||(K&&(Ir[0]=K.toString()),K=Ir);for(var ne=0;ne<K.length;ne++){var be=me(m,K[ne],E||h.handleEvent,!1,h.h||h);if(!be)break;h.g[be.key]=be}h=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),Pn(),yy(o.i,o.u,o.A,o.l,o.R,o.m)}Cr.prototype.ca=function(o){o=o.target;const h=this.M;h&&dr(o)==3?h.j():this.Y(o)},Cr.prototype.Y=function(o){try{if(o==this.g)e:{const un=dr(this.g);var h=this.g.Ba();const zs=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||zh(this.g)))){this.J||un!=4||h==7||(h==8||0>=zs?Pn(3):Pn(2)),Ml(this);var m=this.g.Z();this.X=m;t:if(Eh(this)){var E=zh(this.g);o="";var K=E.length,ne=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hs(this),$i(this);var be="";break t}this.h.i=new l.TextDecoder}for(h=0;h<K;h++)this.h.h=!0,o+=this.h.i.decode(E[h],{stream:!(ne&&h==K-1)});E.length=0,this.h.g+=o,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=m==200,_y(this.i,this.u,this.A,this.l,this.R,un,m),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,tn=this.g;if((dt=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(dt)){var it=dt;break t}}it=null}if(m=it)Us(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dl(this,m);else{this.o=!1,this.s=3,en(12),hs(this),$i(this);break e}}if(this.P){m=!0;let Bn;for(;!this.J&&this.C<be.length;)if(Bn=Ty(this,be),Bn==Cl){un==4&&(this.s=4,en(14),m=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Th){this.s=4,en(15),Us(this.i,this.l,be,"[Invalid Chunk]"),m=!1;break}else Us(this.i,this.l,Bn,null),Dl(this,Bn);if(Eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||be.length!=0||this.h.h||(this.s=1,en(16),m=!1),this.o=this.o&&m,!m)Us(this.i,this.l,be,"[Invalid Chunked Response]"),hs(this),$i(this);else if(0<be.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Ll(ln),ln.M=!0,en(11))}}else Us(this.i,this.l,be,null),Dl(this,be);un==4&&hs(this),this.o&&!this.J&&(un==4?Jh(this.j,this):(this.o=!1,Xa(this)))}else Ly(this.g),m==400&&0<be.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),hs(this),$i(this)}}}catch{}finally{}};function Eh(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Ty(o,h){var m=o.C,E=h.indexOf(`
`,m);return E==-1?Cl:(m=Number(h.substring(m,E)),isNaN(m)?Th:(E+=1,E+m>h.length?Cl:(h=h.slice(E,E+m),o.C=E+m,h)))}Cr.prototype.cancel=function(){this.J=!0,hs(this)};function Xa(o){o.S=Date.now()+o.I,Ah(o,o.I)}function Ah(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Vi(g(o.ba,o),h)}function Ml(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Cr.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(wy(this.i,this.A),this.L!=2&&(Pn(),en(17)),hs(this),this.s=2,$i(this)):Ah(this,this.S-o)};function $i(o){o.j.G==0||o.J||Jh(o.j,o)}function hs(o){Ml(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,Ls(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function Dl(o,h){try{var m=o.j;if(m.G!=0&&(m.g==o||Ol(m.h,o))){if(!o.K&&Ol(m.h,o)&&m.G==3){try{var E=m.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var K=E;if(K[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<o.F)oo(m),io(m);else break e;Fl(m),en(18)}}else m.za=K[1],0<m.za-m.T&&37500>K[2]&&m.F&&m.v==0&&!m.C&&(m.C=Vi(g(m.Za,m),6e3));if(1>=Rh(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else fs(m,11)}else if((o.K||m.g==o)&&oo(m),!q(h))for(K=m.Da.g.parse(h),h=0;h<K.length;h++){let it=K[h];if(m.T=it[0],it=it[1],m.G==2)if(it[0]=="c"){m.K=it[1],m.ia=it[2];const ln=it[3];ln!=null&&(m.la=ln,m.j.info("VER="+m.la));const un=it[4];un!=null&&(m.Aa=un,m.j.info("SVER="+m.Aa));const zs=it[5];zs!=null&&typeof zs=="number"&&0<zs&&(E=1.5*zs,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const Bn=o.g;if(Bn){const uo=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uo){var ne=E.h;ne.g||uo.indexOf("spdy")==-1&&uo.indexOf("quic")==-1&&uo.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Vl(ne,ne.h),ne.h=null))}if(E.D){const Bl=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bl&&(E.ya=Bl,_t(E.I,E.D,Bl))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-o.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var be=o;if(E.qa=ed(E,E.J?E.ia:null,E.W),be.K){Ih(E.h,be);var dt=be,tn=E.L;tn&&(dt.I=tn),dt.B&&(Ml(dt),Xa(dt)),E.g=be}else Gh(E);0<m.i.length&&ao(m)}else it[0]!="stop"&&it[0]!="close"||fs(m,7);else m.G==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?fs(m,7):$l(m):it[0]!="noop"&&m.l&&m.l.ta(it),m.v=0)}}Pn(4)}catch{}}var Py=class{constructor(o,h){this.g=o,this.map=h}};function kh(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sh(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Rh(o){return o.h?1:o.g?o.g.size:0}function Ol(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Vl(o,h){o.g?o.g.add(h):o.h=h}function Ih(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}kh.prototype.cancel=function(){if(this.i=Ch(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ch(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const m of o.g.values())h=h.concat(m.D);return h}return A(o.i)}function Ey(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var h=[],m=o.length,E=0;E<m;E++)h.push(o[E]);return h}h=[],m=0;for(E in o)h[m++]=o[E];return h}function Ay(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var h=[];o=o.length;for(var m=0;m<o;m++)h.push(m);return h}h=[],m=0;for(const E in o)h[m++]=E;return h}}}function xh(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var m=Ay(o),E=Ey(o),K=E.length,ne=0;ne<K;ne++)h.call(void 0,E[ne],m&&m[ne],o)}var Mh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ky(o,h){if(o){o=o.split("&");for(var m=0;m<o.length;m++){var E=o[m].indexOf("="),K=null;if(0<=E){var ne=o[m].substring(0,E);K=o[m].substring(E+1)}else ne=o[m];h(ne,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ds(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ds){this.h=o.h,Za(this,o.j),this.o=o.o,this.g=o.g,eo(this,o.s),this.l=o.l;var h=o.i,m=new Bi;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Dh(this,m),this.m=o.m}else o&&(h=String(o).match(Mh))?(this.h=!1,Za(this,h[1]||"",!0),this.o=Fi(h[2]||""),this.g=Fi(h[3]||"",!0),eo(this,h[4]),this.l=Fi(h[5]||"",!0),Dh(this,h[6]||"",!0),this.m=Fi(h[7]||"")):(this.h=!1,this.i=new Bi(null,this.h))}ds.prototype.toString=function(){var o=[],h=this.j;h&&o.push(Li(h,Oh,!0),":");var m=this.g;return(m||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Li(h,Oh,!0),"@"),o.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&o.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&o.push("/"),o.push(Li(m,m.charAt(0)=="/"?Iy:Ry,!0))),(m=this.i.toString())&&o.push("?",m),(m=this.m)&&o.push("#",Li(m,xy)),o.join("")};function hr(o){return new ds(o)}function Za(o,h,m){o.j=m?Fi(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function eo(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function Dh(o,h,m){h instanceof Bi?(o.i=h,My(o.i,o.h)):(m||(h=Li(h,Cy)),o.i=new Bi(h,o.h))}function _t(o,h,m){o.i.set(h,m)}function to(o){return _t(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Fi(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Li(o,h,m){return typeof o=="string"?(o=encodeURI(o).replace(h,Sy),m&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Sy(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Oh=/[#\/\?@]/g,Ry=/[#\?:]/g,Iy=/[#\?]/g,Cy=/[#\?@]/g,xy=/#/g;function Bi(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function xr(o){o.g||(o.g=new Map,o.h=0,o.i&&ky(o.i,function(h,m){o.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}n=Bi.prototype,n.add=function(o,h){xr(this),this.i=null,o=qs(this,o);var m=this.g.get(o);return m||this.g.set(o,m=[]),m.push(h),this.h+=1,this};function Vh(o,h){xr(o),h=qs(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Nh(o,h){return xr(o),h=qs(o,h),o.g.has(h)}n.forEach=function(o,h){xr(this),this.g.forEach(function(m,E){m.forEach(function(K){o.call(h,K,E,this)},this)},this)},n.na=function(){xr(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let E=0;E<h.length;E++){const K=o[E];for(let ne=0;ne<K.length;ne++)m.push(h[E])}return m},n.V=function(o){xr(this);let h=[];if(typeof o=="string")Nh(this,o)&&(h=h.concat(this.g.get(qs(this,o))));else{o=Array.from(this.g.values());for(let m=0;m<o.length;m++)h=h.concat(o[m])}return h},n.set=function(o,h){return xr(this),this.i=null,o=qs(this,o),Nh(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},n.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function $h(o,h,m){Vh(o,h),0<m.length&&(o.i=null,o.g.set(qs(o,h),A(m)),o.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var E=h[m];const ne=encodeURIComponent(String(E)),be=this.V(E);for(E=0;E<be.length;E++){var K=ne;be[E]!==""&&(K+="="+encodeURIComponent(String(be[E]))),o.push(K)}}return this.i=o.join("&")};function qs(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function My(o,h){h&&!o.j&&(xr(o),o.i=null,o.g.forEach(function(m,E){var K=E.toLowerCase();E!=K&&(Vh(this,E),$h(this,K,m))},o)),o.j=h}function Dy(o,h){const m=new Ni;if(l.Image){const E=new Image;E.onload=b(Mr,m,"TestLoadImage: loaded",!0,h,E),E.onerror=b(Mr,m,"TestLoadImage: error",!1,h,E),E.onabort=b(Mr,m,"TestLoadImage: abort",!1,h,E),E.ontimeout=b(Mr,m,"TestLoadImage: timeout",!1,h,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=o}else h(!1)}function Oy(o,h){const m=new Ni,E=new AbortController,K=setTimeout(()=>{E.abort(),Mr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:E.signal}).then(ne=>{clearTimeout(K),ne.ok?Mr(m,"TestPingServer: ok",!0,h):Mr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(K),Mr(m,"TestPingServer: error",!1,h)})}function Mr(o,h,m,E,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),E(m)}catch{}}function Vy(){this.g=new Oi}function Ny(o,h,m){const E=m||"";try{xh(o,function(K,ne){let be=K;c(K)&&(be=cs(K)),h.push(E+ne+"="+encodeURIComponent(be))})}catch(K){throw h.push(E+"type="+encodeURIComponent("_badmap")),K}}function no(o){this.l=o.Ub||null,this.j=o.eb||!1}v(no,Z),no.prototype.g=function(){return new ro(this.l,this.j)},no.prototype.i=function(o){return function(){return o}}({});function ro(o,h){Ke.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(ro,Ke),n=ro.prototype,n.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,qi(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ui(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fh(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fh(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Ui(this):qi(this),this.readyState==3&&Fh(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Ui(this))},n.Qa=function(o){this.g&&(this.response=o,Ui(this))},n.ga=function(){this.g&&Ui(this)};function Ui(o){o.readyState=4,o.l=null,o.j=null,o.v=null,qi(o)}n.setRequestHeader=function(o,h){this.u.append(o,h)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,o.push(m[0]+": "+m[1]),m=h.next();return o.join(`\r
`)};function qi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Lh(o){let h="";return J(o,function(m,E){h+=E,h+=":",h+=m,h+=`\r
`}),h}function Nl(o,h,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=Lh(m),typeof o=="string"?m!=null&&encodeURIComponent(String(m)):_t(o,h,m))}function Ct(o){Ke.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ct,Ke);var $y=/^https?$/i,Fy=["POST","PUT"];n=Ct.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,h,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Il.g(),this.v=this.o?_e(this.o):_e(Il),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(ne){Bh(this,ne);return}if(o=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var K in E)m.set(K,E[K]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const ne of E.keys())m.set(ne,E.get(ne));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(ne=>ne.toLowerCase()=="content-type"),K=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Fy,h,void 0))||E||K||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,be]of m)this.g.setRequestHeader(ne,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jh(this),this.u=!0,this.g.send(o),this.u=!1}catch(ne){Bh(this,ne)}};function Bh(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Uh(o),so(o)}function Uh(o){o.A||(o.A=!0,ct(o,"complete"),ct(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ct(this,"complete"),ct(this,"abort"),so(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),so(this,!0)),Ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qh(this):this.bb())},n.bb=function(){qh(this)};function qh(o){if(o.h&&typeof a<"u"&&(!o.v[1]||dr(o)!=4||o.Z()!=2)){if(o.u&&dr(o)==4)Pt(o.Ea,0,o);else if(ct(o,"readystatechange"),dr(o)==4){o.h=!1;try{const be=o.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var E;if(E=be===0){var K=String(o.D).match(Mh)[1]||null;!K&&l.self&&l.self.location&&(K=l.self.location.protocol.slice(0,-1)),E=!$y.test(K?K.toLowerCase():"")}m=E}if(m)ct(o,"complete"),ct(o,"success");else{o.m=6;try{var ne=2<dr(o)?o.g.statusText:""}catch{ne=""}o.l=ne+" ["+o.Z()+"]",Uh(o)}}finally{so(o)}}}}function so(o,h){if(o.g){jh(o);const m=o.g,E=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||ct(o,"ready");try{m.onreadystatechange=E}catch{}}}function jh(o){o.I&&(l.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function dr(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),Di(h)}};function zh(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ly(o){const h={};o=(o.g&&2<=dr(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<o.length;E++){if(q(o[E]))continue;var m=I(o[E]);const K=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const ne=h[K]||[];h[K]=ne,ne.push(m)}k(h,function(E){return E.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(o,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[o]||h}function Yh(o){this.Aa=0,this.i=[],this.j=new Ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ji("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ji("baseRetryDelayMs",5e3,o),this.cb=ji("retryDelaySeedMs",1e4,o),this.Wa=ji("forwardChannelMaxRetries",2,o),this.wa=ji("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new kh(o&&o.concurrentRequestLimit),this.Da=new Vy,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Yh.prototype,n.la=8,n.G=1,n.connect=function(o,h,m,E){en(0),this.W=o,this.H=h||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=ed(this,null,this.W),ao(this)};function $l(o){if(Hh(o),o.G==3){var h=o.U++,m=hr(o.I);if(_t(m,"SID",o.K),_t(m,"RID",h),_t(m,"TYPE","terminate"),zi(o,m),h=new Cr(o,o.j,h),h.L=2,h.v=to(hr(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=td(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Xa(h)}Zh(o)}function io(o){o.g&&(Ll(o),o.g.cancel(),o.g=null)}function Hh(o){io(o),o.u&&(l.clearTimeout(o.u),o.u=null),oo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ao(o){if(!Sh(o.h)&&!o.s){o.s=!0;var h=o.Ga;z||R(),X||(z(),X=!0),H.add(h,o),o.B=0}}function By(o,h){return Rh(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Vi(g(o.Ga,o,h),Xh(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const K=new Cr(this,this.j,o);let ne=this.o;if(this.S&&(ne?(ne=y(ne),T(ne,this.S)):ne=this.S),this.m!==null||this.O||(K.H=ne,ne=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Kh(this,K,h),m=hr(this.I),_t(m,"RID",o),_t(m,"CVER",22),this.D&&_t(m,"X-HTTP-Session-Id",this.D),zi(this,m),ne&&(this.O?h="headers="+encodeURIComponent(String(Lh(ne)))+"&"+h:this.m&&Nl(m,this.m,ne)),Vl(this.h,K),this.Ua&&_t(m,"TYPE","init"),this.P?(_t(m,"$req",h),_t(m,"SID","null"),K.T=!0,xl(K,m,null)):xl(K,m,h),this.G=2}}else this.G==3&&(o?Wh(this,o):this.i.length==0||Sh(this.h)||Wh(this))};function Wh(o,h){var m;h?m=h.l:m=o.U++;const E=hr(o.I);_t(E,"SID",o.K),_t(E,"RID",m),_t(E,"AID",o.T),zi(o,E),o.m&&o.o&&Nl(E,o.m,o.o),m=new Cr(o,o.j,m,o.B+1),o.m===null&&(m.H=o.o),h&&(o.i=h.D.concat(o.i)),h=Kh(o,m,1e3),m.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Vl(o.h,m),xl(m,E,h)}function zi(o,h){o.H&&J(o.H,function(m,E){_t(h,E,m)}),o.l&&xh({},function(m,E){_t(h,E,m)})}function Kh(o,h,m){m=Math.min(o.i.length,m);var E=o.l?g(o.l.Na,o.l,o):null;e:{var K=o.i;let ne=-1;for(;;){const be=["count="+m];ne==-1?0<m?(ne=K[0].g,be.push("ofs="+ne)):ne=0:be.push("ofs="+ne);let dt=!0;for(let tn=0;tn<m;tn++){let it=K[tn].g;const ln=K[tn].map;if(it-=ne,0>it)ne=Math.max(0,K[tn].g-100),dt=!1;else try{Ny(ln,be,"req"+it+"_")}catch{E&&E(ln)}}if(dt){E=be.join("&");break e}}}return o=o.i.splice(0,m),h.D=o,E}function Gh(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;z||R(),X||(z(),X=!0),H.add(h,o),o.v=0}}function Fl(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Vi(g(o.Fa,o),Xh(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Qh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Vi(g(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),io(this),Qh(this))};function Ll(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Qh(o){o.g=new Cr(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=hr(o.qa);_t(h,"RID","rpc"),_t(h,"SID",o.K),_t(h,"AID",o.T),_t(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&_t(h,"TO",o.ja),_t(h,"TYPE","xmlhttp"),zi(o,h),o.m&&o.o&&Nl(h,o.m,o.o),o.L&&(o.g.I=o.L);var m=o.g;o=o.ia,m.L=1,m.v=to(hr(h)),m.m=null,m.P=!0,Ph(m,o)}n.Za=function(){this.C!=null&&(this.C=null,io(this),Fl(this),en(19))};function oo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Jh(o,h){var m=null;if(o.g==h){oo(o),Ll(o),o.g=null;var E=2}else if(Ol(o.h,h))m=h.D,Ih(o.h,h),E=1;else return;if(o.G!=0){if(h.o)if(E==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var K=o.B;E=_n(),ct(E,new _h(E,m)),ao(o)}else Gh(o);else if(K=h.s,K==3||K==0&&0<h.X||!(E==1&&By(o,h)||E==2&&Fl(o)))switch(m&&0<m.length&&(h=o.h,h.i=h.i.concat(m)),K){case 1:fs(o,5);break;case 4:fs(o,10);break;case 3:fs(o,6);break;default:fs(o,2)}}}function Xh(o,h){let m=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(m*=2),m*h}function fs(o,h){if(o.j.info("Error code "+h),h==2){var m=g(o.fb,o),E=o.Xa;const K=!E;E=new ds(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Za(E,"https"),to(E),K?Dy(E.toString(),m):Oy(E.toString(),m)}else en(2);o.G=0,o.l&&o.l.sa(h),Zh(o),Hh(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function Zh(o){if(o.G=0,o.ka=[],o.l){const h=Ch(o.h);(h.length!=0||o.i.length!=0)&&(S(o.ka,h),S(o.ka,o.i),o.h.i.length=0,A(o.i),o.i.length=0),o.l.ra()}}function ed(o,h,m){var E=m instanceof ds?hr(m):new ds(m);if(E.g!="")h&&(E.g=h+"."+E.g),eo(E,E.s);else{var K=l.location;E=K.protocol,h=h?h+"."+K.hostname:K.hostname,K=+K.port;var ne=new ds(null);E&&Za(ne,E),h&&(ne.g=h),K&&eo(ne,K),m&&(ne.l=m),E=ne}return m=o.D,h=o.ya,m&&h&&_t(E,m,h),_t(E,"VER",o.la),zi(o,E),E}function td(o,h,m){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new Ct(new no({eb:m})):new Ct(o.pa),h.Ha(o.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nd(){}n=nd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lo(){}lo.prototype.g=function(o,h){return new In(o,h)};function In(o,h){Ke.call(this),this.g=new Yh(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!q(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new js(this)}v(In,Ke),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){$l(this.g)},In.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var m={};m.__data__=o,o=m}else this.u&&(m={},m.__data__=cs(o),o=m);h.i.push(new Py(h.Ya++,o)),h.G==3&&ao(h)},In.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,In.aa.N.call(this)};function rd(o){ue.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const m in h){o=m;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}v(rd,ue);function sd(){Te.call(this),this.status=1}v(sd,Te);function js(o){this.g=o}v(js,nd),js.prototype.ua=function(){ct(this.g,"a")},js.prototype.ta=function(o){ct(this.g,new rd(o))},js.prototype.sa=function(o){ct(this.g,new sd)},js.prototype.ra=function(){ct(this.g,"b")},lo.prototype.createWebChannel=lo.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,Kg=function(){return new lo},Wg=function(){return _n()},Hg=Ie,Wu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,Ao=Qa,wh.COMPLETE="complete",Yg=wh,Oe.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,ta=Oe,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,zg=Ct}).apply(typeof go<"u"?go:typeof self<"u"?self:typeof window<"u"?window:{});const Bf="@firebase/firestore",Uf="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new $g("@firebase/firestore");function Xs(){return ks.logLevel}function Re(n,...t){if(ks.logLevel<=rt.DEBUG){const e=t.map(zc);ks.debug(`Firestore (${Ii}): ${n}`,...e)}}function Pr(n,...t){if(ks.logLevel<=rt.ERROR){const e=t.map(zc);ks.error(`Firestore (${Ii}): ${n}`,...e)}}function gi(n,...t){if(ks.logLevel<=rt.WARN){const e=t.map(zc);ks.warn(`Firestore (${Ii}): ${n}`,...e)}}function zc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n="Unexpected state"){const t=`FIRESTORE (${Ii}) INTERNAL ASSERTION FAILED: `+n;throw Pr(t),new Error(t)}function ot(n,t){n||qe()}function We(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Ri{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class QI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(fn.UNAUTHENTICATED))}shutdown(){}}class JI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class XI{constructor(t){this.t=t,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ot(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,e(u)):Promise.resolve();let i=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Kr,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;t.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Kr)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot(typeof r.accessToken=="string"),new Gg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ot(t===null||typeof t=="string"),new fn(t)}}class ZI{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class e2{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new ZI(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qf{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t2{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,DI(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){ot(this.o===void 0);const r=i=>{i.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new qf(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ot(typeof e.token=="string"),this.R=e.token,new qf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=n2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<e&&(r+=t.charAt(s[i]%62))}return r}}function Ge(n,t){return n<t?-1:n>t?1:0}function Ku(n,t){let e=0;for(;e<n.length&&e<t.length;){const r=n.codePointAt(e),s=t.codePointAt(e);if(r!==s){if(r<128&&s<128)return Ge(r,s);{const i=Qg(),a=r2(i.encode(jf(n,e)),i.encode(jf(t,e)));return a!==0?a:Ge(r,s)}}e+=r>65535?2:1}return Ge(n.length,t.length)}function jf(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function r2(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Ge(n[e],t[e]);return Ge(n.length,t.length)}function vi(n,t,e){return n.length===t.length&&n.every((r,s)=>e(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=-62135596800,Yf=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(t){return Yt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*Yf);return new Yt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<zf)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yf}_compareTo(t){return this.seconds===t.seconds?Ge(this.nanoseconds,t.nanoseconds):Ge(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-zf;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(t){return new Ye(t)}static min(){return new Ye(new Yt(0,0))}static max(){return new Ye(new Yt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="__name__";class Zn{constructor(t,e,r){e===void 0?e=0:e>t.length&&qe(),r===void 0?r=t.length-e:r>t.length-e&&qe(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Zn.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Zn?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let s=0;s<r;s++){const i=Zn.compareSegments(t.get(s),e.get(s));if(i!==0)return i}return Ge(t.length,e.length)}static compareSegments(t,e){const r=Zn.isNumericId(t),s=Zn.isNumericId(e);return r&&!s?-1:!r&&s?1:r&&s?Zn.extractNumericId(t).compare(Zn.extractNumericId(e)):Ku(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Wr.fromString(t.substring(4,t.length-2))}}class Et extends Zn{construct(t,e,r){return new Et(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(s=>s.length>0))}return new Et(e)}static emptyPath(){return new Et([])}}const s2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Zn{construct(t,e,r){return new rn(t,e,r)}static isValidIdentifier(t){return s2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hf}static keyField(){return new rn([Hf])}static fromServerFormat(t){const e=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new Ne(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ne(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Ne(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new rn(e)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.path=t}static fromPath(t){return new Le(Et.fromString(t))}static fromName(t){return new Le(Et.fromString(t).popFirst(5))}static empty(){return new Le(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Et.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Et.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Le(new Et(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=-1;function i2(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ye.fromTimestamp(r===1e9?new Yt(e+1,0):new Yt(e,r));return new ts(s,Le.empty(),t)}function a2(n){return new ts(n.readTime,n.key,Na)}class ts{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new ts(Ye.min(),Le.empty(),Na)}static max(){return new ts(Ye.max(),Le.empty(),Na)}}function o2(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Le.comparator(n.documentKey,t.documentKey),e!==0?e:Ge(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==l2)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ce((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(e,i).next(r,s)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof ce?e:ce.resolve(e)}catch(e){return ce.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):ce.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):ce.reject(e)}static resolve(t){return new ce((e,r)=>{e(t)})}static reject(t){return new ce((e,r)=>{r(t)})}static waitFor(t){return new ce((e,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&e()},u=>r(u))}),a=!0,i===s&&e()})}static or(t){let e=ce.resolve(!1);for(const r of t)e=e.next(s=>s?ce.resolve(s):r());return e}static forEach(t,e){const r=[];return t.forEach((s,i)=>{r.push(e.call(this,s,i))}),this.waitFor(r)}static mapArray(t,e){return new ce((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const c=u;e(t[c]).next(d=>{a[c]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,e){return new ce((r,s)=>{const i=()=>{t()===!0?e().next(()=>{i()},s):r()};i()})}}function c2(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function xi(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.oe(r),this._e=r=>e.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}pl.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=-1;function gl(n){return n==null}function Yo(n){return n===0&&1/n==-1/0}function h2(n){return typeof n=="number"&&Number.isInteger(n)&&!Yo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="";function d2(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Wf(t)),t=f2(n.get(e),t);return Wf(t)}function f2(n,t){let e=t;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":e+="";break;case Xg:e+="";break;default:e+=i}}return e}function Wf(n){return n+Xg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Vs(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Zg(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(t,e){this.comparator=t,this.root=e||nn.EMPTY}insert(t,e){return new It(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(t){return new It(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return e+r.left.size;s<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vo(this.root,t,this.comparator,!1)}getReverseIterator(){return new vo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vo(this.root,t,this.comparator,!0)}}class vo{constructor(t,e,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?r(t.key,e):1,e&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class nn{constructor(t,e,r,s,i){this.key=t,this.value=e,this.color=r??nn.RED,this.left=s??nn.EMPTY,this.right=i??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,s,i){return new nn(t??this.key,e??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,e,r),null):i===0?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),e(t,s.key)===0){if(s.right.isEmpty())return nn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw qe();const t=this.left.check();if(t!==this.right.check())throw qe();return t+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe()}get value(){throw qe()}get color(){throw qe()}get left(){throw qe()}get right(){throw qe()}copy(t,e,r,s,i){return this}insert(t,e,r){return new nn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new It(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Gf(this.data.getIterator())}getIteratorFrom(t){return new Gf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const s=e.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ht(this.comparator);return e.data=t,e}}class Gf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this.fields=t,t.sort(rn.comparator)}static empty(){return new Yn([])}unionWith(t){let e=new Ht(rn.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Yn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return vi(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ev("Invalid base64 string: "+i):i}}(t);return new an(e)}static fromUint8Array(t){const e=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new an(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ge(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}an.EMPTY_BYTE_STRING=new an("");const m2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(n){if(ot(!!n),typeof n=="string"){let t=0;const e=m2.exec(n);if(ot(!!e),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Nt(n.seconds),nanos:Nt(n.nanos)}}function Nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rs(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="server_timestamp",nv="__type__",rv="__previous_value__",sv="__local_write_time__";function Hc(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[nv])===null||e===void 0?void 0:e.stringValue)===tv}function vl(n){const t=n.mapValue.fields[rv];return Hc(t)?vl(t):t}function $a(n){const t=ns(n.mapValue.fields[sv].timestampValue);return new Yt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(t,e,r,s,i,a,l,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const Ho="(default)";class Fa{constructor(t,e){this.projectId=t,this.database=e||Ho}static empty(){return new Fa("","")}get isDefaultDatabase(){return this.database===Ho}isEqual(t){return t instanceof Fa&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="__type__",g2="__max__",yo={mapValue:{}},av="__vector__",Wo="value";function ss(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hc(n)?4:y2(n)?9007199254740991:v2(n)?10:11:qe()}function or(n,t){if(n===t)return!0;const e=ss(n);if(e!==ss(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return $a(n).isEqual($a(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ns(s.timestampValue),l=ns(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(s,i){return rs(s.bytesValue).isEqual(rs(i.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(s,i){return Nt(s.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)}(n,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Nt(s.integerValue)===Nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Nt(s.doubleValue),l=Nt(i.doubleValue);return a===l?Yo(a)===Yo(l):isNaN(a)&&isNaN(l)}return!1}(n,t);case 9:return vi(n.arrayValue.values||[],t.arrayValue.values||[],or);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Kf(a)!==Kf(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!or(a[u],l[u])))return!1;return!0}(n,t);default:return qe()}}function La(n,t){return(n.values||[]).find(e=>or(e,t))!==void 0}function yi(n,t){if(n===t)return 0;const e=ss(n),r=ss(t);if(e!==r)return Ge(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Nt(i.integerValue||i.doubleValue),u=Nt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,t);case 3:return Qf(n.timestampValue,t.timestampValue);case 4:return Qf($a(n),$a(t));case 5:return Ku(n.stringValue,t.stringValue);case 6:return function(i,a){const l=rs(i),u=rs(a);return l.compareTo(u)}(n.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=Ge(l[c],u[c]);if(d!==0)return d}return Ge(l.length,u.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,a){const l=Ge(Nt(i.latitude),Nt(a.latitude));return l!==0?l:Ge(Nt(i.longitude),Nt(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Jf(n.arrayValue,t.arrayValue);case 10:return function(i,a){var l,u,c,d;const f=i.fields||{},g=a.fields||{},b=(l=f[Wo])===null||l===void 0?void 0:l.arrayValue,v=(u=g[Wo])===null||u===void 0?void 0:u.arrayValue,A=Ge(((c=b==null?void 0:b.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:Jf(b,v)}(n.mapValue,t.mapValue);case 11:return function(i,a){if(i===yo.mapValue&&a===yo.mapValue)return 0;if(i===yo.mapValue)return 1;if(a===yo.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),c=a.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){const g=Ku(u[f],d[f]);if(g!==0)return g;const b=yi(l[u[f]],c[d[f]]);if(b!==0)return b}return Ge(u.length,d.length)}(n.mapValue,t.mapValue);default:throw qe()}}function Qf(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Ge(n,t);const e=ns(n),r=ns(t),s=Ge(e.seconds,r.seconds);return s!==0?s:Ge(e.nanos,r.nanos)}function Jf(n,t){const e=n.values||[],r=t.values||[];for(let s=0;s<e.length&&s<r.length;++s){const i=yi(e[s],r[s]);if(i)return i}return Ge(e.length,r.length)}function _i(n){return Gu(n)}function Gu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=ns(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return rs(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Le.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",s=!0;for(const i of e.values||[])s?s=!1:r+=",",r+=Gu(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Gu(e.fields[a])}`;return s+"}"}(n.mapValue):qe()}function ko(n){switch(ss(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=vl(n);return t?16+ko(t):16;case 5:return 2*n.stringValue.length;case 6:return rs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ko(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Vs(r.fields,(i,a)=>{s+=i.length+ko(a)}),s}(n.mapValue);default:throw qe()}}function Qu(n){return!!n&&"integerValue"in n}function Wc(n){return!!n&&"arrayValue"in n}function Xf(n){return!!n&&"nullValue"in n}function Zf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function So(n){return!!n&&"mapValue"in n}function v2(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[iv])===null||e===void 0?void 0:e.stringValue)===av}function fa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Vs(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=fa(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=fa(n.arrayValue.values[e]);return t}return Object.assign({},n)}function y2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===g2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t){this.value=t}static empty(){return new Nn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!So(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=fa(e)}setAll(t){let e=rn.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,r,s),r={},s=[],e=l.popLast()}a?r[l.lastSegment()]=fa(a):s.push(l.lastSegment())});const i=this.getFieldsMap(e);this.applyChanges(i,r,s)}delete(t){const e=this.field(t.popLast());So(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return or(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=e.mapValue.fields[t.get(r)];So(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,r){Vs(e,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Nn(fa(this.value))}}function ov(n){const t=[];return Vs(n.fields,(e,r)=>{const s=new rn([e]);if(So(r)){const i=ov(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)}),new Yn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t,e,r,s,i,a,l){this.key=t,this.documentType=e,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new pn(t,0,Ye.min(),Ye.min(),Ye.min(),Nn.empty(),0)}static newFoundDocument(t,e,r,s){return new pn(t,1,e,Ye.min(),r,s,0)}static newNoDocument(t,e){return new pn(t,2,e,Ye.min(),Ye.min(),Nn.empty(),0)}static newUnknownDocument(t,e){return new pn(t,3,e,Ye.min(),Ye.min(),Nn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t,e){this.position=t,this.inclusive=e}}function em(n,t,e){let r=0;for(let s=0;s<n.position.length;s++){const i=t[s],a=n.position[s];if(i.field.isKeyField()?r=Le.comparator(Le.fromName(a.referenceValue),e.key):r=yi(a,e.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function tm(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!or(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,e="asc"){this.field=t,this.dir=e}}function _2(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{}class jt extends lv{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new b2(t,e,r):e==="array-contains"?new E2(t,r):e==="in"?new A2(t,r):e==="not-in"?new k2(t,r):e==="array-contains-any"?new S2(t,r):new jt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new T2(t,r):new P2(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(yi(e,this.value)):e!==null&&ss(this.value)===ss(e)&&this.matchesComparison(yi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lr extends lv{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new lr(t,e)}matches(t){return uv(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function uv(n){return n.op==="and"}function cv(n){return w2(n)&&uv(n)}function w2(n){for(const t of n.filters)if(t instanceof lr)return!1;return!0}function Ju(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+_i(n.value);if(cv(n))return n.filters.map(t=>Ju(t)).join(",");{const t=n.filters.map(e=>Ju(e)).join(",");return`${n.op}(${t})`}}function hv(n,t){return n instanceof jt?function(r,s){return s instanceof jt&&r.op===s.op&&r.field.isEqual(s.field)&&or(r.value,s.value)}(n,t):n instanceof lr?function(r,s){return s instanceof lr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&hv(a,s.filters[l]),!0):!1}(n,t):void qe()}function dv(n){return n instanceof jt?function(e){return`${e.field.canonicalString()} ${e.op} ${_i(e.value)}`}(n):n instanceof lr?function(e){return e.op.toString()+" {"+e.getFilters().map(dv).join(" ,")+"}"}(n):"Filter"}class b2 extends jt{constructor(t,e,r){super(t,e,r),this.key=Le.fromName(r.referenceValue)}matches(t){const e=Le.comparator(t.key,this.key);return this.matchesComparison(e)}}class T2 extends jt{constructor(t,e){super(t,"in",e),this.keys=fv("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class P2 extends jt{constructor(t,e){super(t,"not-in",e),this.keys=fv("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function fv(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>Le.fromName(r.referenceValue))}class E2 extends jt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Wc(e)&&La(e.arrayValue,this.value)}}class A2 extends jt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&La(this.value.arrayValue,e)}}class k2 extends jt{constructor(t,e){super(t,"not-in",e)}matches(t){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!La(this.value.arrayValue,e)}}class S2 extends jt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Wc(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>La(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t,e=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.le=null}}function nm(n,t=null,e=[],r=[],s=null,i=null,a=null){return new R2(n,t,e,r,s,i,a)}function Kc(n){const t=We(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>Ju(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),gl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>_i(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>_i(r)).join(",")),t.le=e}return t.le}function Gc(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!_2(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!hv(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!tm(n.startAt,t.startAt)&&tm(n.endAt,t.endAt)}function Xu(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t,e=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function I2(n,t,e,r,s,i,a,l){return new yl(n,t,e,r,s,i,a,l)}function mv(n){return new yl(n)}function rm(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function C2(n){return n.collectionGroup!==null}function ma(n){const t=We(n);if(t.he===null){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ht(rn.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(t).forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.he.push(new Go(i,r))}),e.has(rn.keyField().canonicalString())||t.he.push(new Go(rn.keyField(),r))}return t.he}function sr(n){const t=We(n);return t.Pe||(t.Pe=x2(t,ma(n))),t.Pe}function x2(n,t){if(n.limitType==="F")return nm(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Go(s.field,i)});const e=n.endAt?new Ko(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ko(n.startAt.position,n.startAt.inclusive):null;return nm(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Zu(n,t,e){return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function _l(n,t){return Gc(sr(n),sr(t))&&n.limitType===t.limitType}function pv(n){return`${Kc(sr(n))}|lt:${n.limitType}`}function Zs(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(s=>dv(s)).join(", ")}]`),gl(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>_i(s)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>_i(s)).join(",")),`Target(${r})`}(sr(n))}; limitType=${n.limitType})`}function wl(n,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Le.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,t)&&function(r,s){for(const i of ma(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,t)&&function(r,s){return!(r.startAt&&!function(a,l,u){const c=em(a,l,u);return a.inclusive?c<=0:c<0}(r.startAt,ma(r),s)||r.endAt&&!function(a,l,u){const c=em(a,l,u);return a.inclusive?c>=0:c>0}(r.endAt,ma(r),s))}(n,t)}function M2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gv(n){return(t,e)=>{let r=!1;for(const s of ma(n)){const i=D2(s,t,e);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function D2(n,t,e){const r=n.field.isKeyField()?Le.comparator(t.key,e.key):function(i,a,l){const u=a.data.field(i),c=l.data.field(i);return u!==null&&c!==null?yi(u,c):qe()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return qe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[e]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Vs(this.inner,(e,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Zg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new It(Le.comparator);function Er(){return O2}const vv=new It(Le.comparator);function na(...n){let t=vv;for(const e of n)t=t.insert(e.key,e);return t}function yv(n){let t=vv;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function _s(){return pa()}function _v(){return pa()}function pa(){return new Ns(n=>n.toString(),(n,t)=>n.isEqual(t))}const V2=new It(Le.comparator),N2=new Ht(Le.comparator);function Ze(...n){let t=N2;for(const e of n)t=t.add(e);return t}const $2=new Ht(Ge);function F2(){return $2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yo(t)?"-0":t}}function wv(n){return{integerValue:""+n}}function L2(n,t){return h2(t)?wv(t):Qc(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this._=void 0}}function B2(n,t,e){return n instanceof Qo?function(s,i){const a={fields:{[nv]:{stringValue:tv},[sv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hc(i)&&(i=vl(i)),i&&(a.fields[rv]=i),{mapValue:a}}(e,t):n instanceof Ba?Tv(n,t):n instanceof Ua?Pv(n,t):function(s,i){const a=bv(s,i),l=sm(a)+sm(s.Ie);return Qu(a)&&Qu(s.Ie)?wv(l):Qc(s.serializer,l)}(n,t)}function U2(n,t,e){return n instanceof Ba?Tv(n,t):n instanceof Ua?Pv(n,t):e}function bv(n,t){return n instanceof Jo?function(r){return Qu(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Qo extends bl{}class Ba extends bl{constructor(t){super(),this.elements=t}}function Tv(n,t){const e=Ev(t);for(const r of n.elements)e.some(s=>or(s,r))||e.push(r);return{arrayValue:{values:e}}}class Ua extends bl{constructor(t){super(),this.elements=t}}function Pv(n,t){let e=Ev(t);for(const r of n.elements)e=e.filter(s=>!or(s,r));return{arrayValue:{values:e}}}class Jo extends bl{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function sm(n){return Nt(n.integerValue||n.doubleValue)}function Ev(n){return Wc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function q2(n,t){return n.field.isEqual(t.field)&&function(r,s){return r instanceof Ba&&s instanceof Ba||r instanceof Ua&&s instanceof Ua?vi(r.elements,s.elements,or):r instanceof Jo&&s instanceof Jo?or(r.Ie,s.Ie):r instanceof Qo&&s instanceof Qo}(n.transform,t.transform)}class j2{constructor(t,e){this.version=t,this.transformResults=e}}class wr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new wr}static exists(t){return new wr(void 0,t)}static updateTime(t){return new wr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ro(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Tl{}function Av(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Sv(n.key,wr.none()):new Ha(n.key,n.data,wr.none());{const e=n.data,r=Nn.empty();let s=new Ht(rn.comparator);for(let i of t.fields)if(!s.has(i)){let a=e.field(i);a===null&&i.length>1&&(i=i.popLast(),a=e.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new $s(n.key,r,new Yn(s.toArray()),wr.none())}}function z2(n,t,e){n instanceof Ha?function(s,i,a){const l=s.value.clone(),u=am(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):n instanceof $s?function(s,i,a){if(!Ro(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=am(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(kv(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,t,e):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function ga(n,t,e,r){return n instanceof Ha?function(i,a,l,u){if(!Ro(i.precondition,a))return l;const c=i.value.clone(),d=om(i.fieldTransforms,u,a);return c.setAll(d),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(n,t,e,r):n instanceof $s?function(i,a,l,u){if(!Ro(i.precondition,a))return l;const c=om(i.fieldTransforms,u,a),d=a.data;return d.setAll(kv(i)),d.setAll(c),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(n,t,e,r):function(i,a,l){return Ro(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,t,e)}function Y2(n,t){let e=null;for(const r of n.fieldTransforms){const s=t.data.field(r.field),i=bv(r.transform,s||null);i!=null&&(e===null&&(e=Nn.empty()),e.set(r.field,i))}return e||null}function im(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vi(r,s,(i,a)=>q2(i,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Ha extends Tl{constructor(t,e,r,s=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $s extends Tl{constructor(t,e,r,s,i=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kv(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function am(n,t,e){const r=new Map;ot(n.length===e.length);for(let s=0;s<e.length;s++){const i=n[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,U2(a,l,e[s]))}return r}function om(n,t,e){const r=new Map;for(const s of n){const i=s.transform,a=e.data.field(s.field);r.set(s.field,B2(i,a,t))}return r}class Sv extends Tl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H2 extends Tl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t,e,r,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&z2(i,t,r[s])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=ga(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=ga(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=_v();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=e.has(s.key)?null:l;const u=Av(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Ye.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ze())}isEqual(t){return this.batchId===t.batchId&&vi(this.mutations,t.mutations,(e,r)=>im(e,r))&&vi(this.baseMutations,t.baseMutations,(e,r)=>im(e,r))}}class Jc{constructor(t,e,r,s){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=s}static from(t,e,r){ot(t.mutations.length===r.length);let s=function(){return V2}();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Jc(t,e,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,nt;function Q2(n){switch(n){case pe.OK:return qe();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return qe()}}function Rv(n){if(n===void 0)return Pr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Bt.OK:return pe.OK;case Bt.CANCELLED:return pe.CANCELLED;case Bt.UNKNOWN:return pe.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return pe.INTERNAL;case Bt.UNAVAILABLE:return pe.UNAVAILABLE;case Bt.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Bt.NOT_FOUND:return pe.NOT_FOUND;case Bt.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Bt.ABORTED:return pe.ABORTED;case Bt.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Bt.DATA_LOSS:return pe.DATA_LOSS;default:return qe()}}(nt=Bt||(Bt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Wr([4294967295,4294967295],0);function lm(n){const t=Qg().encode(n),e=new jg;return e.update(t),new Uint8Array(e.digest())}function um(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Wr([e,r],0),new Wr([s,i],0)]}class Xc{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new ra(`Invalid padding: ${e}`);if(r<0)throw new ra(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new ra(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Wr.fromNumber(this.Ee)}Ae(t,e,r){let s=t.add(e.multiply(Wr.fromNumber(r)));return s.compare(J2)===1&&(s=new Wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=lm(t),[r,s]=um(e);for(let i=0;i<this.hashCount;i++){const a=this.Ae(r,s,i);if(!this.Re(a))return!1}return!0}static create(t,e,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Xc(i,s,e);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.Ee===0)return;const e=lm(t),[r,s]=um(e);for(let i=0;i<this.hashCount;i++){const a=this.Ae(r,s,i);this.Ve(a)}}Ve(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(t,e,r,s,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const s=new Map;return s.set(t,Wa.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Pl(Ye.min(),s,new It(Ge),Er(),Ze())}}class Wa{constructor(t,e,r,s,i){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Wa(r,e,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t,e,r,s){this.me=t,this.removedTargetIds=e,this.key=r,this.fe=s}}class Iv{constructor(t,e){this.targetId=t,this.ge=e}}class Cv{constructor(t,e,r=an.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=s}}class cm{constructor(){this.pe=0,this.ye=hm(),this.we=an.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Ze(),e=Ze(),r=Ze();return this.ye.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:r=r.add(s);break;default:qe()}}),new Wa(this.we,this.Se,t,e,r)}Me(){this.be=!1,this.ye=hm()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,ot(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class X2{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Er(),this.$e=_o(),this.Ue=_o(),this.Ke=new It(Ge)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const r=this.He(e);switch(t.state){case 0:this.Je(e)&&r.Ce(t.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(t.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(e);break;case 3:this.Je(e)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),r.Ce(t.resumeToken));break;default:qe()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((r,s)=>{this.Je(s)&&e(s)})}Ze(t){const e=t.targetId,r=t.ge.count,s=this.Xe(e);if(s){const i=s.target;if(Xu(i))if(r===0){const a=new Le(i.path);this.ze(e,a,pn.newNoDocument(a,Ye.min()))}else ot(r===1);else{const a=this.et(e);if(a!==r){const l=this.tt(t),u=l?this.nt(l,t,a):1;if(u!==0){this.Ye(e);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,c)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=e;let a,l;try{a=rs(r).toUint8Array()}catch(u){if(u instanceof ev)return gi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Xc(a,s,i)}catch(u){return gi(u instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(t,e,r){return e.ge.count===r-this.st(t,e.targetId)?0:2}st(t,e){const r=this.ke.getRemoteKeysForTarget(e);let s=0;return r.forEach(i=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.ze(e,i,null),s++)}),s}ot(t){const e=new Map;this.qe.forEach((i,a)=>{const l=this.Xe(a);if(l){if(i.current&&Xu(l.target)){const u=new Le(l.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,pn.newNoDocument(u,t))}i.ve&&(e.set(a,i.Fe()),i.Me())}});let r=Ze();this.Ue.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.Qe.forEach((i,a)=>a.setReadTime(t));const s=new Pl(t,e,this.Ke,this.Qe,r);return this.Qe=Er(),this.$e=_o(),this.Ue=_o(),this.Ke=new It(Ge),s}Ge(t,e){if(!this.Je(t))return;const r=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,r),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ue=this.Ue.insert(e.key,this.ct(e.key).add(t))}ze(t,e,r){if(!this.Je(t))return;const s=this.He(t);this.ut(t,e)?s.xe(e,1):s.Oe(e),this.Ue=this.Ue.insert(e,this.ct(e).delete(t)),this.Ue=this.Ue.insert(e,this.ct(e).add(t)),r&&(this.Qe=this.Qe.insert(e,r))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new cm,this.qe.set(t,e)),e}ct(t){let e=this.Ue.get(t);return e||(e=new Ht(Ge),this.Ue=this.Ue.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Ht(Ge),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||Re("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new cm),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function _o(){return new It(Le.comparator)}function hm(){return new It(Le.comparator)}const Z2={asc:"ASCENDING",desc:"DESCENDING"},eC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tC={and:"AND",or:"OR"};class nC{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ec(n,t){return n.useProto3Json||gl(t)?t:{value:t}}function Xo(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xv(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function rC(n,t){return Xo(n,t.toTimestamp())}function ir(n){return ot(!!n),Ye.fromTimestamp(function(e){const r=ns(e);return new Yt(r.seconds,r.nanos)}(n))}function Zc(n,t){return tc(n,t).canonicalString()}function tc(n,t){const e=function(s){return new Et(["projects",s.projectId,"databases",s.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Mv(n){const t=Et.fromString(n);return ot($v(t)),t}function nc(n,t){return Zc(n.databaseId,t.path)}function vu(n,t){const e=Mv(t);if(e.get(1)!==n.databaseId.projectId)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ne(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Le(Ov(e))}function Dv(n,t){return Zc(n.databaseId,t)}function sC(n){const t=Mv(n);return t.length===4?Et.emptyPath():Ov(t)}function rc(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ov(n){return ot(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function dm(n,t,e){return{name:nc(n,t),fields:e.value.mapValue.fields}}function iC(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:qe()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(ot(d===void 0||typeof d=="string"),an.fromBase64String(d||"")):(ot(d===void 0||d instanceof Buffer||d instanceof Uint8Array),an.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(c){const d=c.code===void 0?pe.UNKNOWN:Rv(c.code);return new Ne(d,c.message||"")}(a);e=new Cv(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=vu(n,r.document.name),i=ir(r.document.updateTime),a=r.document.createTime?ir(r.document.createTime):Ye.min(),l=new Nn({mapValue:{fields:r.document.fields}}),u=pn.newFoundDocument(s,i,a,l),c=r.targetIds||[],d=r.removedTargetIds||[];e=new Io(c,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=vu(n,r.document),i=r.readTime?ir(r.readTime):Ye.min(),a=pn.newNoDocument(s,i),l=r.removedTargetIds||[];e=new Io([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=vu(n,r.document),i=r.removedTargetIds||[];e=new Io([],i,s,null)}else{if(!("filter"in t))return qe();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new G2(s,i),l=r.targetId;e=new Iv(l,a)}}return e}function aC(n,t){let e;if(t instanceof Ha)e={update:dm(n,t.key,t.value)};else if(t instanceof Sv)e={delete:nc(n,t.key)};else if(t instanceof $s)e={update:dm(n,t.key,t.data),updateMask:pC(t.fieldMask)};else{if(!(t instanceof H2))return qe();e={verify:nc(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Qo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ba)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ua)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jo)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw qe()}(0,r))),t.precondition.isNone||(e.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:qe()}(n,t.precondition)),e}function oC(n,t){return n&&n.length>0?(ot(t!==void 0),n.map(e=>function(s,i){let a=s.updateTime?ir(s.updateTime):ir(i);return a.isEqual(Ye.min())&&(a=ir(i)),new j2(a,s.transformResults||[])}(e,t))):[]}function lC(n,t){return{documents:[Dv(n,t.path)]}}function uC(n,t){const e={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=Dv(n,s);const i=function(c){if(c.length!==0)return Nv(lr.create(c,"and"))}(t.filters);i&&(e.structuredQuery.where=i);const a=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:ei(g.field),direction:dC(g.dir)}}(d))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const l=ec(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:e,parent:s}}function cC(n){let t=sC(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let s=null;if(r>0){ot(r===1);const d=e.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];e.where&&(i=function(f){const g=Vv(f);return g instanceof lr&&cv(g)?g.getFilters():[g]}(e.where));let a=[];e.orderBy&&(a=function(f){return f.map(g=>function(v){return new Go(ti(v.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g))}(e.orderBy));let l=null;e.limit&&(l=function(f){let g;return g=typeof f=="object"?f.value:f,gl(g)?null:g}(e.limit));let u=null;e.startAt&&(u=function(f){const g=!!f.before,b=f.values||[];return new Ko(b,g)}(e.startAt));let c=null;return e.endAt&&(c=function(f){const g=!f.before,b=f.values||[];return new Ko(b,g)}(e.endAt)),I2(t,s,a,i,l,"F",u,c)}function hC(n,t){const e=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Vv(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=ti(e.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ti(e.unaryFilter.field);return jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ti(e.unaryFilter.field);return jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ti(e.unaryFilter.field);return jt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return qe()}}(n):n.fieldFilter!==void 0?function(e){return jt.create(ti(e.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qe()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return lr.create(e.compositeFilter.filters.map(r=>Vv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return qe()}}(e.compositeFilter.op))}(n):qe()}function dC(n){return Z2[n]}function fC(n){return eC[n]}function mC(n){return tC[n]}function ei(n){return{fieldPath:n.canonicalString()}}function ti(n){return rn.fromServerFormat(n.fieldPath)}function Nv(n){return n instanceof jt?function(e){if(e.op==="=="){if(Zf(e.value))return{unaryFilter:{field:ei(e.field),op:"IS_NAN"}};if(Xf(e.value))return{unaryFilter:{field:ei(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Zf(e.value))return{unaryFilter:{field:ei(e.field),op:"IS_NOT_NAN"}};if(Xf(e.value))return{unaryFilter:{field:ei(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(e.field),op:fC(e.op),value:e.value}}}(n):n instanceof lr?function(e){const r=e.getFilters().map(s=>Nv(s));return r.length===1?r[0]:{compositeFilter:{op:mC(e.op),filters:r}}}(n):qe()}function pC(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function $v(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,e,r,s,i=Ye.min(),a=Ye.min(),l=an.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Lr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(t){this.Tt=t}}function vC(n){const t=cC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zu(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.Tn=new _C}addToCollectionParentIndex(t,e){return this.Tn.add(e),ce.resolve()}getCollectionParents(t,e){return ce.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return ce.resolve()}deleteFieldIndex(t,e){return ce.resolve()}deleteAllFieldIndexes(t){return ce.resolve()}createTargetIndexes(t,e){return ce.resolve()}getDocumentsMatchingTarget(t,e){return ce.resolve(null)}getIndexType(t,e){return ce.resolve(0)}getFieldIndexes(t,e){return ce.resolve([])}getNextCollectionGroupToUpdate(t){return ce.resolve(null)}getMinOffset(t,e){return ce.resolve(ts.min())}getMinOffsetFromCollectionGroup(t,e){return ce.resolve(ts.min())}updateCollectionGroup(t,e,r){return ce.resolve()}updateIndexEntries(t,e){return ce.resolve()}}class _C{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),s=this.index[e]||new Ht(Et.comparator),i=!s.has(r);return this.index[e]=s.add(r),i}has(t){const e=t.lastSegment(),r=t.popLast(),s=this.index[e];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ht(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fv=41943040;class An{static withCacheSize(t){return new An(t,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(Fv,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new wi(0)}static Kn(){return new wi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="LruGarbageCollector",wC=1048576;function pm([n,t],[e,r]){const s=Ge(n,e);return s===0?Ge(t,r):s}class bC{constructor(t){this.Hn=t,this.buffer=new Ht(pm),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();pm(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class TC{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Re(mm,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){xi(e)?Re(mm,"Ignoring IndexedDB error during garbage collection: ",e):await Ci(e)}await this.er(3e5)})}}class PC{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return ce.resolve(pl.ae);const r=new bC(e);return this.tr.forEachTarget(t,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(t,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.tr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(fm)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fm):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let r,s,i,a,l,u,c;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(t,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(t,r,e))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(c=Date.now(),Xs()<=rt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function EC(n,t){return new PC(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.changes=new Ns(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,pn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?ce.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(t,e,r,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,e))).next(s=>(r!==null&&ga(r.mutation,s,Yn.empty(),Yt.now()),s))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Ze()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Ze()){const s=_s();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,r).next(i=>{let a=na();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const r=_s();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Ze()))}populateOverlays(t,e,r){const s=[];return r.forEach(i=>{e.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{e.set(a,l)})})}computeViews(t,e,r,s){let i=Er();const a=pa(),l=function(){return pa()}();return e.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof $s)?i=i.insert(c.key,c):d!==void 0?(a.set(c.key,d.mutation.getFieldMask()),ga(d.mutation,c,d.mutation.getFieldMask(),Yt.now())):a.set(c.key,Yn.empty())}),this.recalculateAndSaveOverlays(t,i).next(u=>(u.forEach((c,d)=>a.set(c,d)),e.forEach((c,d)=>{var f;return l.set(c,new kC(d,(f=a.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(t,e){const r=pa();let s=new It((a,l)=>a-l),i=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=e.get(u);if(c===null)return;let d=r.get(u)||Yn.empty();d=l.applyToLocalView(c,d),r.set(u,d);const f=(s.get(l.batchId)||Ze()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,f=_v();d.forEach(g=>{if(!i.has(g)){const b=Av(e.get(g),r.get(g));b!==null&&f.set(g,b),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(t,c,f))}return ce.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,s){return function(a){return Le.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):C2(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,s):this.getDocumentsMatchingCollectionQuery(t,e,r,s)}getNextDocuments(t,e,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,s-i.size):ce.resolve(_s());let l=Na,u=i;return a.next(c=>ce.forEach(c,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(d)?ce.resolve():this.remoteDocumentCache.getEntry(t,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,u,c,Ze())).next(d=>({batchId:l,changes:yv(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Le(e)).next(r=>{let s=na();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,e,r,s){const i=e.collectionGroup;let a=na();return this.indexManager.getCollectionParents(t,i).next(l=>ce.forEach(l,u=>{const c=function(f,g){return new yl(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(e,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,r,s).next(d=>{d.forEach((f,g)=>{a=a.insert(f,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,i,s))).next(a=>{i.forEach((u,c)=>{const d=c.getKey();a.get(d)===null&&(a=a.insert(d,pn.newInvalidDocument(d)))});let l=na();return a.forEach((u,c)=>{const d=i.get(u);d!==void 0&&ga(d.mutation,c,Yn.empty(),Yt.now()),wl(e,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return ce.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(s){return{id:s.id,version:s.version,createTime:ir(s.createTime)}}(e)),ce.resolve()}getNamedQuery(t,e){return ce.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(s){return{name:s.name,query:vC(s.bundledQuery),readTime:ir(s.readTime)}}(e)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.overlays=new It(Le.comparator),this.Rr=new Map}getOverlay(t,e){return ce.resolve(this.overlays.get(e))}getOverlays(t,e){const r=_s();return ce.forEach(e,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((s,i)=>{this.Et(t,e,i)}),ce.resolve()}removeOverlaysForBatchId(t,e,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(r)),ce.resolve()}getOverlaysForCollection(t,e,r){const s=_s(),i=e.length+1,a=new Le(e.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return ce.resolve(s)}getOverlaysForCollectionGroup(t,e,r,s){let i=new It((c,d)=>c-d);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=_s(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=_s(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return ce.resolve(l)}Et(t,e,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new K2(e,r));let i=this.Rr.get(e);i===void 0&&(i=Ze(),this.Rr.set(e,i)),this.Rr.set(e,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(t){return ce.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this.Vr=new Ht(Kt.mr),this.gr=new Ht(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const r=new Kt(t,e);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.wr(new Kt(t,e))}Sr(t,e){t.forEach(r=>this.removeReference(r,e))}br(t){const e=new Le(new Et([])),r=new Kt(e,t),s=new Kt(e,t+1),i=[];return this.gr.forEachInRange([r,s],a=>{this.wr(a),i.push(a.key)}),i}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new Le(new Et([])),r=new Kt(e,t),s=new Kt(e,t+1);let i=Ze();return this.gr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const e=new Kt(t,0),r=this.Vr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Kt{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return Le.comparator(t.key,e.key)||Ge(t.Cr,e.Cr)}static pr(t,e){return Ge(t.Cr,e.Cr)||Le.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Ht(Kt.mr)}checkEmpty(t){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new W2(i,e,r,s);this.mutationQueue.push(a);for(const l of s)this.Mr=this.Mr.add(new Kt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return ce.resolve(a)}lookupMutationBatch(t,e){return ce.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,s=this.Nr(r),i=s<0?0:s;return ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Yc:this.Fr-1)}getAllMutationBatches(t){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Kt(e,0),s=new Kt(e,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([r,s],a=>{const l=this.Or(a.Cr);i.push(l)}),ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Ht(Ge);return e.forEach(s=>{const i=new Kt(s,0),a=new Kt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,a],l=>{r=r.add(l.Cr)})}),ce.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,s=r.length+1;let i=r;Le.isDocumentKey(i)||(i=i.child(""));const a=new Kt(new Le(i),0);let l=new Ht(Ge);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Cr)),!0)},a),ce.resolve(this.Br(l))}Br(t){const e=[];return t.forEach(r=>{const s=this.Or(r);s!==null&&e.push(s)}),e}removeMutationBatch(t,e){ot(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ce.forEach(e.mutations,s=>{const i=new Kt(s.key,e.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Mr=r})}qn(t){}containsKey(t,e){const r=new Kt(e,0),s=this.Mr.firstAfterOrEqual(r);return ce.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,ce.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(t){this.kr=t,this.docs=function(){return new It(Le.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,s=this.docs.get(r),i=s?s.size:0,a=this.kr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return ce.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(e))}getEntries(t,e){let r=Er();return e.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pn.newInvalidDocument(s))}),ce.resolve(r)}getDocumentsMatchingQuery(t,e,r,s){let i=Er();const a=e.path,l=new Le(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||o2(a2(d),r)<=0||(s.has(d.key)||wl(e,d))&&(i=i.insert(d.key,d.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(t,e,r,s){qe()}qr(t,e){return ce.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new DC(this)}getSize(t){return ce.resolve(this.size)}}class DC extends AC{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?e.push(this.Ir.addEntry(t,s)):this.Ir.removeEntry(r)}),ce.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t){this.persistence=t,this.Qr=new Ns(e=>Kc(e),Gc),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.$r=0,this.Ur=new eh,this.targetCount=0,this.Kr=wi.Un()}forEachTarget(t,e){return this.Qr.forEach((r,s)=>e(s)),ce.resolve()}getLastRemoteSnapshotVersion(t){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ce.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$r&&(this.$r=e),ce.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Kr=new wi(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,ce.resolve()}updateTargetData(t,e){return this.zn(e),ce.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Ur.br(e.targetId),this.targetCount-=1,ce.resolve()}removeTargets(t,e,r){let s=0;const i=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.Qr.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),ce.waitFor(i).next(()=>s)}getTargetCount(t){return ce.resolve(this.targetCount)}getTargetData(t,e){const r=this.Qr.get(e)||null;return ce.resolve(r)}addMatchingKeys(t,e,r){return this.Ur.yr(e,r),ce.resolve()}removeMatchingKeys(t,e,r){this.Ur.Sr(e,r);const s=this.persistence.referenceDelegate,i=[];return s&&e.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),ce.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Ur.br(e),ce.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Ur.vr(e);return ce.resolve(r)}containsKey(t,e){return ce.resolve(this.Ur.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new pl(0),this.zr=!1,this.zr=!0,this.jr=new CC,this.referenceDelegate=t(this),this.Hr=new OC(this),this.indexManager=new yC,this.remoteDocumentCache=function(s){return new MC(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new gC(e),this.Yr=new RC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new IC,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Wr[t.toKey()];return r||(r=new xC(e,this.referenceDelegate),this.Wr[t.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,r){Re("MemoryPersistence","Starting transaction:",t);const s=new VC(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(i=>this.referenceDelegate.Xr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}ei(t,e){return ce.or(Object.values(this.Wr).map(r=>()=>r.containsKey(t,e)))}}class VC extends u2{constructor(t){super(),this.currentSequenceNumber=t}}class th{constructor(t){this.persistence=t,this.ti=new eh,this.ni=null}static ri(t){return new th(t)}get ii(){if(this.ni)return this.ni;throw qe()}addReference(t,e,r){return this.ti.addReference(r,e),this.ii.delete(r.toString()),ce.resolve()}removeReference(t,e,r){return this.ti.removeReference(r,e),this.ii.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),ce.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(i=>this.ii.add(i.toString()))}).next(()=>r.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.ii,r=>{const s=Le.fromPath(r);return this.si(t,s).next(i=>{i||e.removeEntry(s,Ye.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(r=>{r?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return ce.or([()=>ce.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class Zo{constructor(t,e){this.persistence=t,this.oi=new Ns(r=>d2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=EC(this,e)}static ri(t,e){return new Zo(t,e)}Zr(){}Xr(t){return ce.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(s=>r+s))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}rr(t,e){return ce.forEach(this.oi,(r,s)=>this.ar(t,r,s).next(i=>i?ce.resolve():e(s)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(t,a=>this.ar(t,a,e).next(l=>{l||(r++,i.removeEntry(a,Ye.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),ce.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),ce.resolve()}removeReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),ce.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),ce.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ko(t.data.value)),e}ar(t,e,r){return ce.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const s=this.oi.get(e);return ce.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,e,r,s){this.targetId=t,this.fromCache=e,this.Hi=r,this.Ji=s}static Yi(t,e){let r=Ze(),s=Ze();for(const i of e.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nh(t,e.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return CR()?8:c2(RR())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,r,s){const i={result:null};return this.rs(t,e).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ss(t,e,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new NC;return this._s(t,e,a).next(l=>{if(i.result=l,this.Xi)return this.us(t,e,a,l.size)})}).next(()=>i.result)}us(t,e,r,s){return r.documentReadCount<this.es?(Xs()<=rt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Zs(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ce.resolve()):(Xs()<=rt.DEBUG&&Re("QueryEngine","Query:",Zs(e),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Xs()<=rt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Zs(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,sr(e))):ce.resolve())}rs(t,e){if(rm(e))return ce.resolve(null);let r=sr(e);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(e.limit!==null&&s===1&&(e=Zu(e,null,"F"),r=sr(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=Ze(...i);return this.ns.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(u=>{const c=this.cs(e,l);return this.ls(e,c,a,u.readTime)?this.rs(t,Zu(e,null,"F")):this.hs(t,c,e,u)}))})))}ss(t,e,r,s){return rm(e)||s.isEqual(Ye.min())?ce.resolve(null):this.ns.getDocuments(t,r).next(i=>{const a=this.cs(e,i);return this.ls(e,a,r,s)?ce.resolve(null):(Xs()<=rt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zs(e)),this.hs(t,a,e,i2(s,Na)).next(l=>l))})}cs(t,e){let r=new Ht(gv(t));return e.forEach((s,i)=>{wl(t,i)&&(r=r.add(i))}),r}ls(t,e,r,s){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const i=t.limitType==="F"?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(t,e,r){return Xs()<=rt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Zs(e)),this.ns.getDocumentsMatchingQuery(t,e,ts.min(),r)}hs(t,e,r,s){return this.ns.getDocumentsMatchingQuery(t,r,s).next(i=>(e.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="LocalStore",FC=3e8;class LC{constructor(t,e,r,s){this.persistence=t,this.Ps=e,this.serializer=s,this.Ts=new It(Ge),this.Is=new Ns(i=>Kc(i),Gc),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new SC(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function BC(n,t,e,r){return new LC(n,t,e,r)}async function Bv(n,t){const e=We(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let s;return e.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,e.As(t),e.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=Ze();for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return e.localDocuments.getDocuments(r,u).next(c=>({Rs:c,removedBatchIds:a,addedBatchIds:l}))})})}function UC(n,t){const e=We(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=e.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const f=c.batch,g=f.keys();let b=ce.resolve();return g.forEach(v=>{b=b.next(()=>d.getEntry(u,v)).next(A=>{const S=c.docVersions.get(v);ot(S!==null),A.version.compareTo(S)<0&&(f.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),d.addEntry(A)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(e,r,t,i).next(()=>i.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Ze();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(t))).next(()=>e.localDocuments.getDocuments(r,s))})}function Uv(n){const t=We(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function qC(n,t){const e=We(n),r=t.snapshotVersion;let s=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=e.ds.newChangeBuffer({trackRemovals:!0});s=e.Ts;const l=[];t.targetChanges.forEach((d,f)=>{const g=s.get(f);if(!g)return;l.push(e.Hr.removeMatchingKeys(i,d.removedDocuments,f).next(()=>e.Hr.addMatchingKeys(i,d.addedDocuments,f)));let b=g.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(f)!==null?b=b.withResumeToken(an.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),s=s.insert(f,b),function(A,S,F){return A.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=FC?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,b,d)&&l.push(e.Hr.updateTargetData(i,b))});let u=Er(),c=Ze();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(jC(i,a,t.documentUpdates).next(d=>{u=d.Vs,c=d.fs})),!r.isEqual(Ye.min())){const d=e.Hr.getLastRemoteSnapshotVersion(i).next(f=>e.Hr.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return ce.waitFor(l).next(()=>a.apply(i)).next(()=>e.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(e.Ts=s,i))}function jC(n,t,e){let r=Ze(),s=Ze();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let a=Er();return e.forEach((l,u)=>{const c=i.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Ye.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):Re(rh,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Vs:a,fs:s}})}function zC(n,t){const e=We(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Yc),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function YC(n,t){const e=We(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return e.Hr.getTargetData(r,t).next(i=>i?(s=i,ce.resolve(s)):e.Hr.allocateTargetId(r).next(a=>(s=new Lr(t,a,"TargetPurposeListen",r.currentSequenceNumber),e.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=e.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(r.targetId,r),e.Is.set(t,r.targetId)),r})}async function sc(n,t,e){const r=We(n),s=r.Ts.get(t),i=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!xi(a))throw a;Re(rh,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ts=r.Ts.remove(t),r.Is.delete(s.target)}function gm(n,t,e){const r=We(n);let s=Ye.min(),i=Ze();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,d){const f=We(u),g=f.Is.get(d);return g!==void 0?ce.resolve(f.Ts.get(g)):f.Hr.getTargetData(c,d)}(r,a,sr(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(a,t,e?s:Ye.min(),e?i:Ze())).next(l=>(HC(r,M2(t),l),{documents:l,gs:i})))}function HC(n,t,e){let r=n.Es.get(t)||Ye.min();e.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.Es.set(t,r)}class vm{constructor(){this.activeTargetIds=F2()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class WC{constructor(){this.ho=new vm,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,r){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new vm,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="ConnectivityMonitor";class _m{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Re(ym,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Re(ym,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo=null;function ic(){return wo===null?wo=function(){return 268435456+Math.round(2147483648*Math.random())}():wo++,"0x"+wo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu="RestConnection",GC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QC{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Ho?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(t,e,r,s,i){const a=ic(),l=this.bo(t,e.toUriEncodedString());Re(yu,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,i),this.vo(t,l,u,r).then(c=>(Re(yu,`Received RPC '${t}' ${a}: `,c),c),c=>{throw gi(yu,`RPC '${t}' ${a} failed with error: `,c,"url: ",l,"request:",r),c})}Co(t,e,r,s,i,a){return this.So(t,e,r,s,i)}Do(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ii}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}bo(t,e){const r=GC[t];return`${this.po}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class XC extends QC{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,r,s){const i=ic();return new Promise((a,l)=>{const u=new zg;u.setWithCredentials(!0),u.listenOnce(Yg.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ao.NO_ERROR:const d=u.getResponseJson();Re(dn,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(d)),a(d);break;case Ao.TIMEOUT:Re(dn,`RPC '${t}' ${i} timed out`),l(new Ne(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Ao.HTTP_ERROR:const f=u.getStatus();if(Re(dn,`RPC '${t}' ${i} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const v=function(S){const F=S.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(F)>=0?F:pe.UNKNOWN}(b.status);l(new Ne(v,b.message))}else l(new Ne(pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ne(pe.UNAVAILABLE,"Connection failed."));break;default:qe()}}finally{Re(dn,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);Re(dn,`RPC '${t}' ${i} sending request:`,s),u.send(e,"POST",c,r,15)})}Wo(t,e,r){const s=ic(),i=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Kg(),l=Wg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,e,r),u.encodeInitMessageHeaders=!0;const d=i.join("");Re(dn,`Creating RPC '${t}' stream ${s}: ${d}`,u);const f=a.createWebChannel(d,u);let g=!1,b=!1;const v=new JC({Fo:S=>{b?Re(dn,`Not sending because RPC '${t}' stream ${s} is closed:`,S):(g||(Re(dn,`Opening RPC '${t}' stream ${s} transport.`),f.open(),g=!0),Re(dn,`RPC '${t}' stream ${s} sending:`,S),f.send(S))},Mo:()=>f.close()}),A=(S,F,q)=>{S.listen(F,B=>{try{q(B)}catch(Q){setTimeout(()=>{throw Q},0)}})};return A(f,ta.EventType.OPEN,()=>{b||(Re(dn,`RPC '${t}' stream ${s} transport opened.`),v.Qo())}),A(f,ta.EventType.CLOSE,()=>{b||(b=!0,Re(dn,`RPC '${t}' stream ${s} transport closed`),v.Uo())}),A(f,ta.EventType.ERROR,S=>{b||(b=!0,gi(dn,`RPC '${t}' stream ${s} transport errored:`,S),v.Uo(new Ne(pe.UNAVAILABLE,"The operation could not be completed")))}),A(f,ta.EventType.MESSAGE,S=>{var F;if(!b){const q=S.data[0];ot(!!q);const B=q,Q=(B==null?void 0:B.error)||((F=B[0])===null||F===void 0?void 0:F.error);if(Q){Re(dn,`RPC '${t}' stream ${s} received error:`,Q);const se=Q.status;let J=function(_){const T=Bt[_];if(T!==void 0)return Rv(T)}(se),k=Q.message;J===void 0&&(J=pe.INTERNAL,k="Unknown error status: "+se+" with message "+Q.message),b=!0,v.Uo(new Ne(J,k)),f.close()}else Re(dn,`RPC '${t}' stream ${s} received:`,q),v.Ko(q)}}),A(l,Hg.STAT_EVENT,S=>{S.stat===Wu.PROXY?Re(dn,`RPC '${t}' stream ${s} detected buffering proxy`):S.stat===Wu.NOPROXY&&Re(dn,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.$o()},0),v}}function _u(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(n){return new nC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t,e,r=1e3,s=1.5,i=6e4){this.Ti=t,this.timerId=e,this.Go=r,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,e-r);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="PersistentStream";class jv{constructor(t,e,r,s,i,a,l,u){this.Ti=t,this.n_=r,this.r_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new qv(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===pe.RESOURCE_EXHAUSTED?(Pr(e.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===e&&this.V_(r,s)},r=>{t(()=>{const s=new Ne(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(t,e){const r=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Re(wm,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(Re(wm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZC extends jv{constructor(t,e,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,s,a),this.serializer=i}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=iC(this.serializer,t),r=function(i){if(!("targetChange"in i))return Ye.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ye.min():a.readTime?ir(a.readTime):Ye.min()}(t);return this.listener.p_(e,r)}y_(t){const e={};e.database=rc(this.serializer),e.addTarget=function(i,a){let l;const u=a.target;if(l=Xu(u)?{documents:lC(i,u)}:{query:uC(i,u).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=xv(i,a.resumeToken);const c=ec(i,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ye.min())>0){l.readTime=Xo(i,a.snapshotVersion.toTimestamp());const c=ec(i,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,t);const r=hC(this.serializer,t);r&&(e.labels=r),this.I_(e)}w_(t){const e={};e.database=rc(this.serializer),e.removeTarget=t,this.I_(e)}}class ex extends jv{constructor(t,e,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,s,a),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return ot(!!t.streamToken),this.lastStreamToken=t.streamToken,ot(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){ot(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=oC(t.writeResults,t.commitTime),r=ir(t.commitTime);return this.listener.v_(r,e)}C_(){const t={};t.database=rc(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>aC(this.serializer,r))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{}class nx extends tx{constructor(t,e,r,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.So(t,tc(e,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(pe.UNKNOWN,i.toString())})}Co(t,e,r,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(t,tc(e,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(pe.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class rx{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Pr(e),this.N_=!1):Re("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="RemoteStore";class sx{constructor(t,e,r,s,i){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(a=>{r.enqueueAndForget(async()=>{Fs(this)&&(Re(Ss,"Restarting streams for network reachability change."),await async function(u){const c=We(u);c.W_.add(4),await Ka(c),c.j_.set("Unknown"),c.W_.delete(4),await Al(c)}(this))})}),this.j_=new rx(r,s)}}async function Al(n){if(Fs(n))for(const t of n.G_)await t(!0)}async function Ka(n){for(const t of n.G_)await t(!1)}function zv(n,t){const e=We(n);e.K_.has(t.targetId)||(e.K_.set(t.targetId,t),oh(e)?ah(e):Mi(e).c_()&&ih(e,t))}function sh(n,t){const e=We(n),r=Mi(e);e.K_.delete(t),r.c_()&&Yv(e,t),e.K_.size===0&&(r.c_()?r.P_():Fs(e)&&e.j_.set("Unknown"))}function ih(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ye.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Mi(n).y_(t)}function Yv(n,t){n.H_.Ne(t),Mi(n).w_(t)}function ah(n){n.H_=new X2({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.K_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),Mi(n).start(),n.j_.B_()}function oh(n){return Fs(n)&&!Mi(n).u_()&&n.K_.size>0}function Fs(n){return We(n).W_.size===0}function Hv(n){n.H_=void 0}async function ix(n){n.j_.set("Online")}async function ax(n){n.K_.forEach((t,e)=>{ih(n,t)})}async function ox(n,t){Hv(n),oh(n)?(n.j_.q_(t),ah(n)):n.j_.set("Unknown")}async function lx(n,t,e){if(n.j_.set("Online"),t instanceof Cv&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.K_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.K_.delete(l),s.H_.removeTarget(l))}(n,t)}catch(r){Re(Ss,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await el(n,r)}else if(t instanceof Io?n.H_.We(t):t instanceof Iv?n.H_.Ze(t):n.H_.je(t),!e.isEqual(Ye.min()))try{const r=await Uv(n.localStore);e.compareTo(r)>=0&&await function(i,a){const l=i.H_.ot(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.K_.get(c);d&&i.K_.set(c,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const d=i.K_.get(u);if(!d)return;i.K_.set(u,d.withResumeToken(an.EMPTY_BYTE_STRING,d.snapshotVersion)),Yv(i,u);const f=new Lr(d.target,u,c,d.sequenceNumber);ih(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(r){Re(Ss,"Failed to raise snapshot:",r),await el(n,r)}}async function el(n,t,e){if(!xi(t))throw t;n.W_.add(1),await Ka(n),n.j_.set("Offline"),e||(e=()=>Uv(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Re(Ss,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await Al(n)})}function Wv(n,t){return t().catch(e=>el(n,e,t))}async function kl(n){const t=We(n),e=is(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Yc;for(;ux(t);)try{const s=await zC(t.localStore,r);if(s===null){t.U_.length===0&&e.P_();break}r=s.batchId,cx(t,s)}catch(s){await el(t,s)}Kv(t)&&Gv(t)}function ux(n){return Fs(n)&&n.U_.length<10}function cx(n,t){n.U_.push(t);const e=is(n);e.c_()&&e.S_&&e.b_(t.mutations)}function Kv(n){return Fs(n)&&!is(n).u_()&&n.U_.length>0}function Gv(n){is(n).start()}async function hx(n){is(n).C_()}async function dx(n){const t=is(n);for(const e of n.U_)t.b_(e.mutations)}async function fx(n,t,e){const r=n.U_.shift(),s=Jc.from(r,t,e);await Wv(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await kl(n)}async function mx(n,t){t&&is(n).S_&&await async function(r,s){if(function(a){return Q2(a)&&a!==pe.ABORTED}(s.code)){const i=r.U_.shift();is(r).h_(),await Wv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await kl(r)}}(n,t),Kv(n)&&Gv(n)}async function bm(n,t){const e=We(n);e.asyncQueue.verifyOperationInProgress(),Re(Ss,"RemoteStore received new credentials");const r=Fs(e);e.W_.add(3),await Ka(e),r&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Al(e)}async function px(n,t){const e=We(n);t?(e.W_.delete(2),await Al(e)):t||(e.W_.add(2),await Ka(e),e.j_.set("Unknown"))}function Mi(n){return n.J_||(n.J_=function(e,r,s){const i=We(e);return i.M_(),new ZC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{xo:ix.bind(null,n),No:ax.bind(null,n),Lo:ox.bind(null,n),p_:lx.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),oh(n)?ah(n):n.j_.set("Unknown")):(await n.J_.stop(),Hv(n))})),n.J_}function is(n){return n.Y_||(n.Y_=function(e,r,s){const i=We(e);return i.M_(),new ex(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:hx.bind(null,n),Lo:mx.bind(null,n),D_:dx.bind(null,n),v_:fx.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await kl(n)):(await n.Y_.stop(),n.U_.length>0&&(Re(Ss,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t,e,r,s,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,s,i){const a=Date.now()+r,l=new lh(t,e,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uh(n,t){if(Pr("AsyncQueue",`${t}: ${n}`),xi(n))return new Ne(pe.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{static emptySet(t){return new oi(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||Le.comparator(e.key,r.key):(e,r)=>Le.comparator(e.key,r.key),this.keyedMap=na(),this.sortedSet=new It(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof oi)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const s=e.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new oi;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this.Z_=new It(Le.comparator)}track(t){const e=t.doc.key,r=this.Z_.get(e);r?t.type!==0&&r.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&r.type!==1?this.Z_=this.Z_.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Z_=this.Z_.remove(e):t.type===1&&r.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):qe():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,r)=>{t.push(r)}),t}}class bi{constructor(t,e,r,s,i,a,l,u,c){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,e,r,s,i){const a=[];return e.forEach(l=>{a.push({type:0,doc:l})}),new bi(t,e,oi.emptySet(e),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_l(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==r[s].type||!e[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class vx{constructor(){this.queries=Pm(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,r){const s=We(e),i=s.queries;s.queries=Pm(),i.forEach((a,l)=>{for(const u of l.ta)u.onError(r)})})(this,new Ne(pe.ABORTED,"Firestore shutting down"))}}function Pm(){return new Ns(n=>pv(n),_l)}async function yx(n,t){const e=We(n);let r=3;const s=t.query;let i=e.queries.get(s);i?!i.na()&&t.ra()&&(r=2):(i=new gx,r=t.ra()?0:1);try{switch(r){case 0:i.ea=await e.onListen(s,!0);break;case 1:i.ea=await e.onListen(s,!1);break;case 2:await e.onFirstRemoteStoreListen(s)}}catch(a){const l=uh(a,`Initialization of query '${Zs(t.query)}' failed`);return void t.onError(l)}e.queries.set(s,i),i.ta.push(t),t.sa(e.onlineState),i.ea&&t.oa(i.ea)&&ch(e)}async function _x(n,t){const e=We(n),r=t.query;let s=3;const i=e.queries.get(r);if(i){const a=i.ta.indexOf(t);a>=0&&(i.ta.splice(a,1),i.ta.length===0?s=t.ra()?0:1:!i.na()&&t.ra()&&(s=2))}switch(s){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function wx(n,t){const e=We(n);let r=!1;for(const s of t){const i=s.query,a=e.queries.get(i);if(a){for(const l of a.ta)l.oa(s)&&(r=!0);a.ea=s}}r&&ch(e)}function bx(n,t,e){const r=We(n),s=r.queries.get(t);if(s)for(const i of s.ta)i.onError(e);r.queries.delete(t)}function ch(n){n.ia.forEach(t=>{t.next()})}var ac,Em;(Em=ac||(ac={}))._a="default",Em.Cache="cache";class Tx{constructor(t,e,r){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new bi(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const r=e!=="Offline";return(!this.options.Ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=bi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==ac.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(t){this.key=t}}class Jv{constructor(t){this.key=t}}class Px{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ze(),this.mutatedKeys=Ze(),this.ya=gv(t),this.wa=new oi(this.ya)}get Sa(){return this.fa}ba(t,e){const r=e?e.Da:new Tm,s=e?e.wa:this.wa;let i=e?e.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,f)=>{const g=s.get(d),b=wl(this.query,f)?f:null,v=!!g&&this.mutatedKeys.has(g.key),A=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let S=!1;g&&b?g.data.isEqual(b.data)?v!==A&&(r.track({type:3,doc:b}),S=!0):this.va(g,b)||(r.track({type:2,doc:b}),S=!0,(u&&this.ya(b,u)>0||c&&this.ya(b,c)<0)&&(l=!0)):!g&&b?(r.track({type:0,doc:b}),S=!0):g&&!b&&(r.track({type:1,doc:g}),S=!0,(u||c)&&(l=!0)),S&&(b?(a=a.add(b),i=A?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{wa:a,Da:r,ls:l,mutatedKeys:i}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,s){const i=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const a=t.Da.X_();a.sort((d,f)=>function(b,v){const A=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe()}};return A(b)-A(v)}(d.type,f.type)||this.ya(d.doc,f.doc)),this.Ca(r),s=s!=null&&s;const l=e&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,c=u!==this.ga;return this.ga=u,a.length!==0||c?{snapshot:new bi(this.query,t.wa,i,a,t.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Tm,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Ze(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const e=[];return t.forEach(r=>{this.pa.has(r)||e.push(new Jv(r))}),this.pa.forEach(r=>{t.has(r)||e.push(new Qv(r))}),e}Oa(t){this.fa=t.gs,this.pa=Ze();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return bi.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const hh="SyncEngine";class Ex{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Ax{constructor(t){this.key=t,this.Ba=!1}}class kx{constructor(t,e,r,s,i,a){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Ns(l=>pv(l),_l),this.qa=new Map,this.Qa=new Set,this.$a=new It(Le.comparator),this.Ua=new Map,this.Ka=new eh,this.Wa={},this.Ga=new Map,this.za=wi.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Sx(n,t,e=!0){const r=ry(n);let s;const i=r.ka.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await Xv(r,t,e,!0),s}async function Rx(n,t){const e=ry(n);await Xv(e,t,!0,!1)}async function Xv(n,t,e,r){const s=await YC(n.localStore,sr(t)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,e);let l;return r&&(l=await Ix(n,t,i,a==="current",s.resumeToken)),n.isPrimaryClient&&e&&zv(n.remoteStore,s),l}async function Ix(n,t,e,r,s){n.Ha=(f,g,b)=>async function(A,S,F,q){let B=S.view.ba(F);B.ls&&(B=await gm(A.localStore,S.query,!1).then(({documents:k})=>S.view.ba(k,B)));const Q=q&&q.targetChanges.get(S.targetId),se=q&&q.targetMismatches.get(S.targetId)!=null,J=S.view.applyChanges(B,A.isPrimaryClient,Q,se);return km(A,S.targetId,J.Ma),J.snapshot}(n,f,g,b);const i=await gm(n.localStore,t,!0),a=new Px(t,i.gs),l=a.ba(i.documents),u=Wa.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",s),c=a.applyChanges(l,n.isPrimaryClient,u);km(n,e,c.Ma);const d=new Ex(t,e,a);return n.ka.set(t,d),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),c.snapshot}async function Cx(n,t,e){const r=We(n),s=r.ka.get(t),i=r.qa.get(s.targetId);if(i.length>1)return r.qa.set(s.targetId,i.filter(a=>!_l(a,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),e&&sh(r.remoteStore,s.targetId),oc(r,s.targetId)}).catch(Ci)):(oc(r,s.targetId),await sc(r.localStore,s.targetId,!0))}async function xx(n,t){const e=We(n),r=e.ka.get(t),s=e.qa.get(r.targetId);e.isPrimaryClient&&s.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),sh(e.remoteStore,r.targetId))}async function Mx(n,t,e){const r=Lx(n);try{const s=await function(a,l){const u=We(a),c=Yt.now(),d=l.reduce((b,v)=>b.add(v.key),Ze());let f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let v=Er(),A=Ze();return u.ds.getEntries(b,d).next(S=>{v=S,v.forEach((F,q)=>{q.isValidDocument()||(A=A.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,v)).next(S=>{f=S;const F=[];for(const q of l){const B=Y2(q,f.get(q.key).overlayedDocument);B!=null&&F.push(new $s(q.key,B,ov(B.value.mapValue),wr.exists(!0)))}return u.mutationQueue.addMutationBatch(b,c,F,l)}).next(S=>{g=S;const F=S.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(b,S.batchId,F)})}).then(()=>({batchId:g.batchId,changes:yv(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.Wa[a.currentUser.toKey()];c||(c=new It(Ge)),c=c.insert(l,u),a.Wa[a.currentUser.toKey()]=c}(r,s.batchId,e),await Ga(r,s.changes),await kl(r.remoteStore)}catch(s){const i=uh(s,"Failed to persist write");e.reject(i)}}async function Zv(n,t){const e=We(n);try{const r=await qC(e.localStore,t);t.targetChanges.forEach((s,i)=>{const a=e.Ua.get(i);a&&(ot(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?ot(a.Ba):s.removedDocuments.size>0&&(ot(a.Ba),a.Ba=!1))}),await Ga(e,r,t)}catch(r){await Ci(r)}}function Am(n,t,e){const r=We(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const s=[];r.ka.forEach((i,a)=>{const l=a.view.sa(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=We(a);u.onlineState=l;let c=!1;u.queries.forEach((d,f)=>{for(const g of f.ta)g.sa(l)&&(c=!0)}),c&&ch(u)}(r.eventManager,t),s.length&&r.La.p_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dx(n,t,e){const r=We(n);r.sharedClientState.updateQueryState(t,"rejected",e);const s=r.Ua.get(t),i=s&&s.key;if(i){let a=new It(Le.comparator);a=a.insert(i,pn.newNoDocument(i,Ye.min()));const l=Ze().add(i),u=new Pl(Ye.min(),new Map,new It(Ge),a,l);await Zv(r,u),r.$a=r.$a.remove(i),r.Ua.delete(t),dh(r)}else await sc(r.localStore,t,!1).then(()=>oc(r,t,e)).catch(Ci)}async function Ox(n,t){const e=We(n),r=t.batch.batchId;try{const s=await UC(e.localStore,t);ty(e,r,null),ey(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Ga(e,s)}catch(s){await Ci(s)}}async function Vx(n,t,e){const r=We(n);try{const s=await function(a,l){const u=We(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(ot(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,t);ty(r,t,e),ey(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Ga(r,s)}catch(s){await Ci(s)}}function ey(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function ty(n,t,e){const r=We(n);let s=r.Wa[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(e?i.reject(e):i.resolve(),s=s.remove(t)),r.Wa[r.currentUser.toKey()]=s}}function oc(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.qa.get(t))n.ka.delete(r),e&&n.La.Ja(r,e);n.qa.delete(t),n.isPrimaryClient&&n.Ka.br(t).forEach(r=>{n.Ka.containsKey(r)||ny(n,r)})}function ny(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(sh(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ua.delete(e),dh(n))}function km(n,t,e){for(const r of e)r instanceof Qv?(n.Ka.addReference(r.key,t),Nx(n,r)):r instanceof Jv?(Re(hh,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,t),n.Ka.containsKey(r.key)||ny(n,r.key)):qe()}function Nx(n,t){const e=t.key,r=e.path.canonicalString();n.$a.get(e)||n.Qa.has(r)||(Re(hh,"New document in limbo: "+e),n.Qa.add(r),dh(n))}function dh(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new Le(Et.fromString(t)),r=n.za.next();n.Ua.set(r,new Ax(e)),n.$a=n.$a.insert(e,r),zv(n.remoteStore,new Lr(sr(mv(e.path)),r,"TargetPurposeLimboResolution",pl.ae))}}async function Ga(n,t,e){const r=We(n),s=[],i=[],a=[];r.ka.isEmpty()||(r.ka.forEach((l,u)=>{a.push(r.Ha(u,t,e).then(c=>{var d;if((c||e)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=e==null?void 0:e.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=nh.Yi(u.targetId,c);i.push(f)}}))}),await Promise.all(a),r.La.p_(s),await async function(u,c){const d=We(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ce.forEach(c,g=>ce.forEach(g.Hi,b=>d.persistence.referenceDelegate.addReference(f,g.targetId,b)).next(()=>ce.forEach(g.Ji,b=>d.persistence.referenceDelegate.removeReference(f,g.targetId,b)))))}catch(f){if(!xi(f))throw f;Re(rh,"Failed to update sequence numbers: "+f)}for(const f of c){const g=f.targetId;if(!f.fromCache){const b=d.Ts.get(g),v=b.snapshotVersion,A=b.withLastLimboFreeSnapshotVersion(v);d.Ts=d.Ts.insert(g,A)}}}(r.localStore,i))}async function $x(n,t){const e=We(n);if(!e.currentUser.isEqual(t)){Re(hh,"User change. New user:",t.toKey());const r=await Bv(e.localStore,t);e.currentUser=t,function(i,a){i.Ga.forEach(l=>{l.forEach(u=>{u.reject(new Ne(pe.CANCELLED,a))})}),i.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ga(e,r.Rs)}}function Fx(n,t){const e=We(n),r=e.Ua.get(t);if(r&&r.Ba)return Ze().add(r.key);{let s=Ze();const i=e.qa.get(t);if(!i)return s;for(const a of i){const l=e.ka.get(a);s=s.unionWith(l.view.Sa)}return s}}function ry(n){const t=We(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Zv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dx.bind(null,t),t.La.p_=wx.bind(null,t.eventManager),t.La.Ja=bx.bind(null,t.eventManager),t}function Lx(n){const t=We(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ox.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vx.bind(null,t),t}class tl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=El(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return BC(this.persistence,new $C,t.initialUser,this.serializer)}Xa(t){return new Lv(th.ri,this.serializer)}Za(t){return new WC}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tl.provider={build:()=>new tl};class Bx extends tl{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){ot(this.persistence.referenceDelegate instanceof Zo);const r=this.persistence.referenceDelegate.garbageCollector;return new TC(r,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new Lv(r=>Zo.ri(r,e),this.serializer)}}class lc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Am(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$x.bind(null,this.syncEngine),await px(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new vx}()}createDatastore(t){const e=El(t.databaseInfo.databaseId),r=function(i){return new XC(i)}(t.databaseInfo);return function(i,a,l,u){return new nx(i,a,l,u)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,s,i,a,l){return new sx(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Am(this.syncEngine,e,0),function(){return _m.D()?new _m:new KC}())}createSyncEngine(t,e){return function(s,i,a,l,u,c,d){const f=new kx(s,i,a,l,u,c);return d&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(s){const i=We(s);Re(Ss,"RemoteStore shutting down."),i.W_.add(5),await Ka(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}lc.provider={build:()=>new lc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Pr("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="FirestoreClient";class qx{constructor(t,e,r,s,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=Jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Re(as,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Re(as,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=uh(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function wu(n,t){n.asyncQueue.verifyOperationInProgress(),Re(as,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Bv(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function Sm(n,t){n.asyncQueue.verifyOperationInProgress();const e=await jx(n);Re(as,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>bm(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>bm(t.remoteStore,s)),n._onlineComponents=t}async function jx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(as,"Using user provided OfflineComponentProvider");try{await wu(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(s){return s.name==="FirebaseError"?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(e))throw e;gi("Error using user provided cache. Falling back to memory cache: "+e),await wu(n,new tl)}}else Re(as,"Using default OfflineComponentProvider"),await wu(n,new Bx(void 0));return n._offlineComponents}async function sy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(as,"Using user provided OnlineComponentProvider"),await Sm(n,n._uninitializedComponentsProvider._online)):(Re(as,"Using default OnlineComponentProvider"),await Sm(n,new lc))),n._onlineComponents}function zx(n){return sy(n).then(t=>t.syncEngine)}async function Yx(n){const t=await sy(n),e=t.eventManager;return e.onListen=Sx.bind(null,t.syncEngine),e.onUnlisten=Cx.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Rx.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=xx.bind(null,t.syncEngine),e}function Hx(n,t,e={}){const r=new Kr;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,c){const d=new Ux({next:g=>{d.su(),a.enqueueAndForget(()=>_x(i,f)),g.fromCache&&u.source==="server"?c.reject(new Ne(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new Tx(l,d,{includeMetadataChanges:!0,Ta:!0});return yx(i,f)}(await Yx(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(n,t,e){if(!e)throw new Ne(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Wx(n,t,e,r){if(t===!0&&r===!0)throw new Ne(pe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Im(n){if(!Le.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Cm(n){if(Le.isDocumentKey(n))throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":qe()}function nl(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ne(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=fh(n);throw new Ne(pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="firestore.googleapis.com",xm=!0;class Mm{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ne(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oy,this.ssl=xm}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:xm;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Fv;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<wC)throw new Ne(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Wx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iy((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Sl{constructor(t,e,r,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mm(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QI;switch(r.type){case"firstParty":return new e2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Rm.get(e);r&&(Re("ComponentProvider","Removing Datastore"),Rm.delete(e),r.terminate())}(this),Promise.resolve()}}function Kx(n,t,e,r={}){var s;const i=(n=nl(n,Sl))._getSettings(),a=Object.assign(Object.assign({},i),{emulatorOptions:n._getEmulatorOptions()}),l=`${t}:${e}`;i.host!==oy&&i.host!==l&&gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},i),{host:l,ssl:!1,emulatorOptions:r});if(!qo(u,a)&&(n._setSettings(u),r.mockUserToken)){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=fn.MOCK_USER;else{c=SR(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ne(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new fn(f)}n._authCredentials=new JI(new Gg(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Rl(this.firestore,t,this._query)}}class Wn{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wn(this.firestore,t,this._key)}}class Gr extends Rl{constructor(t,e,r){super(t,e,mv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wn(this.firestore,null,new Le(t))}withConverter(t){return new Gr(this.firestore,t,this._path)}}function Dm(n,t,...e){if(n=Da(n),ay("collection","path",t),n instanceof Sl){const r=Et.fromString(t,...e);return Cm(r),new Gr(n,null,r)}{if(!(n instanceof Wn||n instanceof Gr))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(t,...e));return Cm(r),new Gr(n.firestore,null,r)}}function Gx(n,t,...e){if(n=Da(n),arguments.length===1&&(t=Jg.newId()),ay("doc","path",t),n instanceof Sl){const r=Et.fromString(t,...e);return Im(r),new Wn(n,null,new Le(r))}{if(!(n instanceof Wn||n instanceof Gr))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(t,...e));return Im(r),new Wn(n.firestore,n instanceof Gr?n.converter:null,new Le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="AsyncQueue";class Vm{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new qv(this,"async_queue_retry"),this.Su=()=>{const r=_u();r&&Re(Om,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=t;const e=_u();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=_u();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new Kr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!xi(t))throw t;Re(Om,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Pr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=e,e}enqueueAfterDelay(t,e,r){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const s=lh.createAndSchedule(this,t,e,r,i=>this.Fu(i));return this.fu.push(s),s}Du(){this.gu&&qe()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class mh extends Sl{constructor(t,e,r,s){super(t,e,r,s),this.type="firestore",this._queue=new Vm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Vm(t),this._firestoreClient=void 0,await t}}}function Qx(n,t){const e=typeof n=="object"?n:$I(),r=typeof n=="string"?n:Ho,s=MI(e,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=AR("firestore");i&&Kx(s,...i)}return s}function ly(n){if(n._terminated)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jx(n),n._firestoreClient}function Jx(n){var t,e,r;const s=n._freezeSettings(),i=function(l,u,c,d){return new p2(l,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,iy(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((e=s.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new qx(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ti(an.fromBase64String(t))}catch(e){throw new Ne(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ti(an.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Ne(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ne(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ne(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ge(this._lat,t._lat)||Ge(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=/^__.*__$/;class Zx{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new $s(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ha(t,this.data,e,this.fieldTransforms)}}function cy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe()}}class yh{constructor(t,e,r,s,i,a){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new yh(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.ku({path:r,Qu:!1});return s.$u(t),s}Uu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return rl(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(cy(this.Lu)&&Xx.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class eM{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||El(t)}ju(t,e,r,s=!1){return new yh({Lu:t,methodName:e,zu:r,path:rn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tM(n){const t=n._freezeSettings(),e=El(n._databaseId);return new eM(n._databaseId,!!t.ignoreUndefinedProperties,e)}function nM(n,t,e,r,s,i={}){const a=n.ju(i.merge||i.mergeFields?2:0,t,e,s);my("Data must be an object, but it was:",a,r);const l=dy(r,a);let u,c;if(i.merge)u=new Yn(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const g=rM(t,f,e);if(!a.contains(g))throw new Ne(pe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);iM(d,g)||d.push(g)}u=new Yn(d),c=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=a.fieldTransforms;return new Zx(new Nn(l),u,c)}function hy(n,t){if(fy(n=Da(n)))return my("Unsupported field value:",t,n),dy(n,t);if(n instanceof uy)return function(r,s){if(!cy(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=hy(l,s.Ku(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(n,t)}return function(r,s){if((r=Da(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Yt.fromDate(r);return{timestampValue:Xo(s.serializer,i)}}if(r instanceof Yt){const i=new Yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xo(s.serializer,i)}}if(r instanceof gh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ti)return{bytesValue:xv(s.serializer,r._byteString)};if(r instanceof Wn){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zc(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vh)return function(a,l){return{mapValue:{fields:{[iv]:{stringValue:av},[Wo]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Wu("VectorValues must only contain numeric values.");return Qc(l.serializer,c)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${fh(r)}`)}(n,t)}function dy(n,t){const e={};return Zg(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vs(n,(r,s)=>{const i=hy(s,t.qu(r));i!=null&&(e[r]=i)}),{mapValue:{fields:e}}}function fy(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Yt||n instanceof gh||n instanceof Ti||n instanceof Wn||n instanceof uy||n instanceof vh)}function my(n,t,e){if(!fy(e)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(e)){const r=fh(e);throw r==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+r)}}function rM(n,t,e){if((t=Da(t))instanceof ph)return t._internalPath;if(typeof t=="string")return py(n,t);throw rl("Field path arguments must be of type string or ",n,!1,void 0,e)}const sM=new RegExp("[~\\*/\\[\\]]");function py(n,t,e){if(t.search(sM)>=0)throw rl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ph(...t.split("."))._internalPath}catch{throw rl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function rl(n,t,e,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Ne(pe.INVALID_ARGUMENT,l+n+u)}function iM(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t,e,r,s,i){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new aM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(vy("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class aM extends gy{data(){return super.data()}}function vy(n,t){return typeof t=="string"?py(n,t):t instanceof ph?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lM{convertValue(t,e="none"){switch(ss(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Nt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(rs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw qe()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Vs(t,(s,i)=>{r[s]=this.convertValue(i,e)}),r}convertVectorValue(t){var e,r,s;const i=(s=(r=(e=t.fields)===null||e===void 0?void 0:e[Wo].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Nt(a.doubleValue));return new vh(i)}convertGeoPoint(t){return new gh(Nt(t.latitude),Nt(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=vl(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp($a(t));default:return null}}convertTimestamp(t){const e=ns(t);return new Yt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Et.fromString(t);ot($v(r));const s=new Fa(r.get(1),r.get(3)),i=new Le(r.popFirst(5));return s.isEqual(e)||Pr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(n,t,e){let r;return r=n?n.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class cM extends gy{constructor(t,e,r,s,i,a){super(t,e,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Co(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(vy("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class Co extends cM{data(t={}){return super.data(t)}}class hM{constructor(t,e,r,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new Co(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ne(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Co(s._firestore,s._userDataWriter,l.doc.key,l.doc,new bo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Co(s._firestore,s._userDataWriter,l.doc.key,l.doc,new bo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:dM(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function dM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe()}}class fM extends lM{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ti(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wn(this.firestore,null,e)}}function mM(n){n=nl(n,Rl);const t=nl(n.firestore,mh),e=ly(t),r=new fM(t);return oM(n._query),Hx(e,n._query).then(s=>new hM(t,r,n,s))}function pM(n,t){const e=nl(n.firestore,mh),r=Gx(n),s=uM(n.converter,t);return gM(e,[nM(tM(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}function gM(n,t){return function(r,s){const i=new Kr;return r.asyncQueue.enqueueAndForget(async()=>Mx(await zx(r),s,i)),i.promise}(ly(n),t)}(function(t,e=!0){(function(s){Ii=s})(NI),zo(new Oa("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new mh(new XI(r.getProvider("auth-internal")),new t2(a,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ne(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fa(c.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ai(Bf,Uf,t),ai(Bf,Uf,"esm2017")})();const vM={apiKey:"AIzaSyBlpfahAFPVLtfK3n7_2UDYLBJQe7te_tk",authDomain:"test1-9090c.firebaseapp.com",databaseURL:"https://test1-9090c-default-rtdb.firebaseio.com",projectId:"test1-9090c",storageBucket:"test1-9090c.firebasestorage.app",messagingSenderId:"84442152360",appId:"1:84442152360:web:d058446ae65ab89362b19d"},yM=Bg(vM),Nm=Qx(yM),_M={key:0,class:"text-center font-[800]"},wM={class:"mx-auto w-max mt-4"},bM={key:0,class:"mt-3"},TM={key:1,class:"mt-3"},PM={key:2,class:"mt-3"},EM={key:3,class:"mt-3"},AM={key:4,class:"mt-3"},kM={key:1,class:"bg-primary mt-5 w-full h-[40px] flex-center rounded-md"},SM={key:5,class:"text-center"},LM=vt({__name:"PDashboard",setup(n){const t=[{title:""},{title:""},{title:""},{title:""},{title:""}],e=E_({name:"",birthday:"",phone:"+998",university_end:"",university_step:"",university_direction:"",type:"",city:"",condition:"",university:"",level:"",be_here:"",need_home:"",has_natives:""},{name:{required:On},birthday:{required:On},phone:{required:On,minLength:R_(19)},university_end:{required:On},university_step:{required:On},university_direction:{required:On},type:{required:On},city:{required:On},condition:{required:On},level:{required:On},need_home:{required:On},has_natives:{required:On}}),r=he(1),s=[{id:"Bakalavr",name:"Bakalavr"},{id:"Magistratura",name:"Magistratura"},{id:"boshqa",name:"boshqa"}],i=[{id:"Kunduzgi",name:"Kunduzgi"},{id:"Kechki",name:"Kechki"},{id:"Sirtqi",name:"Sirtqi"}],a=[{id:"Kontrakt",name:"Kontrakt"},{id:"Grant",name:"Grant"}],l=[{id:"Boshlangâ€˜ich",name:"Boshlangâ€˜ich"},{id:"Oâ€˜rta",name:"Oâ€˜rta"},{id:"Yuqori",name:"Yuqori"}],u=[{id:"Ha",name:"Ha"},{id:"Yo'q",name:"Yo'q"}],c=b=>{r.value=b},d={mounted:b=>{vn(()=>b.focus())}},f=he(!1),g=()=>{f.value=!0;try{pM(Dm(Nm,"applications"),{...e.values,createdAt:new Date}).then(async()=>{console.log("Form suSbmitted successfully!");const v=(await mM(Dm(Nm,"applications"))).docs.map(B=>({id:B.id,...B.data()}));function A(B){return typeof B!="string"?"":B}console.log(e.values);const S="7851159577:AAH2AL7CdV7gfP9F2ArmwooIVfgDiHeBwf4",F="-4623214324",q=`
ðŸ†• Ariza - ${v.length} ðŸŸ© 

ðŸ‘¤ Ismi Familiyasi: ${A(e.values.name||"Kiritilmagan")}
ðŸ—“ Tug'ilgan sanasi: ${A(iR(e.values.birthday).format("DD/MM/YYYY")||"Kiritilmagan")}
ðŸ“ž Telefon: ${A(e.values.phone||"Kiritilmagan")}
ðŸ« Ta'lim muassasasini tugatgan yili: ${A(e.values.university_end||"Kiritilmagan")}
ðŸ¢ Bakalavr yoki magistratura bosqichlaridan qaysi biriga topshirmoqchiligi: ${A(e.values.university_step||"Kiritilmagan")}
ðŸŽ“ Qaysi mutaxassislik (yoâ€˜nalish) boâ€˜yicha tahsil olmoqchiligi: ${A(e.values.university_direction||"Kiritilmagan")}
ðŸ“š Ta'lim turi: ${A(e.values.type||"Kiritilmagan")}
ðŸ“ Rossiyadagi qaysi shaharda tahsil olmoqchiligi: ${A(e.values.city||"Kiritilmagan")}
${e.values.condition==="Grant"?"ðŸŸ©":"ðŸŸ¦"} Kontrakt yoki grant asosida topshirmoqchiligi: ${A(e.values.condition||"Kiritilmagan")}
ðŸŽ¯ Muayyan universitet: ${A(e.values.university||"Kiritilmagan")}
ðŸ‡·ðŸ‡º Rus tilini qanchalik bilishi: ${A(e.values.level||"Kiritilmagan")}
âœˆï¸ Rossiyada bo'lganmi: ${A(e.values.be_here||"Kiritilmagan")}
ðŸ¡ Yoptoqxona kerakmi: ${A(e.values.need_home||"Kiritilmagan")}
ðŸ‘©â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦ Rossiyada qarindoshlari bormi: ${A(e.values.has_natives||"Kiritilmagan")}
        `;console.log(q);try{const Q=await(await fetch(`https://api.telegram.org/bot${S}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:F,text:q})})).json();Q.ok?console.log("âœ… Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾!"):console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ:",Q)}catch(B){console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ:",B)}r.value=6,f.value=!1}).catch(b=>{console.error("Error submitting form: ",b)})}catch(b){console.error("Error in submit function: ",b)}};return(b,v)=>(W(),re("main",null,[r.value!==6?(W(),re("h1",_M," Rossiya universitetlariga o'qishga kirish uchun anketa ðŸ“‘ ")):de("",!0),Se("div",wM,[r.value!==6?(W(),et(V_,{key:0,"current-step":r.value,steps:t},null,8,["current-step"])):de("",!0)]),$e(Qr,{name:"fade",mode:"out-in"},{default:De(()=>[r.value==1?(W(),re("div",bM,[$e(P(En),{label:"F.I.SH"},{default:De(()=>[$e(P(Nr),{placeholder:"Ism va Familiyangizni kiriting",modelValue:P(e).values.name,"onUpdate:modelValue":v[0]||(v[0]=A=>P(e).values.name=A)},null,8,["modelValue"])]),_:1}),$e(P(En),{label:"Tugâ€˜ilgan sanangiz"},{default:De(()=>[$e(P(nR),{placeholder:"kun.oy.yil",maxDate:new Date,modelValue:P(e).values.birthday,"onUpdate:modelValue":v[1]||(v[1]=A=>P(e).values.birthday=A)},null,8,["maxDate","modelValue"])]),_:1}),$e(P(En),{label:"Aloqa telefon raqamingiz"},{default:De(()=>[Br($e(P(Nr),{placeholder:"kun/oy/yil",modelValue:P(e).values.phone,"onUpdate:modelValue":v[2]||(v[2]=A=>P(e).values.phone=A)},null,8,["modelValue"]),[[P(Rf),"+### (##) ###-##-##"]])]),_:1}),$e(P(Yi),{onClick:v[3]||(v[3]=A=>c(2)),class:"w-full mt-5",text:"Davom etish",icon:"icon-arrow-right",disabled:P(e).$v.value.name.$invalid||P(e).$v.value.birthday.$invalid||P(e).$v.value.phone.$invalid},null,8,["disabled"])])):r.value==2?(W(),re("div",TM,[$e(P(En),{label:"Ta'lim muassasasini tugatgan yilingiz"},{default:De(()=>[Br($e(P(Nr),{placeholder:"Yilni kiriting",modelValue:P(e).values.university_end,"onUpdate:modelValue":v[4]||(v[4]=A=>P(e).values.university_end=A),type:"number"},null,8,["modelValue"]),[[d],[P(Rf),"####"]])]),_:1}),$e(P(En),{labelClass:"text-xs",label:"Bakalavr yoki magistratura bosqichlaridan qaysi biriga topshirmoqchisiz"},{default:De(()=>[$e(P(Ws),{modelValue:P(e).values.university_step,"onUpdate:modelValue":v[5]||(v[5]=A=>P(e).values.university_step=A),items:s,class:"mt-2"},null,8,["modelValue"])]),_:1}),$e(P(En),{label:"Qaysi mutaxassislik (yoâ€˜nalish) boâ€˜yicha tahsil olmoqchisiz"},{default:De(()=>[$e(P(Nr),{placeholder:"Yoâ€˜nalishni kiriting",modelValue:P(e).values.university_direction,"onUpdate:modelValue":v[6]||(v[6]=A=>P(e).values.university_direction=A)},null,8,["modelValue"])]),_:1}),$e(P(Yi),{onClick:v[7]||(v[7]=A=>c(3)),class:"w-full mt-5",text:"Davom etish",icon:"icon-arrow-right",disabled:P(e).$v.value.university_end.$invalid||P(e).$v.value.university_step.$invalid||P(e).$v.value.university_direction.$invalid},null,8,["disabled"])])):r.value==3?(W(),re("div",PM,[$e(P(En),{label:"Ta'lim turini tanlang"},{default:De(()=>[$e(P(Ws),{modelValue:P(e).values.type,"onUpdate:modelValue":v[8]||(v[8]=A=>P(e).values.type=A),items:i,class:"mt-2"},null,8,["modelValue"])]),_:1}),$e(P(En),{label:"Rossiyadagi qaysi shaharda tahsil olishni rejalashtiryapsiz"},{default:De(()=>[$e(P(Nr),{placeholder:"Shahar nomini kiriting",modelValue:P(e).values.city,"onUpdate:modelValue":v[9]||(v[9]=A=>P(e).values.city=A)},null,8,["modelValue"])]),_:1}),$e(P(En),{label:"Kontrakt yoki grant asosida topshirmoqchisiz"},{default:De(()=>[$e(P(Ws),{modelValue:P(e).values.condition,"onUpdate:modelValue":v[10]||(v[10]=A=>P(e).values.condition=A),items:a,class:"mt-2"},null,8,["modelValue"])]),_:1}),$e(P(Yi),{onClick:v[11]||(v[11]=A=>c(4)),class:"w-full mt-5",text:"Davom etish",icon:"icon-arrow-right",disabled:P(e).$v.value.type.$invalid||P(e).$v.value.city.$invalid||P(e).$v.value.condition.$invalid},null,8,["disabled"])])):r.value==4?(W(),re("div",EM,[$e(P(En),{"label-class":"text-xs",label:"Muayyan universitetni tanlaganmisiz? Agar tanlagan boâ€˜lsangiz, universitet nomini yozing"},{default:De(()=>[$e(P(Nr),{placeholder:"Universitet nomini kiriting",modelValue:P(e).values.university,"onUpdate:modelValue":v[12]||(v[12]=A=>P(e).values.university=A)},null,8,["modelValue"])]),_:1}),$e(P(En),{label:"Rus tilini qanchalik bilasiz"},{default:De(()=>[$e(P(Ws),{modelValue:P(e).values.level,"onUpdate:modelValue":v[13]||(v[13]=A=>P(e).values.level=A),items:l,class:"mt-2"},null,8,["modelValue"])]),_:1}),$e(P(En),{"label-class":"text-xs",label:" Ilgari Rossiyada boâ€˜lganmisiz? Agar boâ€˜lgan boâ€˜lsangiz, qachon va qaysi maqsadda? (Ish, o'qish, boshqa)"},{default:De(()=>[$e(P(Nr),{placeholder:"Ma'lumot kirting",modelValue:P(e).values.be_here,"onUpdate:modelValue":v[14]||(v[14]=A=>P(e).values.be_here=A)},null,8,["modelValue"])]),_:1}),$e(P(Yi),{onClick:v[15]||(v[15]=A=>c(5)),class:"w-full mt-5",text:"Davom etish",icon:"icon-arrow-right",disabled:P(e).$v.value.level.$invalid},null,8,["disabled"])])):r.value==5?(W(),re("div",AM,[$e(P(En),{label:"Sizga Rossiyada yashash uchun yotoqxona kerakmi"},{default:De(()=>[$e(P(Ws),{modelValue:P(e).values.need_home,"onUpdate:modelValue":v[16]||(v[16]=A=>P(e).values.need_home=A),items:u,class:"mt-2"},null,8,["modelValue"])]),_:1}),$e(P(En),{"label-class":"text-xs",label:"Rossiyada qarindoshlaringiz yoki yaqin insonlaringiz bormi"},{default:De(()=>[$e(P(Ws),{modelValue:P(e).values.has_natives,"onUpdate:modelValue":v[17]||(v[17]=A=>P(e).values.has_natives=A),items:u,class:"mt-2"},null,8,["modelValue"])]),_:1}),$e(Qr,{name:"fade",mode:"out-in"},{default:De(()=>[f.value?(W(),re("div",kM,v[18]||(v[18]=[Se("div",{class:"spinner"},null,-1)]))):(W(),et(P(Yi),{key:0,onClick:g,class:"w-full mt-5",text:"Ariza qoldirish",icon:"icon-check",disabled:P(e).$v.value.need_home.$invalid||P(e).$v.value.has_natives.$invalid},null,8,["disabled"]))]),_:1})])):r.value==6?(W(),re("div",SM,[v[19]||(v[19]=Se("div",{class:"h-[80px] w-[80px] bg-primary text-white text-[50px] border-[4px] border-white/10 flex-center mx-auto mb-4 rounded-full"},[Se("i",{class:"icon-check"})],-1)),v[20]||(v[20]=Se("h1",{class:"font-[600]"},[Fn(" Ariza Yuborildi "),Se("br"),Se("span",{class:"text-sm font-[500]"},"Tabriklaymiz siz Universitetga kirishga birinchi qadam qo'ydingiz !")],-1)),v[21]||(v[21]=Se("p",{class:"mt-4 text-primary font-[500] text-sm border-t border-primary pt-4"}," Xodimlarimiz siz bilan 24 soat ichida bo'g'lanishadi. ",-1)),$e(c_)])):de("",!0)]),_:1})]))}});export{LM as default};
